webpackJsonp([1],{"++WL":function(i,e){},"/QfS":function(i,e){},"0Hx0":function(i,e){},"13kN":function(i,e,t){"use strict";function s(i){t("kC67")}var a=(Boolean,String,String,String,{name:"loading",model:{prop:"show",event:"change"},props:{show:Boolean,text:String,position:String,transition:{type:String,default:"vux-mask"}},watch:{show:function(i){this.$emit("update:show",i)}}}),o=function(){var i=this,e=i.$createElement,t=i._self._c||e;return t("transition",{attrs:{name:i.transition}},[t("div",{directives:[{name:"show",rawName:"v-show",value:i.show,expression:"show"}],staticClass:"weui-loading_toast vux-loading",class:i.text?"":"vux-loading-no-text"},[t("div",{staticClass:"weui-mask_transparent"}),i._v(" "),t("div",{staticClass:"weui-toast",style:{position:i.position}},[t("i",{staticClass:"weui-loading weui-icon_toast"}),i._v(" "),i.text?t("p",{staticClass:"weui-toast__content"},[i._v(i._s(i.text||"加载中")),i._t("default")],2):i._e()])])])},n=[],r={render:o,staticRenderFns:n},l=r,c=t("C7Lr"),d=s,u=c(a,l,!1,d,null,null);e.a=u.exports},"1Uz0":function(i,e){},"2hfl":function(i,e){},"3D3f":function(i,e){},"6srP":function(i,e){},"95Va":function(i,e){},"9UAL":function(i,e){},A3qD:function(i,e){},Awop:function(i,e){},BUCA:function(i,e){},CtoM:function(i,e){},DzcA:function(i,e){},EpcM:function(i,e){},F84O:function(i,e){},FAyj:function(i,e){},GByh:function(i,e){},HemK:function(i,e){},IhRb:function(i,e){},Jtfg:function(i,e){},MbtE:function(i,e){},MyL7:function(i,e){},NHnr:function(i,e,t){"use strict";function s(i){t("0Hx0")}function a(i){t("gjNJ")}function o(i){t("Zt8N")}function n(i){t("DzcA")}function r(i){t("FAyj")}function l(i){t("Jtfg")}function c(i){t("PDJB")}function d(i){t("95Va")}function u(i){t("6srP")}function m(i){t("sOKc"),t("QP3d")}function v(i){t("A3qD")}function p(i){t("ofdG")}function h(i){t("yAHh")}function _(i){t("hrQI")}function g(i){t("YpEb")}function f(i){t("++WL")}function y(i){t("W+75")}function C(i){t("jzSm")}function w(i){t("3D3f")}function b(i){t("/QfS")}function x(i){t("WO4B")}function B(i){t("CtoM"),t("ncIx")}function S(i){t("h8Gu"),t("2hfl")}function k(i){t("HemK")}function M(i){t("sooj")}function P(i){t("raYE")}function L(i){t("MyL7")}function I(i){t("i1WR")}function O(i){t("F84O"),t("9UAL")}function V(i){t("Awop")}function A(i){t("EpcM")}function F(i){t("Q0rm")}function j(i){t("QkAU")}function T(i){t("BUCA")}function E(i){t("GByh")}function R(i){t("aBL+")}function D(i){t("NqD4")}function U(i){t("jOLW")}Object.defineProperty(e,"__esModule",{value:!0});var H=t("rVsN"),J=t.n(H),N=t("kV13"),q=t("iDdd"),W=t.n(q),Z=t("7LQH"),G={name:"app",provide:function(){return{reloadPage:this.reloadPage}},data:function(){return{isRouterAlive:!0}},methods:{reloadPage:function(){this.isRouterAlive=!1,this.$nextTick(function(){this.isRouterAlive=!0})}}},K=function(){var i=this,e=i.$createElement,t=i._self._c||e;return t("div",{attrs:{id:"app"}},[i.isRouterAlive?t("router-view",{directives:[{name:"wechat-title",rawName:"v-wechat-title",value:i.$route.meta.title,expression:"$route.meta.title"}]}):i._e()],1)},z=[],Q={render:K,staticRenderFns:z},Y=Q,X=t("C7Lr"),ii=s,ei=X(G,Y,!1,ii,null,null),ti=ei.exports,si=t("3cXf"),ai=t.n(si),oi={name:"order",data:function(){return{subStatus:!1,roomInfo:{},totalPrice:0,product:{},addr:{},tel:"",openid:"",roomid:"",wechatJssdk:{debug:!0,appId:"",timestamp:"",nonceStr:"",signature:"",jsApiList:["chooseWXPay","onMenuShareTimeline","onMenuShareAppMessage"]}}},created:function(){var i=localStorage.getItem("buy_room"),e=localStorage.getItem("buy_product");this.roomInfo=i?JSON.parse(i):"",this.totalPrice=localStorage.getItem("buy_total"),this.product=e?JSON.parse(e):"",this.tel="tel:"+this.roomInfo.room_tel,this.openid=localStorage.getItem("openid"),this.roomid=localStorage.getItem("roomid"),this.wechatConfig(),this.getAddr()},methods:{getAddr:function(){var i=this,e=this,t=new URLSearchParams;t.append("open_id",this.openid),e.axiosPost("/client/addr",t).then(function(t){e.$vux.loading.hide(),200==t.status?e.addr=t.data:i.$vux.alert.show({title:"温馨提示",content:t.message})},function(i){e.$vux.loading.hide()})},changeNum:function(i,e){1==i?--e.buy_num<0&&(e.buy_num=0):e.buy_num++;var t=0;this.totalPrice=0;for(var s=0;s<this.product.length;s++)this.product[s].buy_num>0&&(t+=this.product[s].buy_num*this.product[s].price)&&(this.totalPrice=t.toFixed(2))},addAddr:function(){this.$router.replace({path:"/addr/edit",query:{from:1}})},addresList:function(){this.$router.replace({path:"/addr",query:{from:1}})},subOrder:function(){var i=this;if(this.subStatus)return!1;for(var e=this,t=[],s=0;s<this.product.length;s++)this.product[s].buy_num>0&&t.push({product_id:this.product[s].id,num:this.product[s].buy_num});if(e.totalPrice<=0||t.length<=0)return this.$vux.alert.show({title:"温馨提示",content:"请勾选需要购买的商品"}),!1;if(!e.addr.client_name)return this.$vux.alert.show({title:"温馨提示",content:"请填写收件人信息"}),!1;e.$vux.loading.show({text:"提交中~"}),this.subStatus=!0;var a=new URLSearchParams;a.append("open_id",e.openid),a.append("room_id",e.roomid),a.append("products",ai()(t)),a.append("user_name",e.addr.client_name),a.append("user_sex",e.addr.sex),a.append("user_phone",e.addr.mobile),a.append("address",e.addr.addr+e.addr.detail),e.axiosPost("/client/order-sub",a).then(function(t){e.subStatus=!1,e.$vux.loading.hide(),200==t.status?e.wechatPay(t.data.pay,t.data.order_no):i.$vux.alert.show({title:"温馨提示",content:t.message})},function(i){e.subStatus=!1,e.$vux.loading.hide()})},wechatConfig:function(){var i=this,e=window.location.href.split("#")[0],t=this,s=new URLSearchParams;s.append("open_id",this.openid),s.append("url",e),s.append("apis","chooseWXPay,onMenuShareTimeline,onMenuShareAppMessage"),t.axiosPost("/wechat/jssdk",s).then(function(e){t.$vux.loading.hide(),200==e.status?t.$wechat.config(JSON.parse(e.data)):i.$vux.alert.show({title:"温馨提示",content:"微信参数错误"})},function(i){t.$vux.loading.hide()})},wechatPay:function(i,e){var t=this;t.$wechat.chooseWXPay({timestamp:i.timeStamp,nonceStr:i.nonceStr,package:i.package,signType:i.signType,paySign:i.paySign,success:function(i){t.$router.replace({path:"/order/success",query:{order_id:e}})},cancel:function(i){}})}}},ni=function(){var i=this,e=i.$createElement,t=i._self._c||e;return t("div",{staticClass:"order"},[t("div",{staticClass:"orderHead"},[t("div",{staticClass:"orderTabMenu"},[t("a",{attrs:{href:"#"}},[i._v("产地到家")]),i._v(" "),t("a",{attrs:{href:i.tel}},[i._v("联系园主")])]),i._v(" "),t("div",{staticClass:"orderAddress"},[i.addr.client_name?t("dl",{on:{click:i.addresList}},[t("dt",[i._v(i._s(i.addr.addr)+i._s(i.addr.detail))]),i._v(" "),t("dd",[i._v(i._s(i.addr.client_name)+" "+i._s(i.addr.sex)+" "+i._s(i.addr.mobile))])]):t("div",{staticClass:"addNewAddress"},[t("a",{attrs:{href:"javascript:void(0);"},on:{click:i.addAddr}},[i._v("+新增收货地址")])]),i._v(" "),i._m(0)])]),i._v(" "),t("div",{staticClass:"orderList"},[t("div",{staticClass:"tit",style:{backgroundImage:"url("+i.roomInfo.room_logo+")"}},[i._v(i._s(i.roomInfo.room_name))]),i._v(" "),i._l(i.product,function(e){return t("dl",[t("dt",[t("img",{attrs:{src:e.pic}})]),i._v(" "),t("dd",[t("h3",[i._v(i._s(e.title)),t("span",[i._v("¥"+i._s(e.price))])]),i._v(" "),t("p",[i._v(i._s(e.desc))]),i._v(" "),t("span",{staticClass:"num"},[t("a",{attrs:{href:"javascript:void(0);"},on:{click:function(t){return i.changeNum(1,e)}}},[i._v("-")]),i._v(" "),t("i",[i._v(i._s(e.buy_num))]),i._v(" "),t("a",{attrs:{href:"javascript:void(0);"},on:{click:function(t){return i.changeNum(2,e)}}},[i._v("+")])])])])})],2),i._v(" "),t("div",{staticClass:"payBtn"},[t("a",{attrs:{href:"javascript:void(0);"},on:{click:i.subOrder}},[i._v("微信支付¥"+i._s(i.totalPrice))])])])},ri=[function(){var i=this,e=i.$createElement,t=i._self._c||e;return t("div",{staticClass:"orderTime"},[i._v("\n                    立即打包"),t("span",[i._v("准时发货")])])}],li={render:ni,staticRenderFns:ri},ci=li,di=t("C7Lr"),ui=a,mi=di(oi,ci,!1,ui,"data-v-19ceb7a7",null),vi=mi.exports,pi={name:"LiveFooter",props:["findex"],data:function(){return{footer:[{fname:"live",fclass:"live-foot-live",ftext:"实时视频",path:"/"},{fname:"video",fclass:"live-foot-video",ftext:"精彩短片",path:"/video"},{fname:"user",fclass:"live-foot-user",ftext:"个人中心",path:"/user"}]}},methods:{changeIndex:function(i){this.$router.replace({path:i.path})}}},hi=function(){var i=this,e=i.$createElement,t=i._self._c||e;return t("div",{staticClass:"footer"},i._l(i.footer,function(e,s){return t("div",{key:s,staticClass:"item"},[t("div",{class:e.fclass},[t("div",{class:i.findex==e.fname?"active":"",on:{click:function(t){return i.changeIndex(e)}}},[t("div",{staticClass:"item-icon"}),i._v(" "),t("div",{staticClass:"item-text"},[i._v(i._s(e.ftext))])])])])}),0)},_i=[],gi={render:hi,staticRenderFns:_i},fi=gi,yi=t("C7Lr"),Ci=o,wi=yi(pi,fi,!1,Ci,"data-v-21068f9d",null),bi=wi.exports,xi={name:"edit-address",components:{LiveFooter:bi},data:function(){return{room_id:0,openid:"",subStatus:0,addrInfo:{aid:0,name:"",commmon:0,sex:1,mobile:"",addr:"",detail:"",code:""},goBack:"",smsModel:"发送验证码",smsStatus:0,findex:"user"}},created:function(){this.openid=localStorage.getItem("openid");var i=localStorage.getItem("address_edit");i&&(this.addrInfo=JSON.parse(i)),2==this.$route.query.from?this.goBack="/addr":this.goBack="/order"},methods:{setSex:function(i,e){i.sex=e},updateAddr:function(){var i=this,e=this.addrInfo;if(this.subStatus)return!1;if(!e.name)return i.$vux.alert.show({title:"温馨提示",content:"请填写联系人姓名"}),!1;if(!e.mobile||!/^[1][34578]\d{9}$/.test(e.mobile)||!/^[1-9]\d*$/.test(e.mobile)||11!==e.mobile.length)return i.$vux.alert.show({title:"温馨提示",content:"请填写有效手机号"}),!1;if(!e.addr)return i.$vux.alert.show({title:"温馨提示",content:"请填写收货地址"}),!1;if(!e.detail)return i.$vux.alert.show({title:"温馨提示",content:"请填写门牌号"}),!1;var t=new URLSearchParams;e.aid&&t.append("aid",e.aid),t.append("client_name",e.name),t.append("commmon",e.commmon),t.append("client_sex",e.sex),t.append("mobile",e.mobile),t.append("addr",e.addr),t.append("detail",e.detail),t.append("code",e.code),i.$vux.loading.show({text:"加载中~"}),this.subStatus=!0,i.axiosPost("/client/addr-save",t).then(function(e){i.subStatus=!1,i.$vux.loading.hide(),200==e.status?i.$router.replace({path:i.goBack}):i.$vux.alert.show({title:"温馨提示",content:e.message})},function(e){i.subStatus=!1,i.$vux.loading.hide()})},sendSms:function(){var i=this;if(this.smsStatus)return!1;if(!/^1[3456789                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     ]\d{9}$/.test(this.addrInfo.mobile))return this.$vux.alert.show({title:"温馨提示",content:"请输入正确的手机号码"}),!1;var e=new URLSearchParams;e.append("mobile",this.addrInfo.mobile),i.axiosPost("/client/sms",e).then(function(e){i.$vux.loading.hide(),200==e.status?(i.smsModel=60,i.smsStatus=!0,i.countDown()):(i.smsStatus=0,i.$vux.alert.show({title:"温馨提示",content:e.message}))},function(e){i.smsStatus=0,i.$vux.loading.hide()})},countDown:function(){if(0==this.smsModel)this.smsModel="发送验证码",this.smsStatus=0;else{this.smsModel--;var i=this;setTimeout(function(){i.countDown()},1e3)}}}},Bi=function(){var i=this,e=i.$createElement,t=i._self._c||e;return t("div",{staticClass:"address"},[t("div",{staticClass:"editAddress"},[t("dl",[t("dt",[i._v("联系人：")]),i._v(" "),t("dd",[t("input",{directives:[{name:"model",rawName:"v-model",value:i.addrInfo.name,expression:"addrInfo.name"}],attrs:{type:"text",placeholder:"请填写收货人的姓名",name:""},domProps:{value:i.addrInfo.name},on:{input:function(e){e.target.composing||i.$set(i.addrInfo,"name",e.target.value)}}})])]),i._v(" "),t("dl",[t("dt"),i._v(" "),t("dd",[t("a",{class:[2!=i.addrInfo.sex?"cur wrongIcon":"wrongIcon"],attrs:{href:"javascript:void(0);"},on:{click:function(e){return i.setSex(i.addrInfo,1)}}},[i._v("先生")]),i._v(" "),t("a",{class:[2==i.addrInfo.sex?"cur wrongIcon":"wrongIcon"],attrs:{href:"javascript:void(0);"},on:{click:function(e){return i.setSex(i.addrInfo,2)}}},[i._v("女士")])])]),i._v(" "),t("dl",[t("dt",[i._v("手机号：")]),i._v(" "),t("dd",{staticClass:"add-mobile"},[t("input",{directives:[{name:"model",rawName:"v-model",value:i.addrInfo.mobile,expression:"addrInfo.mobile"}],attrs:{type:"text",oninput:"if(value.length>11) value=value.slice(0,11)",placeholder:"请填写收货人手机号",name:""},domProps:{value:i.addrInfo.mobile},on:{input:function(e){e.target.composing||i.$set(i.addrInfo,"mobile",e.target.value)}}}),i._v(" "),i.smsStatus?t("span",{staticClass:"send-code"},[i._v("重新发送("+i._s(i.smsModel)+")")]):t("span",{staticClass:"send-code",on:{click:i.sendSms}},[i._v(i._s(i.smsModel))])])]),i._v(" "),t("dl",[t("dt",[i._v("验证码：")]),i._v(" "),t("dd",[t("input",{directives:[{name:"model",rawName:"v-model",value:i.addrInfo.code,expression:"addrInfo.code"}],attrs:{type:"number",oninput:"if(value.length>4) value=value.slice(0,4)",placeholder:"请填写验证码",name:""},domProps:{value:i.addrInfo.code},on:{input:function(e){e.target.composing||i.$set(i.addrInfo,"code",e.target.value)}}})])]),i._v(" "),t("dl",[t("dt",[i._v("收货地址：")]),i._v(" "),t("dd",[t("input",{directives:[{name:"model",rawName:"v-model",value:i.addrInfo.addr,expression:"addrInfo.addr"}],attrs:{type:"text",placeholder:"请填写收货地址",name:""},domProps:{value:i.addrInfo.addr},on:{input:function(e){e.target.composing||i.$set(i.addrInfo,"addr",e.target.value)}}})])]),i._v(" "),t("dl",[t("dt",[i._v("门牌号：")]),i._v(" "),t("dd",[t("input",{directives:[{name:"model",rawName:"v-model",value:i.addrInfo.detail,expression:"addrInfo.detail"}],attrs:{type:"text",placeholder:"详细地址，例：16号楼5层301室"},domProps:{value:i.addrInfo.detail},on:{input:function(e){e.target.composing||i.$set(i.addrInfo,"detail",e.target.value)}}})])]),i._v(" "),t("button",{on:{click:i.updateAddr}},[i._v("保存地址")])]),i._v(" "),t("live-footer",{staticClass:"live-foot",attrs:{findex:i.findex}})],1)},$i=[],Si={render:Bi,staticRenderFns:$i},ki=Si,Mi=t("C7Lr"),Pi=n,Li=Mi(xi,ki,!1,Pi,"data-v-4ff26e3b",null),Ii=Li.exports,Oi={name:"order-success",data:function(){return{orders:{},order_id:"",openid:"",tel:""}},created:function(){this.order_id=this.$route.query.order_id,this.getOrderList()},methods:{myOrderListPath:function(){this.$router.replace({path:"/order/mylist"})},homePath:function(){var i=localStorage.getItem("roomid");1==this.DEBUG?this.$router.replace({path:"/room",query:{room_id:i,from:"groupmessage",isappinstalled:0}}):window.location.href=location.protocol+"//"+document.domain+"/front/#/room?room_id="+i},getOrderList:function(){var i=this;if(!i.order_id)return this.$vux.alert.show({title:"温馨提示",content:"无效订单号"}),!1;var e=new URLSearchParams;e.append("order_id",i.order_id),i.axiosPost("/client/orders",e).then(function(e){i.orders=e.data[0],i.tel=i.orders.mobile?"tel:"+i.orders.mobile:""},function(i){console.log(i)})}}},Vi=function(){var i=this,e=i.$createElement,t=i._self._c||e;return t("div",{staticClass:"order"},[t("div",{staticClass:"orderHead"},[t("div",{staticClass:"orderTabMenu"},[t("a",{attrs:{href:"javascript:void(0);"}},[i._v("我的订单")]),i._v(" "),t("a",{attrs:{href:i.tel}},[i._v("联系园主")])]),i._v(" "),t("div",{staticClass:"paySuccess"},[t("h1",[i._v("订单支付成功")]),i._v(" "),t("p",[i._v("感性您对我们的支持，期待再次光临。")]),i._v(" "),t("a",{on:{click:i.homePath}},[i._v("返回主页")]),i._v(" "),t("a",{on:{click:i.myOrderListPath}},[i._v("订单列表")])])]),i._v(" "),t("div",{staticClass:"orderList"},[t("div",{staticClass:"tit"},[i._v(i._s(i.orders.room_name))]),i._v(" "),i._l(i.orders.list,function(e){return t("dl",[t("dt",[t("img",{attrs:{src:e.cover_img}})]),i._v(" "),t("dd",[t("h3",[i._v(i._s(e.title)),t("span",[i._v("¥"+i._s(e.price)+" × "+i._s(e.num))])]),i._v(" "),t("p",[i._v(i._s(e.title))])])])}),i._v(" "),t("div",{staticClass:"total"},[t("p",[i._v("配送费¥"+i._s(i.orders.deliver_money)),t("span",[i._v(i._s(i.orders.express_name))])]),i._v(" "),t("p",[i._v("已优惠"+i._s(i.orders.discount_money)),t("span",[i._v("小计")]),t("span",[i._v("¥"+i._s(i.orders.total_money))])])]),i._v(" "),t("div",{staticClass:"total orderInfo"},[t("p",[i._v("订单信息")]),i._v(" "),t("ul",[t("li",[i._v("订单号码"),t("span",[i._v(i._s(i.orders.order_id))])]),i._v(" "),t("li",[i._v("下单时间"),t("span",[i._v(i._s(i.orders.create_time))])]),i._v(" "),t("li",[i._v("配送地址"),t("span",[i._v(i._s(i.orders.user_name)+" "+i._s(i.orders.user_phone)),t("br"),i._v(i._s(i.orders.user_address))])])])])],2)])},Ai=[],Fi={render:Vi,staticRenderFns:Ai},ji=Fi,Ti=t("C7Lr"),Ei=Ti(Oi,ji,!1,null,null,null),Ri=Ei.exports,Di=t("0qtm"),Ui={name:"auth",created:function(){this.login()},methods:{login:function(){console.log("auth");var i=this,e="https://yc.adaxiang.com/rest/v1/wechat/auth-login",t=window.location.href.split("#")[0],s="";null!=Di.a.get("refer")&&(s=t+"#"+Di.a.get("refer"),s=encodeURIComponent(s)),e+="?refer="+s;var a=Di.a.get("uid");a?(localStorage.setItem("uid",a),localStorage.setItem("uname",Di.a.get("uname")),localStorage.setItem("uimg",Di.a.get("uimg")),refer_url=Di.a.get("refer")?Di.a.get("refer"):"front/",i.$router.replace({path:refer_url})):location.href=e}}},Hi=function(){var i=this,e=i.$createElement;return(i._self._c||e)("div")},Ji=[],Ni={render:Hi,staticRenderFns:Ji},qi=Ni,Wi=t("C7Lr"),Zi=r,Gi=Wi(Ui,qi,!1,Zi,"data-v-489aa794",null),Ki=Gi.exports,zi={name:"tea"},Qi=function(){var i=this,e=i.$createElement;return(i._self._c||e)("div",[i._v("\n  茶园\n")])},Yi=[],Xi={render:Qi,staticRenderFns:Yi},ie=Xi,ee=t("C7Lr"),te=l,se=ee(zi,ie,!1,te,"data-v-40d1db21",null),ae=se.exports;N.a.component("remote-script",{render:function(i){var e=this;return i("script",{attrs:{type:"text/javascript",src:this.src},on:{load:function(i){e.$emit("load",i)},error:function(i){e.$emit("error",i)},readystatechange:function(i){"complete"==this.readyState&&e.$emit("load",i)}}})},props:{src:{type:String,required:!0}}});var oe={name:"room-video",props:["room_id"],data:function(){return{openid:"",subStatus:!1,videoList:[],player:{},video_height:0,aliplayer_config:{id:"",width:"100%",height:"195px",autoplay:!0,playsinline:!0,showBuffer:!0,isLive:!1,x5_type:!0,source:"http://aliplay.adaxiang.com/kr/wc001.m3u8",cover:"",skinLayout:[{name:"bigPlayButton",align:"cc",x:30,y:80},{name:"H5Loading",align:"cc"},{name:"tooltip",align:"blabs",x:0,y:56},{name:"thumbnail"},{name:"controlBar",align:"blabs",x:0,y:0,children:[{name:"liveDisplay",align:"tlabs",x:15,y:6},{name:"progress",align:"blabs",x:0,y:44},{name:"playButton",align:"tl",x:15,y:12},{name:"timeDisplay",align:"tl",x:10,y:7},{name:"fullScreenButton",align:"tr",x:10,y:12},{name:"volume",align:"tr",x:5,y:10}]}]}}},created:function(){var i=document.body.clientWidth-30,e=9*i/16;this.video_height=e+"px",this.aliplayer_config.height=this.video_height,this.openid=localStorage.getItem("openid"),this.getData()},mounted:function(){},methods:{getData:function(){var i=this;i.$vux.loading.show({text:"加载中~"});var e=new URLSearchParams;i.axiosPost("/room/videos?id="+this.room_id,e).then(function(e){if(i.$vux.loading.hide(),200==e.status){if(i.videoList=e.data.videos,i.videoList.length>0)for(var t=0;t<i.videoList.length;t++)i.videoList[t].status=1,i.videoList[t].vno="J_prismPlayer"+(t+1),i.aliplayer_config.source=i.videoList[t].vurl,i.aliplayer_config.id="J_prismPlayer"+(t+1)}else i.$vux.alert.show({title:"温馨提示",content:e.message})},function(e){i.$vux.loading.hide()})},playervideo:function(i,e,t){this.$parent.stopMUisc(),t.status=0,this.player.length>0&&this.player.dispose();var s=this;s.aliplayer_config.source=e,s.aliplayer_config.id=i,this.player=new Aliplayer(s.aliplayer_config),this.clickNum(t)},clickNum:function(i){var e=this;if(i.click++,e.subStatus)return!1;var t=new URLSearchParams;t.append("cid",i.id),t.append("ctype","video"),e.subStatus=!0,e.axiosPost("/room/click-num",t).then(function(i){e.subStatus=!1,200==i.status||e.$vux.alert.show({title:"温馨提示",content:i.message})},function(i){e.subStatus=!1})},videoStart:function(i){if(!localStorage.getItem("uid"))return this.$vux.alert.show({title:"温馨提示",content:"请先登录"}),this.$router.replace({path:"/auth"}),!1;var e=this;if(e.subStatus)return!1;i.start=1==i.start?0:1,e.subStatus=!0;var t=new URLSearchParams;t.append("id",i.id),t.append("stype",1),e.axiosPost("/client/user-start",t).then(function(i){e.subStatus=!1,200==i.status||e.$vux.alert.show({title:"温馨提示",content:i.message})},function(i){e.subStatus=!1})}}},ne=function(){var i=this,e=i.$createElement,t=i._self._c||e;return t("div",i._l(i.videoList,function(e){return t("div",{ref:"videoStyle",refInFor:!0,staticClass:"video_info"},[t("dl",[t("dt",{staticClass:"video_title"},[t("div",{staticClass:"video_item"},[t("div",{staticClass:"prism-player-video",style:{display:1==e.status?"none":"block"},attrs:{id:e.vno},on:{click:function(t){return i.clickNum(e)}}})]),i._v(" "),1==e.status?t("img",{attrs:{src:e.pic},on:{click:function(t){return i.playervideo(e.vno,e.vurl,e)}}}):i._e()]),i._v(" "),t("dd",[t("h3",[i._v(i._s(e.name))]),i._v(" "),t("p",[t("span",[i._v("片长："+i._s(e.vlength)+" 热度："+i._s(e.click))]),i._v(" "),t("span",[t("a",{class:[e.start?"zanIcon2":"zanIcon"],attrs:{href:"javascript:void(0);"},on:{click:function(t){return i.videoStart(e)}}},[i._v("赞")])])])])])])}),0)},re=[],le={render:ne,staticRenderFns:re},ce=le,de=t("C7Lr"),ue=c,me=de(oe,ce,!1,ue,"data-v-775a77f4",null),ve=me.exports,pe={name:"product",props:["room_id"],data:function(){return{openid:"",productList:[],totalPrice:0}},created:function(){this.openid=localStorage.getItem("openid"),this.getData()},methods:{getData:function(){var i=this,e=this;e.$vux.loading.show({text:"加载中~"});var t=new URLSearchParams;e.axiosPost("/product/room?id="+this.room_id,t).then(function(t){e.$vux.loading.hide(),200==t.status?e.productList=t.data:i.$vux.alert.show({title:"温馨提示",content:t.message})},function(i){e.$vux.loading.hide()})},changeNum:function(i,e){1==i?--e.buy_num<0&&(e.buy_num=0):e.buy_num++;var t=0;this.totalPrice=0;for(var s=0;s<this.productList.length;s++)(t+=this.productList[s].buy_num*this.productList[s].price)&&(this.totalPrice=t.toFixed(2));this.$emit("buy_price",this.totalPrice)},buy_product:function(i,e,t,s){for(var a=[],o=0,n=0;n<this.productList.length;n++)this.productList[n].buy_num>0&&(o+=this.productList[n].buy_num*this.productList[n].price,a.push(this.productList[n]));if(o=o.toFixed(2),!(a.length>0))return this.$vux.alert.show({title:"温馨提示",content:"请选择需要购买的商品"}),!1;var r={room_id:i,room_name:e,room_logo:t,room_tel:s};localStorage.setItem("buy_room",ai()(r)),localStorage.setItem("buy_total",o),localStorage.setItem("buy_product",ai()(a)),this.$router.replace({path:"/order",query:{room_id:i}})}}},he=function(){var i=this,e=i.$createElement,t=i._self._c||e;return t("div",{staticClass:"shopList"},[t("div",{staticClass:"product-list"},i._l(i.productList,function(e){return t("dl",[t("dt",[t("img",{attrs:{src:e.pic}})]),i._v(" "),t("dd",[t("h3",[i._v(i._s(e.title))]),i._v(" "),t("p",[i._v(i._s(e.desc))]),i._v(" "),t("span",{staticClass:"money"},[i._v("¥"+i._s(e.price))]),i._v(" "),t("span",{staticClass:"num"},[t("a",{attrs:{href:"javascript:void(0);"},on:{click:function(t){return i.changeNum(1,e)}}},[i._v("-")]),i._v(" "),t("i",[i._v(i._s(e.buy_num))]),i._v(" "),t("a",{attrs:{href:"javascript:void(0);"},on:{click:function(t){return i.changeNum(2,e)}}},[i._v("+")])])])])}),0)])},_e=[],ge={render:he,staticRenderFns:_e},fe=ge,ye=t("C7Lr"),Ce=d,we=ye(pe,fe,!1,Ce,"data-v-178e2ae8",null),be=we.exports,xe={name:"comment",inject:["reload"],props:["room_id"],data:function(){return{commentList:[],total:0,roomid:0,openid:""}},created:function(){this.openid=localStorage.getItem("openid"),this.getData()},methods:{getData:function(){var i=this,e=this,t=new URLSearchParams;t.append("id",e.room_id),e.axiosPost("/room/comments",t).then(function(t){e.$vux.loading.hide(),200==t.status?t.data.length>0&&(e.commentList=t.data,e.total=t.data.length):i.$vux.alert.show({title:"温馨提示",content:t.message})},function(i){e.$vux.loading.hide()})},setStart:function(i){var e=this;if(e.subStatus)return!1;i.start=1==i.start?0:1,e.subStatus=!0;var t=new URLSearchParams;t.append("id",i.id),t.append("stype",2),e.axiosPost("/client/user-start",t).then(function(i){e.subStatus=!1,200==i.status||e.$vux.alert.show({title:"温馨提示",content:i.message})},function(i){e.subStatus=!1})},setComment:function(i){if(!Di.a.get("uid"))return this.$vux.alert.show({title:"温馨提示",content:"请先登录"}),Di.a.set("refer","/room?room_id="+this.room_id,{path:"/",expires:7200}),this.$router.replace({path:"/auth"}),!1;if(!(i=i.replace(/\s+/g,"")))return this.$vux.alert.show({title:"温馨提示",content:"请填写评论内容"}),!1;var e=this,t=new URLSearchParams;t.append("content",i),t.append("id",e.room_id),e.axiosPost("/client/comment",t).then(function(t){e.$vux.loading.hide(),200==t.status?(i="",e.$emit("clearComment",""),e.getData()):e.$vux.alert.show({title:"温馨提示",content:t.message})},function(i){e.$vux.loading.hide()})}}},Be=function(){var i=this,e=i.$createElement,t=i._self._c||e;return t("div",{staticClass:"comments"},[t("h3",{staticClass:"tit"},[i._v("全部评论("+i._s(i.total)+")")]),i._v(" "),t("div",{staticClass:"messList"},i._l(i.commentList,function(e,s){return t("dl",[t("dt",[t("span",{style:{backgroundImage:"url("+e.thumb_img+")"}}),i._v(i._s(e.nickname)+"\n            ")]),i._v(" "),t("dd",[t("p",[i._v(i._s(e.content))]),i._v(" "),t("p",[t("span",[i._v("第"+i._s(i.commentList.length-s)+"楼 "+i._s(e.date))]),i._v(" "),t("span",[t("a",{class:[e.start?"zanIcon2":"zanIcon"],attrs:{href:"javascript:void(0);"},on:{click:function(t){return i.setStart(e)}}},[i._v("赞")])])])])])}),0)])},$e=[],Se={render:Be,staticRenderFns:$e},ke=Se,Me=t("C7Lr"),Pe=u,Le=Me(xe,ke,!1,Pe,"data-v-cfece14a",null),Ie=Le.exports,Oe={name:"educate",components:{"room-video":ve,Product:be,Comments:Ie},data:function(){return{bannerList:[],contabObj:{},contentSwiper:{},currentVideo:{},playing:2,playinit:2,VideoCoverImg:"",showCover:!1,galleryTop:{},play_status:1,room_id:0,room_info:{},lens:{},player:{},player2:{},aliplayer_config:{id:"J_prismPlayer",width:"100%",height:"240px",autoplay:!1,playsinline:!0,showBuffer:!0,isLive:!0,x5_type:!0,source:"",cover:"",rePlay:!1,preload:!1,skinLayout:[{name:"bigPlayButton",align:"cc",x:30,y:80},{name:"H5Loading",align:"cc"},{name:"tooltip",align:"blabs",x:0,y:56},{name:"thumbnail"},{name:"controlBar",align:"blabs",x:0,y:0,children:[{name:"liveDisplay",align:"tlabs",x:15,y:6},{name:"progress",align:"blabs",x:0,y:44},{name:"playButton",align:"tl",x:15,y:12},{name:"timeDisplay",align:"tl",x:10,y:7},{name:"fullScreenButton",align:"tr",x:10,y:12},{name:"volume",align:"tr",x:5,y:10}]}]},roomBasic:{room_name:"",start_num:"",title:"",sub_title:"",intro:"",click_num:"",introduce:"",content:"",cover_img:"",coordinate:"",addr_url:"",addr:"",logo_img:"",online_url:"",online_cover:"",mobile:""},videoList:[]}},provide:function(){return{reload:this.reload}},created:function(){this.room_id=this.$route.query.room_id>0?this.$route.query.room_id:0,this.getVideoList(),this.getBanner(),this.getData(),this.getLens(),this.WxShare(),localStorage.setItem("roomid",this.room_id)},mounted:function(){var i=this;$(".prism-big-play-btn").click(function(){$(".videoCover").fadeOut()}),setTimeout(i.initSwiper,1e3);var e=$(".prism-player").width();$(".prism-player").height(e/16*9),$("#J_prismPlayer").click(function(){i.playinit=2,i.checkVideoPlayer(i.currentVideo)}),navigator.userAgent.match(/(phone|pad|pod|iPhone|iPod|ios|iPad|Android|Mobile|BlackBerry|IEMobile|MQQBrowser|JUC|Fennec|wOSBrowser|BrowserNG|WebOS|Symbian|Windows Phone)/i)&&(i.playinit=1),this.player2.length>0&&this.player2.on("pause",function(){this.player2.dispose()})},watch:{$route:function(){}},methods:{getBanner:function(){var i=this,e=new URLSearchParams;e.append("id",this.room_id),i.axiosPost("/room/banner",e).then(function(e){i.bannerList=e.data.banner})},showMoreInfo:function(i){$(i).hasClass("hide")?$(i).removeClass("hide"):$(i).addClass("hide")},initSwiper:function(){var i=this,e=(new Swiper(".room-banner",{loop:!0,pagination:{el:".swiper-pagination",type:"bullets",bulletActiveClass:"live-banner-active"},autoplay:{delay:3e3,stopOnLastSlide:!1,disableOnInteraction:!0}}),new Swiper(".gallery-thumbs",{spaceBetween:10,slidesPerView:4,freeMode:!0,watchSlidesVisibility:!0,watchSlidesProgress:!0}));i.galleryTop=new Swiper(".gallery-top",{autoHeight:!0,spaceBetween:10,observer:!0,navigation:{nextEl:".swiper-button-next",prevEl:".swiper-button-prev"},thumbs:{swiper:e},on:{slideChangeTransitionStart:function(){i.switchContent(this.activeIndex)}}})},switchVideo:function(i,e){this.playinit=2,clearTimeout(this.contabObj),$(".videoCover").fadeOut(),this.player.dispose(),this.VideoCoverImg="",$("#J_prismPlayer").empty(),this.play_status=1;var t=this;-1!=i.vurl.indexOf(".m3u8")?(t.aliplayer_config.isLive=!0,t.aliplayer_config.autoplay=!1,t.aliplayer_config.rePlay=!1,t.play_status=1):(t.aliplayer_config.isLive=!1,t.aliplayer_config.autoplay=!0,t.aliplayer_config.rePlay=!0,t.play_status=2),t.VideoCoverImg=i.cover_img,t.aliplayer_config.cover=i.pic,t.aliplayer_config.source=i.vurl,2==e&&(t.play_status=2,t.aliplayer_config.autoplay=!1,t.aliplayer_config.cover=i.reback_img,t.aliplayer_config.source=i.vurl_reback),t.currentVideo=i,t.aliplayer_config.id="J_prismPlayer",t.player=new Aliplayer(t.aliplayer_config)},switchContent:function(i){switch(i){case 0:$(".shoppingCarBox").hide(),$(".sendMessMenu").hide();break;case 1:$(".shoppingCarBox").fadeIn(),$(".sendMessMenu").hide();break;case 2:$(".sendMessMenu").fadeIn(),$(".shoppingCarBox").hide();break;case 3:$(".shoppingCarBox").hide(),$(".sendMessMenu").hide()}},getData:function(){var i=this,e=new URLSearchParams;i.axiosPost("/room/info?id="+this.room_id,e).then(function(e){i.roomBasic.room_name=e.data.room_name,i.roomBasic.logo_img=e.data.logo_img,i.roomBasic.click_num=e.data.click_num,i.roomBasic.addr_url=e.data.addr_url,i.roomBasic.addr=e.data.addr,i.roomBasic.coordinate=e.data.coordinate,i.roomBasic.cover_img=e.data.cover_img,i.roomBasic.introduce=e.data.introduce,i.roomBasic.content=e.data.content,i.roomBasic.logo_pic=e.data.logo_img,i.roomBasic.title=e.data.title,i.roomBasic.sub_title=e.data.sub_title,i.roomBasic.intro=e.data.intro,i.roomBasic.start_num=e.data.start_num,i.roomBasic.online_url=e.data.online_url,i.roomBasic.online_cover=e.data.online_cover,i.roomBasic.mobile=e.data.mobile,i.$route.meta.title=e.data.room_name,i.deliver=e.data.deliver,i.roomBasic.cover_img&&(i.showCover=!0),i.$nextTick(function(){})},function(i){console.log(i)})},getLens:function(){var i=this,e=this,t=new URLSearchParams;e.axiosPost("/room/lens?id="+this.room_id,t).then(function(t){e.$vux.loading.hide(),200==t.status?(e.lens=t.data,-1!=e.lens[0].vurl.indexOf(".m3u8")?(e.aliplayer_config.isLive=!0,e.aliplayer_config.autoplay=!1,e.aliplayer_config.rePlay=!1,e.play_status=1):(e.aliplayer_config.isLive=!1,e.aliplayer_config.autoplay=!0,e.aliplayer_config.rePlay=!0,e.play_status=2),e.VideoCoverImg=e.lens[0].cover_img,e.aliplayer_config.source=e.lens[0].vurl,e.aliplayer_config.cover=e.lens[0].pic,e.aliplayer_config.id="J_prismPlayer",e.player=new Aliplayer(e.aliplayer_config),e.currentVideo=e.lens[0]):i.$vux.alert.show({title:"温馨提示",content:t.message})},function(i){e.$vux.loading.hide()})},clearParent:function(){this.comment=""},reload:function(){this.showComment=!1,this.$nextTick(function(){this.showComment=!0})},checkVideoPlayer:function(i){var e=this;e.contabObj=setTimeout(function(){var t=e.player.getCurrentTime();e.aliplayer_config.isLive&&t<=0&&e.switchVideo(i,2)},3e3)},imgCover:function(){this.playing=1,$(".videoCover").css("z-index","-1 !important")},hideCoverImg:function(){this.roomBasic.cover_img&&this.showCover&&(this.showCover=!1)},getVideoList:function(){var i=this;i.$vux.loading.show({text:"加载中~"});var e=new URLSearchParams;i.axiosPost("/room/videos?id="+this.room_id,e).then(function(e){if(i.$vux.loading.hide(),200==e.status){if(i.videoList=e.data.videos,i.videoList.length>0)for(var t=0;t<i.videoList.length;t++)i.videoList[t].status=1,i.videoList[t].vno="J_prismPlayer"+(t+1),i.aliplayer_config.source=i.videoList[t].vurl,i.aliplayer_config.id="J_prismPlayer"+(t+1)}else i.$vux.alert.show({title:"温馨提示",content:e.message})},function(e){i.$vux.loading.hide()})},playervideo:function(i,e,t){var s=document.body.clientWidth-30,a=9*s/16;this.video_height=a+"px",this.aliplayer_config.autoplay=!0,this.aliplayer_config.height=this.video_height,t.status=0,this.player2.length>0&&this.player2.dispose();var o=this;o.aliplayer_config.source=e,o.aliplayer_config.id=i,o.aliplayer_config.isLive=!1,o.aliplayer_config.useH5Prism=!0,this.player2=new Aliplayer(o.aliplayer_config),this.clickNum(t)},clickNum:function(i){var e=this;if(i.click++,e.subStatus)return!1;var t=new URLSearchParams;t.append("cid",i.id),t.append("ctype","video"),e.subStatus=!0,e.axiosPost("/room/click-num",t).then(function(i){e.subStatus=!1,200==i.status||e.$vux.alert.show({title:"温馨提示",content:i.message})},function(i){e.subStatus=!1})},videoStart:function(i){var e=this;if(e.subStatus)return!1;i.start=1==i.start?0:1,e.subStatus=!0;var t=new URLSearchParams;t.append("id",i.id),t.append("stype",1),e.axiosPost("/client/user-start",t).then(function(i){e.subStatus=!1,200==i.status||e.$vux.alert.show({title:"温馨提示",content:i.message})},function(i){e.subStatus=!1})},golinks:function(i){i.links&&window.location.replace(i.links)},WxShare:function(){var i=this,e=window.location.href,t=this,s=new URLSearchParams;s.append("open_id",this.openid),s.append("url",e),s.append("apis","chooseWXPay,onMenuShareTimeline,onMenuShareAppMessage,hideMenuItems"),t.axiosPost("/wechat/jssdk",s).then(function(e){t.$vux.loading.hide(),200==e.status?(t.$wechat.config(JSON.parse(e.data)),console.log(t.$wechat),t.$wechat.ready(function(){var i=location.protocol+"//"+document.domain+"/front/#/room?room_id="+t.room_id;t.$wechat.onMenuShareAppMessage({title:t.roomBasic.title+" "+t.roomBasic.sub_title,desc:t.roomBasic.introduce,link:i,imgUrl:t.roomBasic.logo_img,success:function(){},cancel:function(){}}),t.$wechat.onMenuShareTimeline({title:t.roomBasic.title+" "+t.roomBasic.sub_title,link:i,imgUrl:t.roomBasic.logo_img,success:function(){},cancel:function(){}}),t.$wechat.hideMenuItems({menuList:["menuItem:share:appMessage","menuItem:copyUrl","menuItem:share:timeline","menuItem:share:qq","menuItem:favorite","menuItem:share:QZone","menuItem:openWithSafari"]})})):i.$vux.alert.show({title:"温馨提示",content:"微信参数错误"})},function(i){t.$vux.loading.hide()})}}},Ve=function(){var i=this,e=i.$createElement,t=i._self._c||e;return t("div",{directives:[{name:"wechat-title",rawName:"v-wechat-title",value:i.$route.meta.title,expression:"$route.meta.title"}],staticClass:"room-info"},[t("div",{staticClass:"room-header"},[t("div",{staticClass:"wiper-container room-banner"},[t("div",{staticClass:"swiper-wrapper"},i._l(i.bannerList,function(e,s){return t("div",{key:s,staticClass:"swiper-slide"},[t("img",{attrs:{src:e.cover},on:{click:[function(t){return i.golinks(e)},function(i){i.stopPropagation()}]}})])}),0),i._v(" "),t("div",{staticClass:"swiper-pagination"})])]),i._v(" "),t("div",{staticClass:"live-room-main"},[t("div",{staticClass:"swiper-container gallery-thumbs"},[t("div",{staticClass:"swiper-wrapper tabMenu"},[t("div",{staticClass:"swiper-slide cur",on:{click:function(e){return i.switchContent(0)}}},[i._v("班级直播")]),i._v(" "),t("div",{staticClass:"swiper-slide",on:{click:function(e){return i.switchContent(1)}}},[i._v("班级视频")]),i._v(" "),t("div",{staticClass:"swiper-slide",on:{click:function(e){return i.switchContent(2)}}},[i._v("家庭视频")])])]),i._v(" "),t("div",{staticClass:"live-room-content"},[t("div",{staticClass:"swiper-container gallery-top"},[t("div",{staticClass:"swiper-wrapper tabCon"},[t("div",{staticClass:"swiper-slide con"},[t("div",{staticClass:"swiper-slide slidescroll room-detail-info"},[t("h2",{staticClass:"tit videoIcon"},[i._v("直播")]),i._v(" "),t("div",{staticClass:"lens-list"},[t("div",{staticClass:"videoList"},[t("div",{staticClass:"video",on:{click:i.imgCover}},[t("div",{staticClass:"prism-player ",attrs:{id:"J_prismPlayer"}}),i._v(" "),t("div",{class:1==i.play_status&&1!=i.playing||1==i.playinit?"videoCover online_video":"videoCover outline_video"},[t("img",{attrs:{src:i.VideoCoverImg}})])]),i._v(" "),i._l(i.lens,function(e){return t("dl",{staticClass:"live-1",on:{click:function(t){return i.switchVideo(e,1)}}},[t("dt",[t("img",{attrs:{src:e.cover_img}})]),i._v(" "),t("dd",[i._v(i._s(e.name))])])})],2)]),i._v(" "),t("div",{staticClass:"room_content",domProps:{innerHTML:i._s(i.roomBasic.content)}},[i._v("\n                "+i._s(i.roomBasic.content)+"\n              ")])])]),i._v(" "),t("div",{staticClass:"swiper-slide con"},[t("div",{staticClass:"swiper-slide slidescroll room-video-list"},[t("h2",{staticClass:"tit videoIcon"},[i._v("短视频")]),i._v(" "),t("div",{staticClass:"filmList"},i._l(i.videoList,function(e){return e.sort_num<=100?t("div",{ref:"videoStyle",refInFor:!0,staticClass:"video_info"},[t("dl",[t("dt",{staticClass:"video_title"},[t("div",{staticClass:"video_item"},[t("div",{staticClass:"prism-player-video",style:{display:1==e.status?"none":"block"},attrs:{id:e.vno},on:{click:function(t){return i.clickNum(e)}}})]),i._v(" "),1==e.status?t("img",{attrs:{src:e.pic},on:{click:function(t){return i.playervideo(e.vno,e.vurl,e)}}}):i._e(),i._v(" "),1==e.status?t("div",{staticClass:"play-btn",on:{click:function(t){return i.playervideo(e.vno,e.vurl,e)}}}):i._e()]),i._v(" "),t("dd",[t("h3",[i._v(i._s(e.name))]),i._v(" "),t("p",[t("span",[i._v("片长："+i._s(e.vlength)+" 热度："+i._s(e.click))]),i._v(" "),t("span",[t("a",{class:[e.start?"zanIcon2":"zanIcon"],attrs:{href:"javascript:void(0);"}},[i._v("精选")])])])])])]):i._e()}),0)])]),i._v(" "),t("div",{staticClass:"swiper-slide con"},[t("div",{staticClass:"swiper-slide slidescroll room-video-list"},[t("h2",{staticClass:"tit videoIcon"},[i._v("短视频")]),i._v(" "),t("div",{staticClass:"filmList"},i._l(i.videoList,function(e){return e.sort_num>100?t("div",{ref:"videoStyle",refInFor:!0,staticClass:"video_info"},[t("dl",[t("dt",{staticClass:"video_title"},[t("div",{staticClass:"video_item"},[t("div",{staticClass:"prism-player-video",style:{display:1==e.status?"none":"block"},attrs:{id:e.vno},on:{click:function(t){return i.clickNum(e)}}})]),i._v(" "),1==e.status?t("img",{attrs:{src:e.pic},on:{click:function(t){return i.playervideo(e.vno,e.vurl,e)}}}):i._e(),i._v(" "),1==e.status?t("div",{staticClass:"play-btn",on:{click:function(t){return i.playervideo(e.vno,e.vurl,e)}}}):i._e()]),i._v(" "),t("dd",[t("h3",[i._v(i._s(e.name))]),i._v(" "),t("p",[t("span",[i._v("片长："+i._s(e.vlength)+" 热度："+i._s(e.click))]),i._v(" "),t("span",[t("a",{class:[e.start?"zanIcon2":"zanIcon"],attrs:{href:"javascript:void(0);"}},[i._v("精选")])])])])])]):i._e()}),0)])])])])])]),i._v(" "),i.showCover?t("div",{staticClass:"liveHome",on:{click:i.hideCoverImg}},[t("img",{attrs:{src:i.roomBasic.cover_img}})]):i._e(),i._v(" "),t("remote-script",{attrs:{src:"https://g.alicdn.com/de/prismplayer/2.8.1/aliplayer-min.js"}})],1)},Ae=[],Fe={render:Ve,staticRenderFns:Ae},je=Fe,Te=t("C7Lr"),Ee=m,Re=Te(Oe,je,!1,Ee,"data-v-cdd51522",null),De=Re.exports,Ue={name:"live-old",components:{"room-video":ve,Product:be,Comments:Ie},data:function(){return{contabObj:{},contentSwiper:{},currentVideo:{},playing:2,playinit:2,VideoCoverImg:"",showCover:!1,galleryTop:{},play_status:1,room_id:0,room_info:{},showComment:!0,comment:"",total_price:0,lens:{},player:{},deliver:0,aliplayer_config:{id:"J_prismPlayer",width:"100%",height:"240px",autoplay:!1,playsinline:!0,showBuffer:!0,isLive:!0,x5_type:"h5",source:"",cover:"",rePlay:!1,preload:!1,skinLayout:[{name:"bigPlayButton",align:"cc",x:30,y:80},{name:"H5Loading",align:"cc"},{name:"tooltip",align:"blabs",x:0,y:56},{name:"thumbnail"},{name:"controlBar",align:"blabs",x:0,y:0,children:[{name:"liveDisplay",align:"tlabs",x:15,y:6},{name:"progress",align:"blabs",x:0,y:44},{name:"playButton",align:"tl",x:15,y:12},{name:"timeDisplay",align:"tl",x:10,y:7},{name:"fullScreenButton",align:"tr",x:10,y:12},{name:"volume",align:"tr",x:5,y:10}]}]},roomBasic:{room_name:"",start_num:"",title:"",sub_title:"",intro:"",click_num:"",introduce:"",content:"",cover_img:"",coordinate:"",addr_url:"",addr:"",logo_img:"",online_url:"",online_cover:"",mobile:""}}},provide:function(){return{reload:this.reload}},created:function(){this.room_id=this.$route.query.room_id>0?this.$route.query.room_id:9,this.getData(),this.getLens(),localStorage.setItem("roomid",this.room_id)},mounted:function(){var i=this;$(".prism-big-play-btn").click(function(){$(".videoCover").fadeOut()}),setTimeout(i.initSwiper,1e3);var e=$(".prism-player").width();$(".prism-player").height(e/16*9),$("#J_prismPlayer").click(function(){i.playinit=2,i.checkVideoPlayer(i.currentVideo)}),$(".company .remarks p").click(function(){$(this).hasClass("hide")?$(this).removeClass("hide"):$(this).addClass("hide")}),navigator.userAgent.match(/(phone|pad|pod|iPhone|iPod|ios|iPad|Android|Mobile|BlackBerry|IEMobile|MQQBrowser|JUC|Fennec|wOSBrowser|BrowserNG|WebOS|Symbian|Windows Phone)/i)&&(i.playinit=1)},watch:{$route:function(){}},methods:{showMoreInfo:function(i){$(i).hasClass("hide")?$(i).removeClass("hide"):$(i).addClass("hide")},initSwiper:function(){var i=this,e=new Swiper(".gallery-thumbs",{spaceBetween:10,slidesPerView:4,freeMode:!0,watchSlidesVisibility:!0,watchSlidesProgress:!0});i.galleryTop=new Swiper(".gallery-top",{autoHeight:!0,spaceBetween:10,observer:!0,navigation:{nextEl:".swiper-button-next",prevEl:".swiper-button-prev"},thumbs:{swiper:e},on:{slideChangeTransitionStart:function(){i.switchContent(this.activeIndex)}}})},switchVideo:function(i,e){this.playinit=2,clearTimeout(this.contabObj),$(".videoCover").fadeOut(),this.player.dispose(),this.VideoCoverImg="",$("#J_prismPlayer").empty(),this.play_status=1;var t=this;-1!=i.vurl.indexOf(".m3u8")?(t.aliplayer_config.isLive=!0,t.aliplayer_config.autoplay=!1,t.aliplayer_config.rePlay=!1,t.play_status=1):(t.aliplayer_config.isLive=!1,t.aliplayer_config.autoplay=!0,t.aliplayer_config.rePlay=!0,t.play_status=2),t.VideoCoverImg=i.cover_img,t.aliplayer_config.cover=i.pic,t.aliplayer_config.source=i.vurl,2==e&&(t.play_status=2,t.aliplayer_config.autoplay=!1,t.aliplayer_config.cover=i.reback_img,t.aliplayer_config.source=i.vurl_reback),t.currentVideo=i,t.player=new Aliplayer(t.aliplayer_config)},switchContent:function(i){switch(i){case 0:$(".shoppingCarBox").hide(),$(".sendMessMenu").hide();break;case 1:$(".shoppingCarBox").fadeIn(),$(".sendMessMenu").hide();break;case 2:$(".sendMessMenu").fadeIn(),$(".shoppingCarBox").hide();break;case 3:$(".shoppingCarBox").hide(),$(".sendMessMenu").hide()}},getData:function(){var i=this,e=new URLSearchParams;i.axiosPost("/room/info?id="+this.room_id,e).then(function(e){i.roomBasic.room_name=e.data.room_name,i.roomBasic.logo_img=e.data.logo_img,i.roomBasic.click_num=e.data.click_num,i.roomBasic.addr_url=e.data.addr_url,i.roomBasic.addr=e.data.addr,i.roomBasic.coordinate=e.data.coordinate,i.roomBasic.cover_img=e.data.cover_img,i.roomBasic.introduce=e.data.introduce,i.roomBasic.content=e.data.content,i.roomBasic.logo_pic=e.data.logo_img,i.roomBasic.title=e.data.title,i.roomBasic.sub_title=e.data.sub_title,i.roomBasic.intro=e.data.intro,i.roomBasic.start_num=e.data.start_num,i.roomBasic.online_url=e.data.online_url,i.roomBasic.online_cover=e.data.online_cover,i.roomBasic.mobile=e.data.mobile,i.$route.meta.title=e.data.room_name,i.deliver=e.data.deliver,i.roomBasic.cover_img&&(i.showCover=!0),i.WxShare(),i.$nextTick(function(){})},function(i){console.log(i)})},getLens:function(){var i=this,e=this,t=new URLSearchParams;e.axiosPost("/room/lens?id="+this.room_id,t).then(function(t){e.$vux.loading.hide(),200==t.status?(e.lens=t.data,-1!=e.lens[0].vurl.indexOf(".m3u8")?(e.aliplayer_config.isLive=!0,e.aliplayer_config.autoplay=!1,e.aliplayer_config.rePlay=!1,e.play_status=1):(e.aliplayer_config.isLive=!1,e.aliplayer_config.autoplay=!0,e.aliplayer_config.rePlay=!0,e.play_status=2),e.VideoCoverImg=e.lens[0].cover_img,e.aliplayer_config.source=e.lens[0].vurl,e.aliplayer_config.cover=e.lens[0].pic,e.player=new Aliplayer(e.aliplayer_config),e.currentVideo=e.lens[0]):i.$vux.alert.show({title:"温馨提示",content:t.message})},function(i){e.$vux.loading.hide()})},countPrice:function(i){this.total_price=i},tobuy:function(){var i=this;if(i.deliver>0&&parseInt(i.total_price)<parseInt(i.deliver))return this.$vux.alert.show({title:"温馨提示",content:"满"+i.deliver+"元起送，基地包邮到家"}),!1;this.$refs.product.buy_product(i.roomBasic.id,i.roomBasic.room_name,i.roomBasic.logo_pic,i.roomBasic.mobile)},subComment:function(){this.$refs.comment.setComment(this.comment)},clearParent:function(){this.comment=""},reload:function(){this.showComment=!1,this.$nextTick(function(){this.showComment=!0})},checkVideoPlayer:function(i){var e=this;e.contabObj=setTimeout(function(){var t=e.player.getCurrentTime();e.aliplayer_config.isLive&&t<=0&&e.switchVideo(i,2)},3e3)},imgCover:function(){this.playing=1,$(".videoCover").css("z-index","-1 !important")},hideCoverImg:function(){this.roomBasic.cover_img&&this.showCover&&(this.showCover=!1)},checkLogin:function(){if(!Di.a.get("uid"))return this.$vux.alert.show({title:"温馨提示",content:"请先登录"}),Di.a.set("refer","/room?room_id="+this.room_id,{path:"/",expires:7200}),this.$router.replace({path:"/auth"}),console.log("请先登录"),!1},stopMUisc:function(){this.musicFlag=!1,this.liveMusicObj.pause(),this.lensMusicObj.pause(),this.player.pause()},WxShare:function(){var i=this,e=window.location.href,t=this,s=new URLSearchParams;s.append("open_id",this.openid),s.append("url",e),s.append("apis","chooseWXPay,onMenuShareTimeline,onMenuShareAppMessage"),t.axiosPost("/wechat/jssdk",s).then(function(e){t.$vux.loading.hide(),200==e.status?(t.$wechat.config(JSON.parse(e.data)),console.log(t.$wechat),t.$wechat.ready(function(){var i=location.protocol+"//"+document.domain+"/front/#/room?room_id="+t.room_id;t.$wechat.onMenuShareAppMessage({title:t.roomBasic.title+" "+t.roomBasic.sub_title,desc:t.roomBasic.introduce,link:i,imgUrl:t.roomBasic.logo_img,success:function(){},cancel:function(){}}),t.$wechat.onMenuShareTimeline({title:t.roomBasic.title+" "+t.roomBasic.sub_title,link:i,imgUrl:t.roomBasic.logo_img,success:function(){},cancel:function(){}})})):i.$vux.alert.show({title:"温馨提示",content:"微信参数错误"})},function(i){t.$vux.loading.hide()})}}},He=function(){var i=this,e=i.$createElement,t=i._self._c||e;return t("div",{directives:[{name:"wechat-title",rawName:"v-wechat-title",value:i.$route.meta.title,expression:"$route.meta.title"}],staticClass:"room-info"},[t("div",{staticClass:"video",on:{click:i.imgCover}},[t("div",{staticClass:"prism-player ",attrs:{id:"J_prismPlayer"}}),i._v(" "),t("div",{class:1==i.play_status&&1!=i.playing||1==i.playinit?"videoCover online_video":"videoCover outline_video"},[t("img",{attrs:{src:i.VideoCoverImg}})]),i._v(" "),i._m(0)]),i._v(" "),t("div",{staticClass:"title"},[t("dl",[t("dt",[t("h1",[t("span",[i._v(i._s(i.roomBasic.room_name))]),t("span",[i._v(i._s(i.roomBasic.click_num))])]),i._v(" "),t("p",[i._v(i._s(i.roomBasic.addr))])]),i._v(" "),t("dd",[1==i.play_status?t("span",{staticClass:"live"},[t("i"),i._v("正在直播")]):i._e(),i._v(" "),2==i.play_status?t("span",{staticClass:"playback"},[t("i"),i._v("精彩回放")]):i._e()])])]),i._v(" "),t("div",{staticClass:"line"}),i._v(" "),t("div",{staticClass:"swiper-container gallery-thumbs"},[t("div",{staticClass:"swiper-wrapper tabMenu"},[t("div",{staticClass:"swiper-slide cur",on:{click:function(e){return i.switchContent(0)}}},[i._v("实时视频")]),i._v(" "),t("div",{staticClass:"swiper-slide",on:{click:function(e){return i.switchContent(1)}}},[i._v("生态商城")]),i._v(" "),t("div",{staticClass:"swiper-slide",on:{click:function(e){return i.switchContent(2)}}},[i._v("互动评论")]),i._v(" "),t("div",{staticClass:"swiper-slide",on:{click:function(e){return i.switchContent(3)}}},[i._v("精彩短片")])])]),i._v(" "),t("div",{staticClass:"swiper-container gallery-top"},[t("div",{staticClass:"swiper-wrapper tabCon"},[t("div",{staticClass:"swiper-slide con"},[t("h2",{staticClass:"tit videoIcon"},[i._v("溯源镜头")]),i._v(" "),t("div",{staticClass:"videoList swiper-no-swiping"},i._l(i.lens,function(e){return t("dl",{staticClass:"live-1",on:{click:function(t){return i.switchVideo(e,1)}}},[t("dt",[t("img",{attrs:{src:e.cover_img}})]),i._v(" "),t("dd",[i._v(i._s(e.name))])])}),0),i._v(" "),t("h2",{staticClass:"tit shopCarIcon"},[i._v("生态介绍")]),i._v(" "),t("div",{staticClass:"company"},[t("dl",[t("dt",[t("img",{attrs:{src:i.roomBasic.logo_img}})]),i._v(" "),t("dd",[t("h3",[t("strong",[i._v(i._s(i.roomBasic.title))]),i._v(i._s(i.roomBasic.sub_title))]),i._v(" "),t("p",[t("span",[i._v(i._s(i.roomBasic.intro))])])])]),i._v(" "),t("div",{staticClass:"remarks"},[t("span",[i._v("生态简介：")]),i._v(" "),t("p",{staticClass:"hide",nativeOn:{click:function(e){return i.showMoreInfo(this)}}},[i._v("\n                            "+i._s(i.roomBasic.introduce))])])]),i._v(" "),t("div",{staticClass:"room_content",domProps:{innerHTML:i._s(i.roomBasic.content)}},[i._v("\n                    "+i._s(i.roomBasic.content)+"\n                ")])]),i._v(" "),t("div",{staticClass:"swiper-slide con"},[t("div",{staticClass:"my-order"},[t("router-link",{attrs:{to:{path:"orders"}}},[t("span",[i._v("我的订单>")])])],1),i._v(" "),t("h2",{staticClass:"tit shopCarIcon"},[i._v("生态商城")]),i._v(" "),t("div",{staticClass:"company"},[t("dl",[t("dt",[t("img",{attrs:{src:i.roomBasic.logo_img}})]),i._v(" "),t("dd",[t("h3",[t("strong",[i._v(i._s(i.roomBasic.title))]),i._v(i._s(i.roomBasic.sub_title))]),i._v(" "),t("p",[t("span",[i._v(i._s(i.roomBasic.intro))])])])]),i._v(" "),t("div",{staticClass:"remarks"},[t("span",[i._v("生态简介：")]),i._v(" "),t("p",{staticClass:"hide",nativeOn:{click:function(e){return i.showMoreInfo(this)}}},[i._v("\n                         "+i._s(i.roomBasic.introduce))])])]),i._v(" "),t("div",{staticClass:"shopList"},[t("product",{ref:"product",attrs:{room_id:i.room_id},on:{buy_price:i.countPrice}})],1)]),i._v(" "),t("div",{staticClass:"swiper-slide con"},[t("h2",{staticClass:"tit messIcon"},[i._v("互动评论")]),i._v(" "),i.showComment?t("comments",{ref:"comment",attrs:{room_id:i.room_id},on:{clearComment:i.clearParent}}):i._e()],1),i._v(" "),t("div",{staticClass:"swiper-slide con"},[t("h2",{staticClass:"tit videoIcon"},[i._v("精彩短片")]),i._v(" "),t("div",{staticClass:"filmList"},[t("room-video",{attrs:{room_id:i.room_id}})],1),i._v(" "),i._m(1)])])]),i._v(" "),t("div",{staticClass:"sendMessMenu",staticStyle:{display:"none"}},[t("div",{staticClass:"sendMessBox"},[t("input",{directives:[{name:"model",rawName:"v-model",value:i.comment,expression:"comment"}],attrs:{type:"text",value:"",placeholder:"输入评论内容..."},domProps:{value:i.comment},on:{input:[function(e){e.target.composing||(i.comment=e.target.value)},i.checkLogin]}}),i._v(" "),t("button",{on:{click:i.subComment}})])]),i._v(" "),t("div",{staticClass:"shoppingCarBox",staticStyle:{display:"none"}},[t("dl",[t("dt",[t("h4",[i._v("¥"+i._s(i.total_price))]),i._v(" "),0==i.deliver?t("p",[i._v("基地到家，全场免运费")]):t("p",[i._v("满"+i._s(i.deliver)+"元起送，基地包邮到家")])]),i._v(" "),t("dd",[t("a",{attrs:{href:"javascript:void(0)"},on:{click:i.tobuy}},[i._v("去结算")])])])]),i._v(" "),i.showCover?t("div",{staticClass:"liveHome",on:{click:i.hideCoverImg}},[t("img",{attrs:{src:i.roomBasic.cover_img}})]):i._e(),i._v(" "),t("remote-script",{attrs:{src:"https://g.alicdn.com/de/prismplayer/2.8.1/aliplayer-min.js"}})],1)},Je=[function(){var i=this,e=i.$createElement,s=i._self._c||e;return s("div",{staticClass:"logo"},[s("img",{attrs:{src:t("Z2Ou")}})])},function(){var i=this,e=i.$createElement,s=i._self._c||e;return s("div",{staticClass:"footerLogo"},[s("img",{attrs:{src:t("TPZN")}})])}],Ne={render:He,staticRenderFns:Je},qe=Ne,We=t("C7Lr"),Ze=v,Ge=We(Ue,qe,!1,Ze,"data-v-9a981bda",null),Ke=Ge.exports,ze={name:"room-video",props:["room_id"],data:function(){return{openid:"",subStatus:!1,videoList:[],roomVideoPlayer:{},video_height:0,aliplayer_config:{id:"",width:"100%",height:"195px",autoplay:!0,isLive:!1,rePlay:!1,playsinline:!0,preload:!1,controlBarVisibility:"hover",useH5Prism:!0,x5_type:"video",source:"http://aliplay.adaxiang.com/kr/wc001.m3u8",cover:"",skinLayout:[{name:"bigPlayButton",align:"cc",x:30,y:80},{name:"H5Loading",align:"cc"},{name:"tooltip",align:"blabs",x:0,y:56},{name:"thumbnail"},{name:"controlBar",align:"blabs",x:0,y:0,children:[{name:"progress",align:"blabs",x:0,y:44},{name:"playButton",align:"tl",x:15,y:12},{name:"timeDisplay",align:"tl",x:10,y:7},{name:"fullScreenButton",align:"tr",x:10,y:12},{name:"volume",align:"tr",x:5,y:10}]}]}}},created:function(){var i=document.body.clientWidth-30,e=9*i/16;this.video_height=e+"px",this.aliplayer_config.height=this.video_height,this.openid=localStorage.getItem("openid"),this.getData()},mounted:function(){},methods:{getData:function(){var i=this;i.$vux.loading.show({text:"加载中~"});var e=new URLSearchParams;i.axiosPost("/room/videos?id="+this.room_id,e).then(function(e){if(i.$vux.loading.hide(),200==e.status){if(i.videoList=e.data.videos,i.videoList.length>0)for(var t=0;t<i.videoList.length;t++)i.videoList[t].status=1,i.videoList[t].vno="J_prismPlayer"+(t+1),i.aliplayer_config.source=i.videoList[t].vurl,i.aliplayer_config.id="J_prismPlayer"+(t+1)}else i.$vux.alert.show({title:"温馨提示",content:e.message})},function(e){i.$vux.loading.hide()})},playervideo:function(i,e,t){this.$parent&&this.$parent.hasOwnProperty("stopMUisc")&&this.$parent.stopMUisc(),t.status=0,this.roomVideoPlayer.length>0&&this.roomVideoPlayer.dispose();var s=this;s.aliplayer_config.source=e,s.aliplayer_config.id=i,this.roomVideoPlayer=new Aliplayer(s.aliplayer_config),this.clickNum(t)},clickNum:function(i){var e=this;if(i.click++,e.subStatus)return!1;var t=new URLSearchParams;t.append("cid",i.id),t.append("ctype","video"),e.subStatus=!0,e.axiosPost("/room/click-num",t).then(function(i){e.subStatus=!1,200==i.status||e.$vux.alert.show({title:"温馨提示",content:i.message})},function(i){e.subStatus=!1})},videoStart:function(i){var e=this;if(e.subStatus)return!1;i.start=1==i.start?0:1,e.subStatus=!0;var t=new URLSearchParams;t.append("id",i.id),t.append("stype",1),e.axiosPost("/client/user-start",t).then(function(i){e.subStatus=!1,200==i.status||e.$vux.alert.show({title:"温馨提示",content:i.message})},function(i){e.subStatus=!1})}}},Qe=function(){var i=this,e=i.$createElement,t=i._self._c||e;return t("div",i._l(i.videoList,function(e){return t("div",{ref:"videoStyle",refInFor:!0,staticClass:"video_info"},[t("dl",[t("dt",{staticClass:"video_title"},[t("div",{staticClass:"video_item"},[t("div",{staticClass:"prism-player-video",style:{display:1==e.status?"none":"block"},attrs:{id:e.vno},on:{click:function(t){return i.clickNum(e)}}})]),i._v(" "),1==e.status?t("img",{attrs:{src:e.pic},on:{click:function(t){return i.playervideo(e.vno,e.vurl,e)}}}):i._e()]),i._v(" "),t("dd",[t("h3",[i._v(i._s(e.name))]),i._v(" "),t("p",[t("span",[i._v("片长："+i._s(e.vlength)+" 热度："+i._s(e.click))]),i._v(" "),t("span",[t("a",{class:[e.start?"zanIcon2":"zanIcon"],attrs:{href:"javascript:void(0);"},on:{click:function(t){return i.videoStart(e)}}},[i._v("赞")])])])])])])}),0)},Ye=[],Xe={render:Qe,staticRenderFns:Ye},it=Xe,et=t("C7Lr"),tt=p,st=et(ze,it,!1,tt,"data-v-f935217a",null),at=st.exports,ot={name:"room",components:{"room-video":at,Product:be,Comments:Ie},data:function(){return{contabObj:{},contentSwiper:{},currentVideo:{},playing:2,playinit:2,VideoCoverImg:"",showCover:!1,galleryTop:{},play_status:1,room_id:0,room_info:{},showComment:!0,comment:"",total_price:0,lens:{},player:{},deliver:0,aliplayer_config:{id:"J_prismPlayer",autoplay:!1,playsinline:!0,showBuffer:!0,isLive:!0,useH5Prism:!0,useFlashPrism:!1,x5_video_position:"normal",x5_type:"h5",source:"",cover:"",rePlay:!1,preload:!1,skinLayout:[{name:"bigPlayButton",align:"cc",x:30,y:80},{name:"H5Loading",align:"cc"},{name:"tooltip",align:"blabs",x:0,y:56},{name:"thumbnail"},{name:"controlBar",align:"blabs",x:0,y:0,children:[{name:"liveDisplay",align:"tlabs",x:15,y:6},{name:"progress",align:"blabs",x:0,y:44},{name:"playButton",align:"tl",x:15,y:12},{name:"timeDisplay",align:"tl",x:10,y:7},{name:"fullScreenButton",align:"tr",x:10,y:12}]}]},roomBasic:{room_name:"",start_num:"",title:"",sub_title:"",intro:"",click_num:"",introduce:"",content:"",cover_img:"",coordinate:"",addr_url:"",addr:"",logo_img:"",online_url:"",online_cover:"",mobile:""},firstMusic:!1,musicFlag:!1,lensMusicObj:"",liveMusicObj:"",showMusic:!0,isAndroid:!1,date:new Date}},provide:function(){return{reload:this.reload}},created:function(){var i=navigator.userAgent;this.isAndroid=i.indexOf("Android")>-1||i.indexOf("Adr")>-1,this.room_id=this.$route.query.room_id>0?this.$route.query.room_id:9,this.getData(),this.getLens(),localStorage.setItem("roomid",this.room_id)},mounted:function(){var i=this;$(".prism-big-play-btn").click(function(){$(".videoCover").fadeOut()}),setTimeout(i.initSwiper,1e3);var e=$(".prism-player").width();$(".prism-player").height(e/16*9),$("#J_prismPlayer").click(function(){i.playinit=2,i.checkVideoPlayer(i.currentVideo),i.musicFlag=!0,i.playBgMusic(),navigator.userAgent.match(/(phone|pad|pod|iPhone|iPod|ios|iPad|Android|Mobile|BlackBerry|IEMobile|MQQBrowser|JUC|Fennec|wOSBrowser|BrowserNG|WebOS|Symbian|Windows Phone)/i)}),$(".company .remarks p").click(function(){$(this).hasClass("hide")?$(this).removeClass("hide"):$(this).addClass("hide")}),i.isAndroid||(i.playinit=1),this.timer=setInterval(function(){i.getCurrentTime()},1e3),document.addEventListener("visibilitychange",function(){"hidden"===document.visibilityState&&(i.musicFlag=!1,i.liveMusicObj.pause(),i.lensMusicObj.pause())})},watch:{$route:function(){}},methods:{showMoreInfo:function(i){$(i).hasClass("hide")?$(i).removeClass("hide"):$(i).addClass("hide")},initSwiper:function(){},switchVideo:function(i,e){this.playinit=2,clearTimeout(this.contabObj),$(".videoCover").fadeOut(),this.player.dispose(),this.VideoCoverImg="",$("#J_prismPlayer").empty(),this.play_status=1;var t=this;2==e?(t.play_status=2,t.aliplayer_config.autoplay=!1,t.aliplayer_config.source!=i.vurl_reback?(t.aliplayer_config.cover=i.reback_img,t.aliplayer_config.source=i.vurl_reback,t.VideoCoverImg=i.reback_img):(t.aliplayer_config.cover=i.spare_cover_url,t.aliplayer_config.source=i.spare_url,t.VideoCoverImg=i.spare_cover_url)):(t.VideoCoverImg=i.cover_img,t.aliplayer_config.cover=i.pic,t.aliplayer_config.source=i.vurl),-1!=t.aliplayer_config.source.indexOf(".m3u8")?(t.aliplayer_config.isLive=!0,t.aliplayer_config.autoplay=!1,t.aliplayer_config.rePlay=!1,t.play_status=1):(t.aliplayer_config.isLive=!1,t.aliplayer_config.autoplay=!1,t.aliplayer_config.rePlay=!0,t.play_status=2),t.currentVideo=i,t.aliplayer_config.id="J_prismPlayer",t.player=new Aliplayer(t.aliplayer_config),t.player.on("x5requestFullScreen",this.fullScreenHandle),t.player.on("x5cancelFullScreen",this.cancelFullScreenHandel),t.aliplayer_config.autoplay&&this.checkVideoPlayer(i),t.stopMUisc(),t.currentVideo=i,t.initMusic()},switchContent:function(i){$(".swiper-slide").each(function(e){e==i?$(this).addClass("cur"):$(this).removeClass("cur")}),$(".con").each(function(e){e==i?$(this).show():$(this).hide(),1==i?($(".shoppingCarBox").show(),$(".sendMessMenu").hide()):2==i?($(".sendMessMenu").show(),$(".shoppingCarBox").hide()):($(".shoppingCarBox").hide(),$(".sendMessMenu").hide())})},getData:function(){var i=this,e=new URLSearchParams;i.axiosPost("/room/info?id="+this.room_id,e).then(function(e){i.roomBasic.room_name=e.data.room_name,i.roomBasic.logo_img=e.data.logo_img,i.roomBasic.click_num=e.data.click_num,i.roomBasic.addr_url=e.data.addr_url,i.roomBasic.addr=e.data.addr,i.roomBasic.coordinate=e.data.coordinate,i.roomBasic.cover_img=e.data.cover_img,i.roomBasic.introduce=e.data.introduce,i.roomBasic.content=e.data.content,i.roomBasic.logo_pic=e.data.logo_img,i.roomBasic.title=e.data.title,i.roomBasic.sub_title=e.data.sub_title,i.roomBasic.intro=e.data.intro,i.roomBasic.start_num=e.data.start_num,i.roomBasic.online_url=e.data.online_url,i.roomBasic.online_cover=e.data.online_cover,i.roomBasic.mobile=e.data.mobile,i.$route.meta.title=e.data.room_name,i.deliver=e.data.deliver,i.roomBasic.cover_img&&(i.showCover=!0),i.WxShare(),i.$nextTick(function(){})},function(i){console.log(i)})},getLens:function(){var i=this,e=this,t=new URLSearchParams;e.axiosPost("/room/lens?id="+this.room_id,t).then(function(t){e.$vux.loading.hide(),200==t.status?(e.lens=t.data,-1!=e.lens[0].vurl.indexOf(".m3u8")?(e.aliplayer_config.isLive=!0,e.aliplayer_config.autoplay=!1,e.aliplayer_config.rePlay=!1,e.play_status=1,e.firstMusic=!0):(e.aliplayer_config.isLive=!1,e.aliplayer_config.autoplay=!1,e.aliplayer_config.rePlay=!0,e.play_status=2),e.VideoCoverImg=e.lens[0].cover_img,e.aliplayer_config.source=e.lens[0].vurl,e.aliplayer_config.cover=e.lens[0].pic,e.aliplayer_config.id="J_prismPlayer",console.log(e.play_status),e.player=new Aliplayer(e.aliplayer_config),e.player.on("x5requestFullScreen",i.fullScreenHandle),e.player.on("x5cancelFullScreen",i.cancelFullScreenHandel),e.aliplayer_config.autoplay&&e.checkVideoPlayer(e.lens[0]),e.currentVideo=e.lens[0],e.initMusic()):i.$vux.alert.show({title:"温馨提示",content:t.message})},function(i){e.$vux.loading.hide()})},countPrice:function(i){this.total_price=i},tobuy:function(){var i=this;if(i.deliver>0&&parseInt(i.total_price)<parseInt(i.deliver))return this.$vux.alert.show({title:"温馨提示",content:"满"+i.deliver+"元起送，基地包邮到家"}),!1;this.$refs.product.buy_product(i.roomBasic.id,i.roomBasic.room_name,i.roomBasic.logo_pic,i.roomBasic.mobile)},subComment:function(){this.$refs.comment.setComment(this.comment)},clearParent:function(){this.comment=""},reload:function(){this.showComment=!1,this.$nextTick(function(){this.showComment=!0})},checkVideoPlayer:function(i){var e=this;e.contabObj=setTimeout(function(){e.player.getCurrentTime()<=0&&e.switchVideo(i,2)},3e3)},imgCover:function(){this.playing=1,$(".videoCover").css("z-index","-1 !important")},hideCoverImg:function(){this.roomBasic.cover_img&&this.showCover&&(this.showCover=!1)},WxShare:function(){var i=this,e=window.location.href,t=this,s=new URLSearchParams;s.append("open_id",this.openid),s.append("url",e),s.append("apis","chooseWXPay,onMenuShareTimeline,onMenuShareAppMessage"),t.axiosPost("/wechat/jssdk",s).then(function(e){t.$vux.loading.hide(),200==e.status?(t.$wechat.config(JSON.parse(e.data)),t.$wechat.ready(function(){var i=location.protocol+"//"+document.domain+"/front/#/room?room_id="+t.room_id;t.$wechat.onMenuShareAppMessage({title:t.roomBasic.title+" "+t.roomBasic.sub_title,desc:t.roomBasic.introduce,link:i,imgUrl:t.roomBasic.logo_img,success:function(){},cancel:function(){}}),t.$wechat.onMenuShareTimeline({title:t.roomBasic.title+" "+t.roomBasic.sub_title,link:i,imgUrl:t.roomBasic.logo_img,success:function(){},cancel:function(){}})})):i.$vux.alert.show({title:"温馨提示",content:"微信参数错误"})},function(i){t.$vux.loading.hide()})},initMusic:function(){this.musicFlag=!this.firstMusic,this.firstMusic=!1,this.lensMusicObj=document.getElementById("lens-music"),this.liveMusicObj=document.getElementById("live-music"),this.lensMusicObj&&(this.lensMusicObj.currentTime=0),this.liveMusicObj&&(this.liveMusicObj.currentTime=0)},playBgMusic:function(){if(this.liveCommon.checkAndroid())return!1;var i=this;i.musicFlag=!0,setTimeout(function(){i.liveMusicObj.play()},500)},playMusic:function(){if(this.liveCommon.checkAndroid())return!1;this.musicFlag?(this.musicFlag=!1,this.liveMusicObj.pause(),this.lensMusicObj.play()):(this.lensMusicObj.pause(),this.liveMusicObj.play(),this.musicFlag=!0)},getCurrentTime:function(){var i=new Date,e=i.getFullYear(),t=i.getMonth()+1<10?"0"+(i.getMonth()+1):i.getMonth()+1,s=i.getDate()<10?"0"+i.getDate():i.getDate(),a=i.getHours()<10?"0"+i.getHours():i.getHours(),o=i.getMinutes()<10?"0"+i.getMinutes():i.getMinutes(),n=i.getSeconds()<10?"0"+i.getSeconds():i.getSeconds();this.date=e+"-"+t+"-"+s+" "+a+":"+o+":"+n},goHome:function(){this.$router.replace({path:"/"})},fullScreenHandle:function(){},cancelFullScreenHandel:function(){},stopMUisc:function(){this.musicFlag=!1,this.liveMusicObj.pause(),this.lensMusicObj.pause(),this.player.pause()},checkLogin:function(){if(!Di.a.get("uid"))return this.$vux.alert.show({title:"温馨提示",content:"请先登录"}),Di.a.set("refer","/room?room_id="+this.room_id,{path:"/",expires:7200}),this.$router.replace({path:"/auth"}),console.log("请先登录"),!1}}},nt=function(){var i=this,e=i.$createElement,t=i._self._c||e;return t("div",{directives:[{name:"wechat-title",rawName:"v-wechat-title",value:i.$route.meta.title,expression:"$route.meta.title"}],staticClass:"room-info"},[t("div",{staticClass:"room-deader"},[t("div",{staticClass:"video",on:{click:i.imgCover}},[t("div",{staticClass:"prism-player",attrs:{id:"J_prismPlayer"}}),i._v(" "),t("div",{class:1==i.play_status&&1!=i.playing||1==i.playinit?"videoCover online_video":"videoCover outline_video"},[t("img",{attrs:{src:i.VideoCoverImg}})]),i._v(" "),i._m(0),i._v(" "),i.currentVideo.live_music&&!i.liveCommon.checkAndroid()?t("div",{staticClass:"live-music"},[t("div",{class:i.musicFlag?"live-music-icon active":"live-music-icon",on:{click:i.playMusic}})]):i._e(),i._v(" "),t("div",{staticClass:"live-home-icon",on:{click:i.goHome}}),i._v(" "),t("div",{staticClass:"live-view-icon"},[i._v("热度 "+i._s(i.roomBasic.click_num)+" 人")])]),i._v(" "),t("div",{staticClass:"live-music-detail"},[t("audio",{staticStyle:{display:"none"},attrs:{src:i.currentVideo.lens_music,loop:"loop",id:"lens-music"}}),i._v(" "),t("audio",{staticStyle:{display:"none"},attrs:{src:i.currentVideo.live_music,loop:"loop",id:"live-music"}})])]),i._v(" "),t("div",{staticClass:"live-room-main"},[t("div",{staticClass:"swiper-container gallery-thumbs"},[t("div",{staticClass:"swiper-wrapper tabMenu"},[t("div",{staticClass:"swiper-slide cur",on:{click:function(e){return i.switchContent(0)}}},[i._v("实时视频")]),i._v(" "),t("div",{staticClass:"swiper-slide",on:{click:function(e){return i.switchContent(1)}}},[i._v("生态商城")]),i._v(" "),t("div",{staticClass:"swiper-slide",on:{click:function(e){return i.switchContent(2)}}},[i._v("互动评论")]),i._v(" "),t("div",{staticClass:"swiper-slide",on:{click:function(e){return i.switchContent(3)}}},[i._v("精彩短片")])])]),i._v(" "),t("div",{staticClass:"live-room-content"},[t("div",{staticClass:"swiper-container gallery-top"},[t("div",{staticClass:"swiper-wrapper tabCon"},[t("div",{staticClass:"swiper-slide con"},[t("div",{staticClass:"swiper-container scroll"},[t("div",{staticClass:"swiper-wrapper"},[t("div",{staticClass:"swiper-slide slidescroll"},[t("h2",{staticClass:"tit videoIcon"},[i._v("溯源镜头")]),i._v(" "),t("div",{staticClass:"videoList swiper-no-swiping"},i._l(i.lens,function(e){return t("dl",{staticClass:"live-1",on:{click:function(t){return i.switchVideo(e,1)}}},[t("dt",[t("img",{attrs:{src:e.cover_img}})]),i._v(" "),t("dd",[i._v(i._s(e.name))])])}),0),i._v(" "),t("h2",{staticClass:"tit shopCarIcon"},[i._v("生态介绍")]),i._v(" "),t("div",{staticClass:"company"},[t("dl",[t("dt",[t("img",{attrs:{src:i.roomBasic.logo_img}})]),i._v(" "),t("dd",[t("h3",[t("strong",[i._v(i._s(i.roomBasic.title))]),i._v(i._s(i.roomBasic.sub_title))]),i._v(" "),t("p",[t("span",[i._v(i._s(i.roomBasic.intro))])])])]),i._v(" "),t("div",{staticClass:"remarks"},[t("span",[i._v("生态简介：")]),i._v(" "),t("p",{staticClass:"hide",nativeOn:{click:function(e){return i.showMoreInfo(this)}}},[i._v("\n                        "+i._s(i.roomBasic.introduce))])])]),i._v(" "),t("div",{staticClass:"room_content",domProps:{innerHTML:i._s(i.roomBasic.content)}},[i._v("\n                    "+i._s(i.roomBasic.content)+"\n                  ")])])])])]),i._v(" "),t("div",{staticClass:"swiper-slide con"},[t("div",{staticClass:"swiper-container scroll "},[t("div",{staticClass:"swiper-wrapper"},[t("div",{staticClass:"swiper-slide slidescroll"},[t("div",{staticClass:"my-order"},[t("router-link",{attrs:{to:{path:"orders"}}},[t("span",[i._v("我的订单>")])])],1),i._v(" "),t("h2",{staticClass:"tit shopCarIcon"},[i._v("生态商城")]),i._v(" "),t("div",{staticClass:"company"},[t("dl",[t("dt",[t("img",{attrs:{src:i.roomBasic.logo_img}})]),i._v(" "),t("dd",[t("h3",[t("strong",[i._v(i._s(i.roomBasic.title))]),i._v(i._s(i.roomBasic.sub_title))]),i._v(" "),t("p",[t("span",[i._v(i._s(i.roomBasic.intro))])])])]),i._v(" "),t("div",{staticClass:"remarks"},[t("span",[i._v("生态简介：")]),i._v(" "),t("p",{staticClass:"hide",nativeOn:{click:function(e){return i.showMoreInfo(this)}}},[i._v("\n                        "+i._s(i.roomBasic.introduce))])])]),i._v(" "),t("div",{staticClass:"shopList"},[t("product",{ref:"product",attrs:{room_id:i.room_id},on:{buy_price:i.countPrice}})],1)])])])]),i._v(" "),t("div",{staticClass:"swiper-slide con"},[t("div",{staticClass:"swiper-container scroll"},[t("div",{staticClass:"swiper-wrapper"},[t("div",{staticClass:"swiper-slide slidescroll"},[t("h2",{staticClass:"tit messIcon"},[i._v("互动评论")]),i._v(" "),i.showComment?t("comments",{ref:"comment",attrs:{room_id:i.room_id},on:{clearComment:i.clearParent}}):i._e()],1)])])]),i._v(" "),t("div",{staticClass:"swiper-slide con"},[t("div",{staticClass:"swiper-container scroll"},[t("div",{staticClass:"swiper-wrapper"},[t("div",{staticClass:"swiper-slide slidescroll"},[t("h2",{staticClass:"tit videoIcon"},[i._v("精彩短片")]),i._v(" "),t("div",{staticClass:"filmList"},[t("room-video",{attrs:{room_id:i.room_id}})],1),i._v(" "),i._m(1)])])])])])])])]),i._v(" "),t("div",{staticClass:"sendMessMenu",staticStyle:{display:"none"}},[t("div",{staticClass:"sendMessBox"},[t("input",{directives:[{name:"model",rawName:"v-model",value:i.comment,expression:"comment"}],attrs:{type:"text",value:"",placeholder:"输入评论内容..."},domProps:{value:i.comment},on:{input:[function(e){e.target.composing||(i.comment=e.target.value)},i.checkLogin]}}),i._v(" "),t("button",{on:{click:i.subComment}})])]),i._v(" "),t("div",{staticClass:"shoppingCarBox",staticStyle:{display:"none"}},[t("dl",[t("dt",[t("h4",[i._v("¥"+i._s(i.total_price))]),i._v(" "),0==i.deliver?t("p",[i._v("基地到家，全场免运费")]):t("p",[i._v("满"+i._s(i.deliver)+"元起送，基地包邮到家")])]),i._v(" "),t("dd",[t("a",{attrs:{href:"javascript:void(0)"},on:{click:i.tobuy}},[i._v("去结算")])])])]),i._v(" "),i.showCover?t("div",{staticClass:"liveHome",on:{click:i.hideCoverImg}},[t("img",{attrs:{src:i.roomBasic.cover_img}})]):i._e(),i._v(" "),t("remote-script",{attrs:{src:"https://g.alicdn.com/de/prismplayer/2.8.1/aliplayer-min.js"}})],1)},rt=[function(){var i=this,e=i.$createElement,s=i._self._c||e;return s("div",{staticClass:"logo"},[s("img",{attrs:{src:t("Z2Ou")}})])},function(){var i=this,e=i.$createElement,s=i._self._c||e;return s("div",{staticClass:"footerLogo"},[s("img",{attrs:{src:t("TPZN")}})])}],lt={render:nt,staticRenderFns:rt},ct=lt,dt=t("C7Lr"),ut=h,mt=dt(ot,ct,!1,ut,"data-v-70e7944c",null),vt=mt.exports,pt={name:"room-common",components:{"room-video":at,Product:be,Comments:Ie},data:function(){return{contabObj:{},contentSwiper:{},currentVideo:{},playing:2,playinit:2,VideoCoverImg:"",showCover:!1,galleryTop:{},play_status:1,room_id:0,room_info:{},showComment:!0,comment:"",total_price:0,lens:{},player:{},deliver:0,aliplayer_config:{id:"J_prismPlayer",autoplay:!1,playsinline:!0,showBuffer:!0,isLive:!0,useH5Prism:!0,useFlashPrism:!1,x5_video_position:"normal",x5_type:"h5",source:"",cover:"",rePlay:!1,preload:!1,skinLayout:[{name:"bigPlayButton",align:"cc",x:30,y:80},{name:"H5Loading",align:"cc"},{name:"tooltip",align:"blabs",x:0,y:56},{name:"thumbnail"},{name:"controlBar",align:"blabs",x:0,y:0,children:[{name:"liveDisplay",align:"tlabs",x:15,y:6},{name:"progress",align:"blabs",x:0,y:44},{name:"playButton",align:"tl",x:15,y:12},{name:"timeDisplay",align:"tl",x:10,y:7},{name:"fullScreenButton",align:"tr",x:10,y:12}]}]},roomBasic:{room_name:"",start_num:"",title:"",sub_title:"",intro:"",click_num:"",introduce:"",content:"",cover_img:"",coordinate:"",addr_url:"",addr:"",logo_img:"",online_url:"",online_cover:"",mobile:""},firstMusic:!1,musicFlag:!1,lensMusicObj:"",liveMusicObj:"",showMusic:!0,isAndroid:!1,date:new Date}},provide:function(){return{reload:this.reload}},created:function(){var i=navigator.userAgent;this.isAndroid=i.indexOf("Android")>-1||i.indexOf("Adr")>-1,this.room_id=this.$route.query.room_id>0?this.$route.query.room_id:9,this.getData(),this.getLens(),localStorage.setItem("roomid",this.room_id)},mounted:function(){var i=this;$(".prism-big-play-btn").click(function(){$(".videoCover").fadeOut()}),setTimeout(i.initSwiper,1e3);var e=$(".prism-player").width();$(".prism-player").height(e/16*9),$("#J_prismPlayer").click(function(){i.playinit=2,i.checkVideoPlayer(i.currentVideo),i.musicFlag=!0,i.playBgMusic(),navigator.userAgent.match(/(phone|pad|pod|iPhone|iPod|ios|iPad|Android|Mobile|BlackBerry|IEMobile|MQQBrowser|JUC|Fennec|wOSBrowser|BrowserNG|WebOS|Symbian|Windows Phone)/i)}),$(".company .remarks p").click(function(){$(this).hasClass("hide")?$(this).removeClass("hide"):$(this).addClass("hide")}),i.isAndroid||(i.playinit=1),this.timer=setInterval(function(){i.getCurrentTime()},1e3),document.addEventListener("visibilitychange",function(){"hidden"===document.visibilityState&&(i.musicFlag=!1,i.lensMusicObj.currentTime=0,i.liveMusicObj.currentTime=0)})},watch:{$route:function(){}},methods:{showMoreInfo:function(i){$(i).hasClass("hide")?$(i).removeClass("hide"):$(i).addClass("hide")},initSwiper:function(){},switchVideo:function(i,e){this.playinit=2,clearTimeout(this.contabObj),$(".videoCover").fadeOut(),this.player.dispose(),this.VideoCoverImg="",$("#J_prismPlayer").empty(),this.play_status=1;var t=this;2==e?(t.play_status=2,t.aliplayer_config.autoplay=!1,t.aliplayer_config.source!=i.vurl_reback?(t.aliplayer_config.cover=i.reback_img,t.aliplayer_config.source=i.vurl_reback,t.VideoCoverImg=i.reback_img):(t.aliplayer_config.cover=i.spare_cover_url,t.aliplayer_config.source=i.spare_url,t.VideoCoverImg=i.spare_cover_url)):(t.VideoCoverImg=i.cover_img,t.aliplayer_config.cover=i.pic,t.aliplayer_config.source=i.vurl),-1!=t.aliplayer_config.source.indexOf(".m3u8")?(t.aliplayer_config.isLive=!0,t.aliplayer_config.autoplay=!1,t.aliplayer_config.rePlay=!1,t.play_status=1):(t.aliplayer_config.isLive=!1,t.aliplayer_config.autoplay=!1,t.aliplayer_config.rePlay=!0,t.play_status=2),t.aliplayer_config.autoplay&&this.checkVideoPlayer(i),t.currentVideo=i,t.aliplayer_config.id="J_prismPlayer",t.player=new Aliplayer(t.aliplayer_config),t.player.on("x5requestFullScreen",this.fullScreenHandle),t.player.on("x5cancelFullScreen",this.cancelFullScreenHandel),t.aliplayer_config.autoplay&&this.checkVideoPlayer(i),t.stopMUisc(),t.currentVideo=i,t.initMusic()},switchContent:function(i){$(".swiper-slide").each(function(e){e==i?$(this).addClass("cur"):$(this).removeClass("cur")}),$(".con").each(function(e){e==i?$(this).show():$(this).hide(),1==i?$(".sendMessMenu").show():$(".sendMessMenu").hide()})},getData:function(){var i=this,e=new URLSearchParams;i.axiosPost("/room/info?id="+this.room_id,e).then(function(e){i.roomBasic.room_name=e.data.room_name,i.roomBasic.logo_img=e.data.logo_img,i.roomBasic.click_num=e.data.click_num,i.roomBasic.addr_url=e.data.addr_url,i.roomBasic.addr=e.data.addr,i.roomBasic.coordinate=e.data.coordinate,i.roomBasic.cover_img=e.data.cover_img,i.roomBasic.introduce=e.data.introduce,i.roomBasic.content=e.data.content,i.roomBasic.logo_pic=e.data.logo_img,i.roomBasic.title=e.data.title,i.roomBasic.sub_title=e.data.sub_title,i.roomBasic.intro=e.data.intro,i.roomBasic.start_num=e.data.start_num,i.roomBasic.online_url=e.data.online_url,i.roomBasic.online_cover=e.data.online_cover,i.roomBasic.mobile=e.data.mobile,i.$route.meta.title=e.data.room_name,i.deliver=e.data.deliver,i.roomBasic.cover_img&&(i.showCover=!0),i.WxShare(),i.$nextTick(function(){})},function(i){console.log(i)})},getLens:function(){var i=this,e=this,t=new URLSearchParams;e.axiosPost("/room/lens?id="+this.room_id,t).then(function(t){e.$vux.loading.hide(),200==t.status?(e.lens=t.data,-1!=e.lens[0].vurl.indexOf(".m3u8")?(e.aliplayer_config.isLive=!0,e.aliplayer_config.autoplay=!1,e.aliplayer_config.rePlay=!1,e.play_status=1,e.firstMusic=!0):(e.aliplayer_config.isLive=!1,e.aliplayer_config.autoplay=!1,e.aliplayer_config.rePlay=!0,e.play_status=2),e.VideoCoverImg=e.lens[0].cover_img,e.aliplayer_config.source=e.lens[0].vurl,e.aliplayer_config.cover=e.lens[0].pic,e.aliplayer_config.id="J_prismPlayer",console.log(e.play_status),e.player=new Aliplayer(e.aliplayer_config),e.player.on("x5requestFullScreen",i.fullScreenHandle),e.player.on("x5cancelFullScreen",i.cancelFullScreenHandel),e.aliplayer_config.autoplay&&e.checkVideoPlayer(e.lens[0]),e.currentVideo=e.lens[0],e.initMusic()):i.$vux.alert.show({title:"温馨提示",content:t.message})},function(i){e.$vux.loading.hide()})},countPrice:function(i){this.total_price=i},tobuy:function(){var i=this;if(i.deliver>0&&parseInt(i.total_price)<parseInt(i.deliver))return this.$vux.alert.show({title:"温馨提示",content:"满"+i.deliver+"元起送，基地包邮到家"}),!1;this.$refs.product.buy_product(i.roomBasic.id,i.roomBasic.room_name,i.roomBasic.logo_pic,i.roomBasic.mobile)},subComment:function(){this.$refs.comment.setComment(this.comment)},clearParent:function(){this.comment=""},reload:function(){this.showComment=!1,this.$nextTick(function(){this.showComment=!0})},checkVideoPlayer:function(i){var e=this;e.contabObj=setTimeout(function(){e.player.getCurrentTime()<=0&&e.switchVideo(i,2)},3e3)},imgCover:function(){this.playing=1,$(".videoCover").css("z-index","-1 !important")},hideCoverImg:function(){this.roomBasic.cover_img&&this.showCover&&(this.showCover=!1)},WxShare:function(){var i=this,e=window.location.href,t=this,s=new URLSearchParams;s.append("open_id",this.openid),s.append("url",e),s.append("apis","chooseWXPay,onMenuShareTimeline,onMenuShareAppMessage"),t.axiosPost("/wechat/jssdk",s).then(function(e){t.$vux.loading.hide(),200==e.status?(t.$wechat.config(JSON.parse(e.data)),t.$wechat.ready(function(){2==t.play_status&&(t.musicFlag=!0,t.playBgMusic());var i=location.protocol+"//"+document.domain+"/front/#/room?room_id="+t.room_id;t.$wechat.onMenuShareAppMessage({title:t.roomBasic.title+" "+t.roomBasic.sub_title,desc:t.roomBasic.introduce,link:i,imgUrl:t.roomBasic.logo_img,success:function(){},cancel:function(){}}),t.$wechat.onMenuShareTimeline({title:t.roomBasic.title+" "+t.roomBasic.sub_title,link:i,imgUrl:t.roomBasic.logo_img,success:function(){},cancel:function(){}})})):i.$vux.alert.show({title:"温馨提示",content:"微信参数错误"})},function(i){t.$vux.loading.hide()})},initMusic:function(){this.musicFlag=!this.firstMusic,this.firstMusic=!1,this.lensMusicObj=document.getElementById("lens-music"),this.liveMusicObj=document.getElementById("live-music"),this.lensMusicObj&&(this.lensMusicObj.currentTime=0),this.liveMusicObj&&(this.liveMusicObj.currentTime=0)},playBgMusic:function(){if(this.liveCommon.checkAndroid())return!1;var i=this;i.musicFlag=!0,setTimeout(function(){i.liveMusicObj.play()},500)},playMusic:function(){if(this.liveCommon.checkAndroid())return!1;this.musicFlag?(this.musicFlag=!1,this.liveMusicObj.pause(),this.lensMusicObj.play()):(this.lensMusicObj.pause(),this.liveMusicObj.play(),this.musicFlag=!0)},getCurrentTime:function(){var i=new Date,e=i.getFullYear(),t=i.getMonth()+1<10?"0"+(i.getMonth()+1):i.getMonth()+1,s=i.getDate()<10?"0"+i.getDate():i.getDate(),a=i.getHours()<10?"0"+i.getHours():i.getHours(),o=i.getMinutes()<10?"0"+i.getMinutes():i.getMinutes(),n=i.getSeconds()<10?"0"+i.getSeconds():i.getSeconds();this.date=e+"-"+t+"-"+s+" "+a+":"+o+":"+n},goHome:function(){this.$router.replace({path:"/"})},fullScreenHandle:function(){},cancelFullScreenHandel:function(){console.log("stopMUisc")},stopMUisc:function(){this.musicFlag=!1,this.liveMusicObj.pause(),this.lensMusicObj.pause(),this.player.pause()},checkLogin:function(){if(!Di.a.get("uid"))return this.$vux.alert.show({title:"温馨提示",content:"请先登录"}),Di.a.set("refer","/room?room_id="+this.room_id,{path:"/",expires:7200}),this.$router.replace({path:"/auth"}),console.log("请先登录"),!1}}},ht=function(){var i=this,e=i.$createElement,t=i._self._c||e;return t("div",{directives:[{name:"wechat-title",rawName:"v-wechat-title",value:i.$route.meta.title,expression:"$route.meta.title"}],staticClass:"room-info"},[t("div",{staticClass:"room-deader"},[t("div",{staticClass:"video",on:{click:i.imgCover}},[t("div",{staticClass:"prism-player",attrs:{id:"J_prismPlayer"}}),i._v(" "),t("div",{class:1==i.play_status&&1!=i.playing||1==i.playinit?"videoCover online_video":"videoCover outline_video"},[t("img",{attrs:{src:i.VideoCoverImg}})]),i._v(" "),i._m(0),i._v(" "),i.currentVideo.live_music&&!i.liveCommon.checkAndroid()?t("div",{staticClass:"live-music"},[t("div",{class:i.musicFlag?"live-music-icon active":"live-music-icon",on:{click:i.playMusic}})]):i._e(),i._v(" "),t("div",{staticClass:"live-home-icon",on:{click:i.goHome}}),i._v(" "),t("div",{staticClass:"live-view-icon"},[i._v("热度 "+i._s(i.roomBasic.click_num)+" 人")])]),i._v(" "),t("div",{staticClass:"live-music-detail"},[t("audio",{staticStyle:{display:"none"},attrs:{src:i.currentVideo.lens_music,loop:"loop",id:"lens-music"}}),i._v(" "),t("audio",{staticStyle:{display:"none"},attrs:{src:i.currentVideo.live_music,loop:"loop",id:"live-music"}})])]),i._v(" "),t("div",{staticClass:"live-room-main"},[t("div",{staticClass:"swiper-container gallery-thumbs"},[t("div",{staticClass:"swiper-wrapper tabMenu"},[t("div",{staticClass:"swiper-slide cur",on:{click:function(e){return i.switchContent(0)}}},[i._v("实时视频")]),i._v(" "),t("div",{staticClass:"swiper-slide",on:{click:function(e){return i.switchContent(1)}}},[i._v("互动评论")]),i._v(" "),t("div",{staticClass:"swiper-slide",on:{click:function(e){return i.switchContent(2)}}},[i._v("精彩短片")])])]),i._v(" "),t("div",{staticClass:"live-room-content"},[t("div",{staticClass:"swiper-container gallery-top"},[t("div",{staticClass:"swiper-wrapper tabCon"},[t("div",{staticClass:"swiper-slide con"},[t("div",{staticClass:"swiper-container scroll"},[t("div",{staticClass:"swiper-wrapper"},[t("div",{staticClass:"swiper-slide slidescroll"},[t("h2",{staticClass:"tit videoIcon"},[i._v("实时镜头")]),i._v(" "),t("div",{staticClass:"videoList swiper-no-swiping"},i._l(i.lens,function(e){return t("dl",{staticClass:"live-1",on:{click:function(t){return i.switchVideo(e,1)}}},[t("dt",[t("img",{attrs:{src:e.cover_img}})]),i._v(" "),t("dd",[i._v(i._s(e.name))])])}),0),i._v(" "),t("h2",{staticClass:"tit shopCarIcon"},[i._v("详情介绍")]),i._v(" "),t("div",{staticClass:"company"},[t("dl",[t("dt",[t("img",{attrs:{src:i.roomBasic.logo_img}})]),i._v(" "),t("dd",[t("h3",[t("strong",[i._v(i._s(i.roomBasic.title))]),i._v(i._s(i.roomBasic.sub_title))]),i._v(" "),t("p",[t("span",[i._v(i._s(i.roomBasic.intro))])])])]),i._v(" "),t("div",{staticClass:"remarks"},[t("span",[i._v("生态简介：")]),i._v(" "),t("p",{staticClass:"hide",nativeOn:{click:function(e){return i.showMoreInfo(this)}}},[i._v("\n                        "+i._s(i.roomBasic.introduce))])])]),i._v(" "),t("div",{staticClass:"room_content",domProps:{innerHTML:i._s(i.roomBasic.content)}},[i._v("\n                    "+i._s(i.roomBasic.content)+"\n                  ")])])])])]),i._v(" "),t("div",{staticClass:"swiper-slide con"},[t("div",{staticClass:"swiper-container scroll"},[t("div",{staticClass:"swiper-wrapper"},[t("div",{staticClass:"swiper-slide slidescroll"},[t("h2",{staticClass:"tit messIcon"},[i._v("互动评论")]),i._v(" "),i.showComment?t("comments",{ref:"comment",attrs:{room_id:i.room_id},on:{clearComment:i.clearParent}}):i._e()],1)])])]),i._v(" "),t("div",{staticClass:"swiper-slide con"},[t("div",{staticClass:"swiper-container scroll"},[t("div",{staticClass:"swiper-wrapper"},[t("div",{staticClass:"swiper-slide slidescroll"},[t("h2",{staticClass:"tit videoIcon"},[i._v("精彩短片")]),i._v(" "),t("div",{staticClass:"filmList"},[t("room-video",{attrs:{room_id:i.room_id}})],1),i._v(" "),i._m(1)])])])])])])])]),i._v(" "),t("div",{staticClass:"sendMessMenu",staticStyle:{display:"none"}},[t("div",{staticClass:"sendMessBox"},[t("input",{directives:[{name:"model",rawName:"v-model",value:i.comment,expression:"comment"}],attrs:{type:"text",value:"",placeholder:"输入评论内容..."},domProps:{value:i.comment},on:{input:[function(e){e.target.composing||(i.comment=e.target.value)},i.checkLogin]}}),i._v(" "),t("button",{on:{click:i.subComment}})])]),i._v(" "),t("div",{staticClass:"shoppingCarBox",staticStyle:{display:"none"}},[t("dl",[t("dt",[t("h4",[i._v("¥"+i._s(i.total_price))]),i._v(" "),0==i.deliver?t("p",[i._v("基地到家，全场免运费")]):t("p",[i._v("满"+i._s(i.deliver)+"元起送，基地包邮到家")])]),i._v(" "),t("dd",[t("a",{attrs:{href:"javascript:void(0)"},on:{click:i.tobuy}},[i._v("去结算")])])])]),i._v(" "),i.showCover?t("div",{staticClass:"liveHome",on:{click:i.hideCoverImg}},[t("img",{attrs:{src:i.roomBasic.cover_img}})]):i._e(),i._v(" "),t("remote-script",{attrs:{src:"https://g.alicdn.com/de/prismplayer/2.8.1/aliplayer-min.js"}})],1)},_t=[function(){var i=this,e=i.$createElement,s=i._self._c||e;return s("div",{staticClass:"logo"},[s("img",{attrs:{src:t("Z2Ou")}})])},function(){var i=this,e=i.$createElement,s=i._self._c||e;return s("div",{staticClass:"footerLogo"},[s("img",{attrs:{src:t("TPZN")}})])}],gt={render:ht,staticRenderFns:_t},ft=gt,yt=t("C7Lr"),Ct=_,wt=yt(pt,ft,!1,Ct,"data-v-1108e452",null),bt=wt.exports,xt={name:"room",components:{"room-video":at,Product:be,Comments:Ie},data:function(){return{contabObj:{},contentSwiper:{},currentVideo:{},playing:2,playinit:2,VideoCoverImg:"",showCover:!1,galleryTop:{},play_status:1,room_id:0,room_info:{},showComment:!0,comment:"",total_price:0,lens:{},player:{},deliver:0,aliplayer_config:{id:"J_prismPlayer",autoplay:!1,playsinline:!0,showBuffer:!0,isLive:!0,useH5Prism:!0,useFlashPrism:!1,x5_video_position:"normal",x5_type:"h5",source:"",cover:"",rePlay:!1,preload:!1,skinLayout:[{name:"bigPlayButton",align:"cc",x:30,y:80},{name:"H5Loading",align:"cc"},{name:"tooltip",align:"blabs",x:0,y:56},{name:"thumbnail"},{name:"controlBar",align:"blabs",x:0,y:0,children:[{name:"liveDisplay",align:"tlabs",x:15,y:6},{name:"progress",align:"blabs",x:0,y:44},{name:"playButton",align:"tl",x:15,y:12},{name:"timeDisplay",align:"tl",x:10,y:7},{name:"fullScreenButton",align:"tr",x:10,y:12}]}]},roomBasic:{room_name:"",start_num:"",title:"",sub_title:"",intro:"",click_num:"",introduce:"",content:"",cover_img:"",coordinate:"",addr_url:"",addr:"",logo_img:"",online_url:"",online_cover:"",mobile:""},firstMusic:!1,musicFlag:!1,lensMusicObj:"",liveMusicObj:"",showMusic:!0,isAndroid:!1,date:new Date}},provide:function(){return{reload:this.reload}},created:function(){var i=navigator.userAgent;this.isAndroid=i.indexOf("Android")>-1||i.indexOf("Adr")>-1,this.room_id=this.$route.query.room_id>0?this.$route.query.room_id:9,this.getData(),this.getLens(),localStorage.setItem("roomid",this.room_id)},mounted:function(){var i=this;$(".prism-big-play-btn").click(function(){$(".videoCover").fadeOut()}),setTimeout(i.initSwiper,1e3);var e=$(".prism-player").width();$(".prism-player").height(e/16*9),$("#J_prismPlayer").click(function(){i.playinit=2,i.checkVideoPlayer(i.currentVideo),i.musicFlag=!0,i.playBgMusic(),navigator.userAgent.match(/(phone|pad|pod|iPhone|iPod|ios|iPad|Android|Mobile|BlackBerry|IEMobile|MQQBrowser|JUC|Fennec|wOSBrowser|BrowserNG|WebOS|Symbian|Windows Phone)/i)}),$(".company .remarks p").click(function(){$(this).hasClass("hide")?$(this).removeClass("hide"):$(this).addClass("hide")}),i.isAndroid||(i.playinit=1),this.timer=setInterval(function(){i.getCurrentTime()},1e3),document.addEventListener("visibilitychange",function(){"hidden"===document.visibilityState&&(i.musicFlag=!1,i.lensMusicObj.currentTime=0,i.liveMusicObj.currentTime=0)})},watch:{$route:function(){}},methods:{showMoreInfo:function(i){$(i).hasClass("hide")?$(i).removeClass("hide"):$(i).addClass("hide")},initSwiper:function(){},switchVideo:function(i,e){this.playinit=2,clearTimeout(this.contabObj),$(".videoCover").fadeOut(),this.player.dispose(),this.VideoCoverImg="",$("#J_prismPlayer").empty(),this.play_status=1;var t=this;2==e?(t.play_status=2,t.aliplayer_config.autoplay=!1,t.aliplayer_config.source!=i.vurl_reback?(t.aliplayer_config.cover=i.reback_img,t.aliplayer_config.source=i.vurl_reback,t.VideoCoverImg=i.reback_img):(t.aliplayer_config.cover=i.spare_cover_url,t.aliplayer_config.source=i.spare_url,t.VideoCoverImg=i.spare_cover_url)):(t.VideoCoverImg=i.cover_img,t.aliplayer_config.cover=i.pic,t.aliplayer_config.source=i.vurl),-1!=t.aliplayer_config.source.indexOf(".m3u8")?(t.aliplayer_config.isLive=!0,t.aliplayer_config.autoplay=!1,t.aliplayer_config.rePlay=!1,t.play_status=1):(t.aliplayer_config.isLive=!1,t.aliplayer_config.autoplay=!1,t.aliplayer_config.rePlay=!0,t.play_status=2),t.currentVideo=i,t.aliplayer_config.id="J_prismPlayer",t.player=new Aliplayer(t.aliplayer_config),t.player.on("x5requestFullScreen",this.fullScreenHandle),t.player.on("x5cancelFullScreen",this.cancelFullScreenHandel),t.aliplayer_config.autoplay&&this.checkVideoPlayer(i),t.stopMUisc(),t.currentVideo=i,t.initMusic(),t.play_status},switchContent:function(i){$(".swiper-slide").each(function(e){e==i?$(this).addClass("cur"):$(this).removeClass("cur")}),$(".con").each(function(e){e==i?$(this).show():$(this).hide(),1==i?($(".shoppingCarBox").show(),$(".sendMessMenu").hide()):2==i?($(".sendMessMenu").show(),$(".shoppingCarBox").hide()):($(".shoppingCarBox").hide(),$(".sendMessMenu").hide())})},getData:function(){var i=this,e=new URLSearchParams;i.axiosPost("/room/info?id="+this.room_id,e).then(function(e){i.roomBasic.room_name=e.data.room_name,i.roomBasic.logo_img=e.data.logo_img,i.roomBasic.click_num=e.data.click_num,i.roomBasic.addr_url=e.data.addr_url,i.roomBasic.addr=e.data.addr,i.roomBasic.coordinate=e.data.coordinate,i.roomBasic.cover_img=e.data.cover_img,i.roomBasic.introduce=e.data.introduce,i.roomBasic.content=e.data.content,i.roomBasic.logo_pic=e.data.logo_img,i.roomBasic.title=e.data.title,i.roomBasic.sub_title=e.data.sub_title,i.roomBasic.intro=e.data.intro,i.roomBasic.start_num=e.data.start_num,i.roomBasic.online_url=e.data.online_url,i.roomBasic.online_cover=e.data.online_cover,i.roomBasic.mobile=e.data.mobile,i.$route.meta.title=e.data.room_name,i.deliver=e.data.deliver,i.roomBasic.cover_img&&(i.showCover=!0),i.WxShare(),i.$nextTick(function(){})},function(i){console.log(i)})},getLens:function(){var i=this,e=this,t=new URLSearchParams;e.axiosPost("/room/lens?id="+this.room_id,t).then(function(t){e.$vux.loading.hide(),200==t.status?(e.lens=t.data,-1!=e.lens[0].vurl.indexOf(".m3u8")?(e.aliplayer_config.isLive=!0,e.aliplayer_config.autoplay=!1,e.aliplayer_config.rePlay=!1,e.play_status=1,e.firstMusic=!0):(e.aliplayer_config.isLive=!1,e.aliplayer_config.autoplay=!1,e.aliplayer_config.rePlay=!0,e.play_status=2),e.VideoCoverImg=e.lens[0].cover_img,e.aliplayer_config.source=e.lens[0].vurl,e.aliplayer_config.cover=e.lens[0].pic,e.aliplayer_config.id="J_prismPlayer",console.log(e.play_status),e.player=new Aliplayer(e.aliplayer_config),e.player.on("x5requestFullScreen",i.fullScreenHandle),e.player.on("x5cancelFullScreen",i.cancelFullScreenHandel),e.aliplayer_config.autoplay&&e.checkVideoPlayer(e.lens[0]),e.currentVideo=e.lens[0],e.initMusic(),2==e.play_status&&e.playBgMusic()):i.$vux.alert.show({title:"温馨提示",content:t.message})},function(i){e.$vux.loading.hide()})},countPrice:function(i){this.total_price=i},tobuy:function(){var i=this;if(i.deliver>0&&parseInt(i.total_price)<parseInt(i.deliver))return this.$vux.alert.show({title:"温馨提示",content:"满"+i.deliver+"元起送，基地包邮到家"}),!1;this.$refs.product.buy_product(i.roomBasic.id,i.roomBasic.room_name,i.roomBasic.logo_pic,i.roomBasic.mobile)},subComment:function(){this.$refs.comment.setComment(this.comment)},clearParent:function(){this.comment=""},reload:function(){this.showComment=!1,this.$nextTick(function(){this.showComment=!0})},checkVideoPlayer:function(i){var e=this;e.contabObj=setTimeout(function(){e.player.getCurrentTime()<=0&&e.switchVideo(i,2)},3e3)},imgCover:function(){this.playing=1,$(".videoCover").css("z-index","-1 !important")},hideCoverImg:function(){this.roomBasic.cover_img&&this.showCover&&(this.showCover=!1)},WxShare:function(){var i=this,e=window.location.href,t=this,s=new URLSearchParams;s.append("open_id",this.openid),s.append("url",e),s.append("apis","chooseWXPay,onMenuShareTimeline,onMenuShareAppMessage"),t.axiosPost("/wechat/jssdk",s).then(function(e){t.$vux.loading.hide(),200==e.status?(t.$wechat.config(JSON.parse(e.data)),t.$wechat.ready(function(){2==t.play_status&&(t.musicFlag=!0,t.playBgMusic());var i=location.protocol+"//"+document.domain+"/front/#/room?room_id="+t.room_id;t.$wechat.onMenuShareAppMessage({title:t.roomBasic.title+" "+t.roomBasic.sub_title,desc:t.roomBasic.introduce,link:i,imgUrl:t.roomBasic.logo_img,success:function(){},cancel:function(){}}),t.$wechat.onMenuShareTimeline({title:t.roomBasic.title+" "+t.roomBasic.sub_title,link:i,imgUrl:t.roomBasic.logo_img,success:function(){},cancel:function(){}})})):i.$vux.alert.show({title:"温馨提示",content:"微信参数错误"})},function(i){t.$vux.loading.hide()})},initMusic:function(){this.musicFlag=!this.firstMusic,this.firstMusic=!1,this.lensMusicObj=document.getElementById("lens-music"),this.liveMusicObj=document.getElementById("live-music"),this.lensMusicObj&&(this.lensMusicObj.currentTime=0),this.liveMusicObj&&(this.liveMusicObj.currentTime=0)},playBgMusic:function(){if(this.liveCommon.checkAndroid())return!1;var i=this;i.musicFlag=!0,setTimeout(function(){i.liveMusicObj.play()},500)},playMusic:function(){if(this.liveCommon.checkAndroid())return!1;this.musicFlag?(this.musicFlag=!1,this.liveMusicObj.pause(),this.lensMusicObj.play()):(this.lensMusicObj.pause(),this.liveMusicObj.play(),this.musicFlag=!0)},getCurrentTime:function(){var i=new Date,e=i.getFullYear(),t=i.getMonth()+1<10?"0"+(i.getMonth()+1):i.getMonth()+1,s=i.getDate()<10?"0"+i.getDate():i.getDate(),a=i.getHours()<10?"0"+i.getHours():i.getHours(),o=i.getMinutes()<10?"0"+i.getMinutes():i.getMinutes(),n=i.getSeconds()<10?"0"+i.getSeconds():i.getSeconds();this.date=e+"-"+t+"-"+s+" "+a+":"+o+":"+n},goHome:function(){window.location.href=this.roomBasic.addr_url},fullScreenHandle:function(){this.musicFlag=!0,this.liveMusicObj.play(),this.player.tag.style.height=window.height},cancelFullScreenHandel:function(){console.log("stopMUisc")},stopMUisc:function(){this.musicFlag=!1,this.liveMusicObj.pause(),this.lensMusicObj.pause(),this.player.pause()},checkLogin:function(){if(!Di.a.get("uid"))return this.$vux.alert.show({title:"温馨提示",content:"请先登录"}),Di.a.set("refer","/room?room_id="+this.room_id,{path:"/",expires:7200}),this.$router.replace({path:"/auth"}),console.log("请先登录"),!1}}},Bt=function(){var i=this,e=i.$createElement,t=i._self._c||e;return t("div",{directives:[{name:"wechat-title",rawName:"v-wechat-title",value:i.$route.meta.title,expression:"$route.meta.title"}],staticClass:"room-info"},[t("div",{staticClass:"room-deader"},[t("div",{staticClass:"video",on:{click:i.imgCover}},[t("div",{staticClass:"prism-player",attrs:{id:"J_prismPlayer"}}),i._v(" "),t("div",{class:1==i.play_status&&1!=i.playing||1==i.playinit?"videoCover online_video":"videoCover outline_video"},[t("img",{attrs:{src:i.VideoCoverImg}})]),i._v(" "),i._m(0),i._v(" "),i.currentVideo.live_music&&!i.liveCommon.checkAndroid()?t("div",{staticClass:"live-music"},[t("div",{class:i.musicFlag?"live-music-icon active":"live-music-icon",on:{click:i.playMusic}})]):i._e(),i._v(" "),i.roomBasic.addr_url?t("div",{staticClass:"live-home-icon",on:{click:i.goHome}}):i._e(),i._v(" "),t("div",{staticClass:"live-view-icon"},[i._v("热度 "+i._s(i.roomBasic.click_num)+" 人")])]),i._v(" "),t("div",{staticClass:"live-music-detail"},[t("audio",{staticStyle:{display:"none"},attrs:{src:i.currentVideo.lens_music,loop:"loop",id:"lens-music"}}),i._v(" "),t("audio",{staticStyle:{display:"none"},attrs:{src:i.currentVideo.live_music,loop:"loop",id:"live-music"}})])]),i._v(" "),t("div",{staticClass:"live-room-main"},[t("div",{staticClass:"swiper-container gallery-thumbs"},[t("div",{staticClass:"swiper-wrapper tabMenu"},[t("div",{staticClass:"swiper-slide cur",on:{click:function(e){return i.switchContent(0)}}},[i._v("实时视频")]),i._v(" "),t("div",{staticClass:"swiper-slide",on:{click:function(e){return i.switchContent(1)}}},[i._v("生态商城")]),i._v(" "),t("div",{staticClass:"swiper-slide",on:{click:function(e){return i.switchContent(2)}}},[i._v("互动评论")]),i._v(" "),t("div",{staticClass:"swiper-slide",on:{click:function(e){return i.switchContent(3)}}},[i._v("精彩短片")])])]),i._v(" "),t("div",{staticClass:"live-room-content"},[t("div",{staticClass:"swiper-container gallery-top"},[t("div",{staticClass:"swiper-wrapper tabCon"},[t("div",{staticClass:"swiper-slide con"},[t("div",{staticClass:"swiper-container scroll"},[t("div",{staticClass:"swiper-wrapper"},[t("div",{staticClass:"swiper-slide slidescroll"},[t("h2",{staticClass:"tit videoIcon"},[i._v("溯源镜头")]),i._v(" "),t("div",{staticClass:"videoList swiper-no-swiping"},i._l(i.lens,function(e){return t("dl",{staticClass:"live-1",on:{click:function(t){return i.switchVideo(e,1)}}},[t("dt",[t("img",{attrs:{src:e.cover_img}})]),i._v(" "),t("dd",[i._v(i._s(e.name))])])}),0),i._v(" "),t("h2",{staticClass:"tit shopCarIcon"},[i._v("生态介绍")]),i._v(" "),t("div",{staticClass:"company"},[t("dl",[t("dt",[t("img",{attrs:{src:i.roomBasic.logo_img}})]),i._v(" "),t("dd",[t("h3",[t("strong",[i._v(i._s(i.roomBasic.title))]),i._v(i._s(i.roomBasic.sub_title))]),i._v(" "),t("p",[t("span",[i._v(i._s(i.roomBasic.intro))])])])]),i._v(" "),t("div",{staticClass:"remarks"},[t("span",[i._v("生态简介：")]),i._v(" "),t("p",{staticClass:"hide",nativeOn:{click:function(e){return i.showMoreInfo(this)}}},[i._v("\n                        "+i._s(i.roomBasic.introduce))])])]),i._v(" "),t("div",{staticClass:"room_content",domProps:{innerHTML:i._s(i.roomBasic.content)}},[i._v("\n                    "+i._s(i.roomBasic.content)+"\n                  ")])])])])]),i._v(" "),t("div",{staticClass:"swiper-slide con"},[t("div",{staticClass:"swiper-container scroll "},[t("div",{staticClass:"swiper-wrapper"},[t("div",{staticClass:"swiper-slide slidescroll"},[t("div",{staticClass:"my-order"},[t("router-link",{attrs:{to:{path:"orders"}}},[t("span",[i._v("我的订单>")])])],1),i._v(" "),t("h2",{staticClass:"tit shopCarIcon"},[i._v("生态商城")]),i._v(" "),t("div",{staticClass:"company"},[t("dl",[t("dt",[t("img",{attrs:{src:i.roomBasic.logo_img}})]),i._v(" "),t("dd",[t("h3",[t("strong",[i._v(i._s(i.roomBasic.title))]),i._v(i._s(i.roomBasic.sub_title))]),i._v(" "),t("p",[t("span",[i._v(i._s(i.roomBasic.intro))])])])]),i._v(" "),t("div",{staticClass:"remarks"},[t("span",[i._v("生态简介：")]),i._v(" "),t("p",{staticClass:"hide",nativeOn:{click:function(e){return i.showMoreInfo(this)}}},[i._v("\n                        "+i._s(i.roomBasic.introduce))])])]),i._v(" "),t("div",{staticClass:"shopList"},[t("product",{ref:"product",attrs:{room_id:i.room_id},on:{buy_price:i.countPrice}})],1)])])])]),i._v(" "),t("div",{staticClass:"swiper-slide con"},[t("div",{staticClass:"swiper-container scroll"},[t("div",{staticClass:"swiper-wrapper"},[t("div",{staticClass:"swiper-slide slidescroll"},[t("h2",{staticClass:"tit messIcon"},[i._v("互动评论")]),i._v(" "),i.showComment?t("comments",{ref:"comment",attrs:{room_id:i.room_id},on:{clearComment:i.clearParent}}):i._e()],1)])])]),i._v(" "),t("div",{staticClass:"swiper-slide con"},[t("div",{staticClass:"swiper-container scroll"},[t("div",{staticClass:"swiper-wrapper"},[t("div",{staticClass:"swiper-slide slidescroll"},[t("h2",{staticClass:"tit videoIcon"},[i._v("精彩短片")]),i._v(" "),t("div",{staticClass:"filmList"},[t("room-video",{attrs:{room_id:i.room_id}})],1),i._v(" "),i._m(1)])])])])])])])]),i._v(" "),t("div",{staticClass:"sendMessMenu",staticStyle:{display:"none"}},[t("div",{staticClass:"sendMessBox"},[t("input",{directives:[{name:"model",rawName:"v-model",value:i.comment,expression:"comment"}],attrs:{type:"text",value:"",placeholder:"输入评论内容..."},domProps:{value:i.comment},on:{input:[function(e){e.target.composing||(i.comment=e.target.value)},i.checkLogin]}}),i._v(" "),t("button",{on:{click:i.subComment}})])]),i._v(" "),t("div",{staticClass:"shoppingCarBox",staticStyle:{display:"none"}},[t("dl",[t("dt",[t("h4",[i._v("¥"+i._s(i.total_price))]),i._v(" "),0==i.deliver?t("p",[i._v("基地到家，全场免运费")]):t("p",[i._v("满"+i._s(i.deliver)+"元起送，基地包邮到家")])]),i._v(" "),t("dd",[t("a",{attrs:{href:"javascript:void(0)"},on:{click:i.tobuy}},[i._v("去结算")])])])]),i._v(" "),i.showCover?t("div",{staticClass:"liveHome",on:{click:i.hideCoverImg}},[t("img",{attrs:{src:i.roomBasic.cover_img}})]):i._e(),i._v(" "),t("remote-script",{attrs:{src:"https://g.alicdn.com/de/prismplayer/2.8.1/aliplayer-min.js"}})],1)},$t=[function(){var i=this,e=i.$createElement,s=i._self._c||e;return s("div",{staticClass:"logo"},[s("img",{attrs:{src:t("Z2Ou")}})])},function(){var i=this,e=i.$createElement,s=i._self._c||e;return s("div",{staticClass:"footerLogo"},[s("img",{attrs:{src:t("TPZN")}})])}],St={render:Bt,staticRenderFns:$t},kt=St,Mt=t("C7Lr"),Pt=g,Lt=Mt(xt,kt,!1,Pt,"data-v-08b185d5",null),It=Lt.exports,Ot={name:"room-common",components:{"room-video":at,Product:be,Comments:Ie},data:function(){return{contabObj:{},contentSwiper:{},currentVideo:{},playing:2,playinit:2,VideoCoverImg:"",showCover:!1,galleryTop:{},play_status:1,room_id:0,room_info:{},showComment:!0,comment:"",total_price:0,lens:{},player:{},deliver:0,aliplayer_config:{id:"J_prismPlayer",autoplay:!1,playsinline:!0,showBuffer:!0,isLive:!0,useH5Prism:!0,useFlashPrism:!1,x5_video_position:"normal",x5_type:"h5",source:"",cover:"",rePlay:!1,preload:!1,skinLayout:[{name:"bigPlayButton",align:"cc",x:30,y:80},{name:"H5Loading",align:"cc"},{name:"tooltip",align:"blabs",x:0,y:56},{name:"thumbnail"},{name:"controlBar",align:"blabs",x:0,y:0,children:[{name:"liveDisplay",align:"tlabs",x:15,y:6},{name:"progress",align:"blabs",x:0,y:44},{name:"playButton",align:"tl",x:15,y:12},{name:"timeDisplay",align:"tl",x:10,y:7},{name:"fullScreenButton",align:"tr",x:10,y:12}]}]},roomBasic:{room_name:"",start_num:"",title:"",sub_title:"",intro:"",click_num:"",introduce:"",content:"",cover_img:"",coordinate:"",addr_url:"",addr:"",logo_img:"",online_url:"",online_cover:"",mobile:""},firstMusic:!1,musicFlag:!1,lensMusicObj:"",liveMusicObj:"",showMusic:!0,isAndroid:!1,date:new Date}},provide:function(){return{reload:this.reload}},created:function(){var i=navigator.userAgent;this.isAndroid=i.indexOf("Android")>-1||i.indexOf("Adr")>-1,this.room_id=this.$route.query.room_id>0?this.$route.query.room_id:9,this.getData(),this.getLens(),localStorage.setItem("roomid",this.room_id)},mounted:function(){var i=this;$(".prism-big-play-btn").click(function(){$(".videoCover").fadeOut()}),setTimeout(i.initSwiper,1e3);var e=$(".prism-player").width();$(".prism-player").height(e/16*9),$("#J_prismPlayer").click(function(){i.playinit=2,i.checkVideoPlayer(i.currentVideo),i.musicFlag=!0,i.playBgMusic(),navigator.userAgent.match(/(phone|pad|pod|iPhone|iPod|ios|iPad|Android|Mobile|BlackBerry|IEMobile|MQQBrowser|JUC|Fennec|wOSBrowser|BrowserNG|WebOS|Symbian|Windows Phone)/i)}),$(".company .remarks p").click(function(){$(this).hasClass("hide")?$(this).removeClass("hide"):$(this).addClass("hide")}),i.isAndroid||(i.playinit=1),this.timer=setInterval(function(){i.getCurrentTime()},1e3),document.addEventListener("visibilitychange",function(){"hidden"===document.visibilityState&&(i.musicFlag=!1,i.lensMusicObj.currentTime=0,i.liveMusicObj.currentTime=0)})},watch:{$route:function(){}},methods:{showMoreInfo:function(i){$(i).hasClass("hide")?$(i).removeClass("hide"):$(i).addClass("hide")},initSwiper:function(){},switchVideo:function(i,e){this.playinit=2,clearTimeout(this.contabObj),$(".videoCover").fadeOut(),this.player.dispose(),this.VideoCoverImg="",$("#J_prismPlayer").empty(),this.play_status=1;var t=this;2==e?(t.play_status=2,t.aliplayer_config.autoplay=!1,t.aliplayer_config.source!=i.vurl_reback?(t.aliplayer_config.cover=i.reback_img,t.aliplayer_config.source=i.vurl_reback,t.VideoCoverImg=i.reback_img):(t.aliplayer_config.cover=i.spare_cover_url,t.aliplayer_config.source=i.spare_url,t.VideoCoverImg=i.spare_cover_url)):(t.VideoCoverImg=i.cover_img,t.aliplayer_config.cover=i.pic,t.aliplayer_config.source=i.vurl),-1!=t.aliplayer_config.source.indexOf(".m3u8")?(t.aliplayer_config.isLive=!0,t.aliplayer_config.autoplay=!1,t.aliplayer_config.rePlay=!1,t.play_status=1):(t.aliplayer_config.isLive=!1,t.aliplayer_config.autoplay=!1,t.aliplayer_config.rePlay=!0,t.play_status=2),t.aliplayer_config.autoplay&&this.checkVideoPlayer(i),t.currentVideo=i,t.aliplayer_config.id="J_prismPlayer",t.player=new Aliplayer(t.aliplayer_config),t.player.on("x5requestFullScreen",this.fullScreenHandle),t.player.on("x5cancelFullScreen",this.cancelFullScreenHandel),t.aliplayer_config.autoplay&&this.checkVideoPlayer(i),t.stopMUisc(),t.currentVideo=i,t.initMusic(),t.play_status},switchContent:function(i){$(".swiper-slide").each(function(e){e==i?$(this).addClass("cur"):$(this).removeClass("cur")}),$(".con").each(function(e){e==i?$(this).show():$(this).hide(),1==i?$(".sendMessMenu").show():$(".sendMessMenu").hide()})},getData:function(){var i=this,e=new URLSearchParams;i.axiosPost("/room/info?id="+this.room_id,e).then(function(e){i.roomBasic.room_name=e.data.room_name,i.roomBasic.logo_img=e.data.logo_img,i.roomBasic.click_num=e.data.click_num,i.roomBasic.addr_url=e.data.addr_url,i.roomBasic.addr=e.data.addr,i.roomBasic.coordinate=e.data.coordinate,i.roomBasic.cover_img=e.data.cover_img,i.roomBasic.introduce=e.data.introduce,i.roomBasic.content=e.data.content,i.roomBasic.logo_pic=e.data.logo_img,i.roomBasic.title=e.data.title,i.roomBasic.sub_title=e.data.sub_title,i.roomBasic.intro=e.data.intro,i.roomBasic.start_num=e.data.start_num,i.roomBasic.online_url=e.data.online_url,i.roomBasic.online_cover=e.data.online_cover,i.roomBasic.mobile=e.data.mobile,i.$route.meta.title=e.data.room_name,i.deliver=e.data.deliver,i.roomBasic.cover_img&&(i.showCover=!0),i.WxShare()},function(i){console.log(i)})},getLens:function(){var i=this,e=this,t=new URLSearchParams;e.axiosPost("/room/lens?id="+this.room_id,t).then(function(t){e.$vux.loading.hide(),200==t.status?(e.lens=t.data,-1!=e.lens[0].vurl.indexOf(".m3u8")?(e.aliplayer_config.isLive=!0,e.aliplayer_config.autoplay=!1,e.aliplayer_config.rePlay=!1,e.play_status=1,e.firstMusic=!0):(e.aliplayer_config.isLive=!1,e.aliplayer_config.autoplay=!1,e.aliplayer_config.rePlay=!0,e.play_status=2),e.VideoCoverImg=e.lens[0].cover_img,e.aliplayer_config.source=e.lens[0].vurl,e.aliplayer_config.cover=e.lens[0].pic,e.aliplayer_config.id="J_prismPlayer",console.log(e.play_status),e.player=new Aliplayer(e.aliplayer_config),e.player.on("x5requestFullScreen",i.fullScreenHandle),e.player.on("x5cancelFullScreen",i.cancelFullScreenHandel),e.aliplayer_config.autoplay&&e.checkVideoPlayer(e.lens[0]),e.currentVideo=e.lens[0],e.initMusic(),2==e.play_status&&e.playBgMusic()):i.$vux.alert.show({title:"温馨提示",content:t.message})},function(i){e.$vux.loading.hide()})},countPrice:function(i){this.total_price=i},tobuy:function(){var i=this;if(i.deliver>0&&parseInt(i.total_price)<parseInt(i.deliver))return this.$vux.alert.show({title:"温馨提示",content:"满"+i.deliver+"元起送，基地包邮到家"}),!1;this.$refs.product.buy_product(i.roomBasic.id,i.roomBasic.room_name,i.roomBasic.logo_pic,i.roomBasic.mobile)},subComment:function(){this.$refs.comment.setComment(this.comment)},clearParent:function(){this.comment=""},reload:function(){this.showComment=!1,this.$nextTick(function(){this.showComment=!0})},checkVideoPlayer:function(i){var e=this;e.contabObj=setTimeout(function(){e.player.getCurrentTime()<=0&&e.switchVideo(i,2)},3e3)},imgCover:function(){this.playing=1,$(".videoCover").css("z-index","-1 !important")},hideCoverImg:function(){this.roomBasic.cover_img&&this.showCover&&(this.showCover=!1)},WxShare:function(){var i=this,e=window.location.href,t=this,s=new URLSearchParams;s.append("open_id",this.openid),s.append("url",e),s.append("apis","chooseWXPay,onMenuShareTimeline,onMenuShareAppMessage"),t.axiosPost("/wechat/jssdk",s).then(function(e){t.$vux.loading.hide(),200==e.status?(t.$wechat.config(JSON.parse(e.data)),t.$wechat.ready(function(){2==t.play_status&&(t.musicFlag=!0,t.playBgMusic());var i=location.protocol+"//"+document.domain+"/front/#/room?room_id="+t.room_id;t.$wechat.onMenuShareAppMessage({title:t.roomBasic.title+" "+t.roomBasic.sub_title,desc:t.roomBasic.introduce,link:i,imgUrl:t.roomBasic.logo_img,success:function(){},cancel:function(){}}),t.$wechat.onMenuShareTimeline({title:t.roomBasic.title+" "+t.roomBasic.sub_title,link:i,imgUrl:t.roomBasic.logo_img,success:function(){},cancel:function(){}})})):i.$vux.alert.show({title:"温馨提示",content:"微信参数错误"})},function(i){t.$vux.loading.hide()})},initMusic:function(){this.musicFlag=!this.firstMusic,this.firstMusic=!1,this.lensMusicObj=document.getElementById("lens-music"),this.liveMusicObj=document.getElementById("live-music"),this.lensMusicObj&&(this.lensMusicObj.currentTime=0),this.liveMusicObj&&(this.liveMusicObj.currentTime=0)},playBgMusic:function(){if(this.liveCommon.checkAndroid())return!1;var i=this;i.musicFlag=!0,setTimeout(function(){i.liveMusicObj.play()},500)},playMusic:function(){if(this.liveCommon.checkAndroid())return!1;this.musicFlag?(this.musicFlag=!1,this.liveMusicObj.pause(),this.lensMusicObj.play()):(this.lensMusicObj.pause(),this.liveMusicObj.play(),this.musicFlag=!0)},getCurrentTime:function(){var i=new Date,e=i.getFullYear(),t=i.getMonth()+1<10?"0"+(i.getMonth()+1):i.getMonth()+1,s=i.getDate()<10?"0"+i.getDate():i.getDate(),a=i.getHours()<10?"0"+i.getHours():i.getHours(),o=i.getMinutes()<10?"0"+i.getMinutes():i.getMinutes(),n=i.getSeconds()<10?"0"+i.getSeconds():i.getSeconds();this.date=e+"-"+t+"-"+s+" "+a+":"+o+":"+n},goHome:function(){window.location.href=this.roomBasic.addr_url},fullScreenHandle:function(){this.musicFlag=!0,this.liveMusicObj.play(),this.player.tag.style.height=window.height},cancelFullScreenHandel:function(){console.log("stopMUisc")},stopMUisc:function(){this.musicFlag=!1,this.liveMusicObj.pause(),this.lensMusicObj.pause(),this.player.pause()},checkLogin:function(){if(!Di.a.get("uid"))return this.$vux.alert.show({title:"温馨提示",content:"请先登录"}),Di.a.set("refer","/room?room_id="+this.room_id,{path:"/",expires:7200}),this.$router.replace({path:"/auth"}),console.log("请先登录"),!1}}},Vt=function(){var i=this,e=i.$createElement,t=i._self._c||e;return t("div",{directives:[{name:"wechat-title",rawName:"v-wechat-title",value:i.$route.meta.title,expression:"$route.meta.title"}],staticClass:"room-info"},[t("div",{staticClass:"room-deader"},[t("div",{staticClass:"video",on:{click:i.imgCover}},[t("div",{staticClass:"prism-player",attrs:{id:"J_prismPlayer"}}),i._v(" "),t("div",{class:1==i.play_status&&1!=i.playing||1==i.playinit?"videoCover online_video":"videoCover outline_video"},[t("img",{attrs:{src:i.VideoCoverImg}})]),i._v(" "),i.currentVideo.live_music&&!i.liveCommon.checkAndroid()?t("div",{staticClass:"live-music"},[t("div",{class:i.musicFlag?"live-music-icon active":"live-music-icon",on:{click:i.playMusic}})]):i._e(),i._v(" "),i.roomBasic.addr_url?t("div",{staticClass:"live-home-icon",on:{click:i.goHome}}):i._e(),i._v(" "),t("div",{staticClass:"live-view-icon"},[i._v("热度 "+i._s(i.roomBasic.click_num)+" 人")])]),i._v(" "),t("div",{staticClass:"live-music-detail"},[t("audio",{staticStyle:{display:"none"},attrs:{src:i.currentVideo.lens_music,loop:"loop",id:"lens-music"}}),i._v(" "),t("audio",{staticStyle:{display:"none"},attrs:{src:i.currentVideo.live_music,loop:"loop",id:"live-music"}})])]),i._v(" "),t("div",{staticClass:"live-room-main"},[t("div",{staticClass:"swiper-container gallery-thumbs"},[t("div",{staticClass:"swiper-wrapper tabMenu"},[t("div",{staticClass:"swiper-slide cur",on:{click:function(e){return i.switchContent(0)}}},[i._v("实时视频")]),i._v(" "),t("div",{staticClass:"swiper-slide",on:{click:function(e){return i.switchContent(1)}}},[i._v("互动评论")]),i._v(" "),t("div",{staticClass:"swiper-slide",on:{click:function(e){return i.switchContent(2)}}},[i._v("精彩短片")])])]),i._v(" "),t("div",{staticClass:"live-room-content"},[t("div",{staticClass:"swiper-container gallery-top"},[t("div",{staticClass:"swiper-wrapper tabCon"},[t("div",{staticClass:"swiper-slide con"},[t("div",{staticClass:"swiper-container scroll"},[t("div",{staticClass:"swiper-wrapper"},[t("div",{staticClass:"swiper-slide slidescroll"},[t("h2",{staticClass:"tit videoIcon"},[i._v("实时镜头")]),i._v(" "),t("div",{staticClass:"videoList swiper-no-swiping"},i._l(i.lens,function(e){return t("dl",{staticClass:"live-1",on:{click:function(t){return i.switchVideo(e,1)}}},[t("dt",[t("img",{attrs:{src:e.cover_img}})]),i._v(" "),t("dd",[i._v(i._s(e.name))])])}),0),i._v(" "),t("h2",{staticClass:"tit shopCarIcon"},[i._v("详情介绍")]),i._v(" "),t("div",{staticClass:"company"},[t("dl",[t("dt",[t("img",{attrs:{src:i.roomBasic.logo_img}})]),i._v(" "),t("dd",[t("h3",[t("strong",[i._v(i._s(i.roomBasic.title))]),i._v(i._s(i.roomBasic.sub_title))]),i._v(" "),t("p",[t("span",[i._v(i._s(i.roomBasic.intro))])])])]),i._v(" "),t("div",{staticClass:"remarks"},[t("span",[i._v("生态简介：")]),i._v(" "),t("p",{staticClass:"hide",nativeOn:{click:function(e){return i.showMoreInfo(this)}}},[i._v("\n                        "+i._s(i.roomBasic.introduce))])])]),i._v(" "),t("div",{staticClass:"room_content",domProps:{innerHTML:i._s(i.roomBasic.content)}},[i._v("\n                    "+i._s(i.roomBasic.content)+"\n                  ")])])])])]),i._v(" "),t("div",{staticClass:"swiper-slide con"},[t("div",{staticClass:"swiper-container scroll"},[t("div",{staticClass:"swiper-wrapper"},[t("div",{staticClass:"swiper-slide slidescroll"},[t("h2",{staticClass:"tit messIcon"},[i._v("互动评论")]),i._v(" "),i.showComment?t("comments",{ref:"comment",attrs:{room_id:i.room_id},on:{clearComment:i.clearParent}}):i._e()],1)])])]),i._v(" "),t("div",{staticClass:"swiper-slide con"},[t("div",{staticClass:"swiper-container scroll"},[t("div",{staticClass:"swiper-wrapper"},[t("div",{staticClass:"swiper-slide slidescroll"},[t("h2",{staticClass:"tit videoIcon"},[i._v("精彩短片")]),i._v(" "),t("div",{staticClass:"filmList"},[t("room-video",{attrs:{room_id:i.room_id}})],1),i._v(" "),i._m(0)])])])])])])])]),i._v(" "),t("div",{staticClass:"sendMessMenu",staticStyle:{display:"none"}},[t("div",{staticClass:"sendMessBox"},[t("input",{directives:[{name:"model",rawName:"v-model",value:i.comment,expression:"comment"}],attrs:{type:"text",value:"",placeholder:"输入评论内容..."},domProps:{value:i.comment},on:{input:[function(e){e.target.composing||(i.comment=e.target.value)},i.checkLogin]}}),i._v(" "),t("button",{on:{click:i.subComment}})])]),i._v(" "),t("div",{staticClass:"shoppingCarBox",staticStyle:{display:"none"}},[t("dl",[t("dt",[t("h4",[i._v("¥"+i._s(i.total_price))]),i._v(" "),0==i.deliver?t("p",[i._v("基地到家，全场免运费")]):t("p",[i._v("满"+i._s(i.deliver)+"元起送，基地包邮到家")])]),i._v(" "),t("dd",[t("a",{attrs:{href:"javascript:void(0)"},on:{click:i.tobuy}},[i._v("去结算")])])])]),i._v(" "),i.showCover?t("div",{staticClass:"liveHome",on:{click:i.hideCoverImg}},[t("img",{attrs:{src:i.roomBasic.cover_img}})]):i._e(),i._v(" "),t("remote-script",{attrs:{src:"https://g.alicdn.com/de/prismplayer/2.8.1/aliplayer-min.js"}})],1)},At=[function(){var i=this,e=i.$createElement,s=i._self._c||e;return s("div",{staticClass:"footerLogo"},[s("img",{attrs:{src:t("TPZN")}})])}],Ft={render:Vt,staticRenderFns:At},jt=Ft,Tt=t("C7Lr"),Et=f,Rt=Tt(Ot,jt,!1,Et,"data-v-17755bb5",null),Dt=Rt.exports,Ut=t("X1H5"),Ht=t.n(Ut),Jt={name:"room-mini",components:{"room-video":at,Product:be,Comments:Ie},data:function(){return{contabObj:{},contentSwiper:{},currentVideo:{},playing:2,playinit:2,VideoCoverImg:"",showCover:!1,galleryTop:{},play_status:1,room_id:0,room_info:{},showComment:!0,comment:"",total_price:0,lens:{},player:{},deliver:0,aliplayer_config:{id:"J_prismPlayer",autoplay:!1,playsinline:!0,showBuffer:!0,isLive:!0,useH5Prism:!0,useFlashPrism:!1,x5_video_position:"normal",x5_type:"h5",source:"",cover:"",rePlay:!1,preload:!1,skinLayout:[{name:"bigPlayButton",align:"cc",x:30,y:80},{name:"H5Loading",align:"cc"},{name:"tooltip",align:"blabs",x:0,y:56},{name:"thumbnail"},{name:"controlBar",align:"blabs",x:0,y:0,children:[{name:"liveDisplay",align:"tlabs",x:15,y:6},{name:"progress",align:"blabs",x:0,y:44},{name:"playButton",align:"tl",x:15,y:12},{name:"timeDisplay",align:"tl",x:10,y:7},{name:"fullScreenButton",align:"tr",x:10,y:12}]}]},roomBasic:{room_name:"",start_num:"",title:"",sub_title:"",intro:"",click_num:"",introduce:"",content:"",cover_img:"",coordinate:"",addr_url:"",addr:"",logo_img:"",online_url:"",online_cover:"",mobile:""},firstMusic:!1,musicFlag:!1,lensMusicObj:"",liveMusicObj:"",showMusic:!0,isAndroid:!1,date:new Date}},provide:function(){return{reload:this.reload}},created:function(){var i=navigator.userAgent;this.isAndroid=i.indexOf("Android")>-1||i.indexOf("Adr")>-1,this.room_id=this.$route.query.room_id>0?this.$route.query.room_id:9,this.getData(),this.getLens(),localStorage.setItem("roomid",this.room_id)},mounted:function(){var i=this;$(".prism-big-play-btn").click(function(){$(".videoCover").fadeOut()}),i.isAndroid||(i.playinit=1),setTimeout(i.initSwiper,1e3);var e=$(".prism-player").width();$(".prism-player").height(e/16*9),$("#J_prismPlayer").click(function(){i.playinit=2,i.checkVideoPlayer(i.currentVideo),i.musicFlag=!0,i.playBgMusic(),$(".videoCover").attr("class"),navigator.userAgent.match(/(phone|pad|pod|iPhone|iPod|ios|iPad|Android|Mobile|BlackBerry|IEMobile|MQQBrowser|JUC|Fennec|wOSBrowser|BrowserNG|WebOS|Symbian|Windows Phone)/i)}),$(".company .remarks p").click(function(){$(this).hasClass("hide")?$(this).removeClass("hide"):$(this).addClass("hide")}),this.timer=setInterval(function(){i.getCurrentTime()},1e3),document.addEventListener("visibilitychange",function(){"hidden"===document.visibilityState&&(i.musicFlag=!1,i.lensMusicObj.pause(),i.liveMusicObj.pause(),i.player.pause())})},watch:{$route:function(){}},methods:{showMoreInfo:function(i){$(i).hasClass("hide")?$(i).removeClass("hide"):$(i).addClass("hide")},initSwiper:function(){},switchVideo:function(i,e){this.playinit=2,clearTimeout(this.contabObj),$(".videoCover").fadeOut(),this.player.dispose(),this.VideoCoverImg="",$("#J_prismPlayer").empty(),this.play_status=1;var t=this;2==e?(t.play_status=2,t.aliplayer_config.autoplay=!1,t.aliplayer_config.source!=i.vurl_reback?(t.aliplayer_config.cover=i.reback_img,t.aliplayer_config.source=i.vurl_reback,t.VideoCoverImg=i.reback_img):(t.aliplayer_config.cover=i.spare_cover_url,t.aliplayer_config.source=i.spare_url,t.VideoCoverImg=i.spare_cover_url)):(t.VideoCoverImg=i.cover_img,t.aliplayer_config.cover=i.pic,t.aliplayer_config.source=i.vurl),-1!=t.aliplayer_config.source.indexOf(".m3u8")?(t.aliplayer_config.isLive=!0,t.aliplayer_config.autoplay=!1,t.aliplayer_config.rePlay=!1,t.play_status=1):(t.aliplayer_config.isLive=!1,t.aliplayer_config.autoplay=!1,t.aliplayer_config.rePlay=!0,t.play_status=2),t.aliplayer_config.autoplay&&this.checkVideoPlayer(i),t.currentVideo=i,t.aliplayer_config.id="J_prismPlayer",t.player=new Aliplayer(t.aliplayer_config),t.player.on("x5requestFullScreen",this.fullScreenHandle),t.player.on("x5cancelFullScreen",this.cancelFullScreenHandel),t.aliplayer_config.autoplay&&this.checkVideoPlayer(i),t.stopMUisc(),t.currentVideo=i,t.initMusic()},switchContent:function(i){$(".swiper-slide").each(function(e){e==i?$(this).addClass("cur"):$(this).removeClass("cur")}),$(".con").each(function(e){e==i?$(this).show():$(this).hide(),1==i?$(".sendMessMenu").show():$(".sendMessMenu").hide()})},getData:function(){var i=this,e=new URLSearchParams;i.axiosPost("/room/info?id="+this.room_id,e).then(function(e){i.roomBasic.room_name=e.data.room_name,i.roomBasic.logo_img=e.data.logo_img,i.roomBasic.click_num=e.data.click_num,i.roomBasic.addr_url=e.data.addr_url,i.roomBasic.addr=e.data.addr,i.roomBasic.coordinate=e.data.coordinate,i.roomBasic.cover_img=e.data.cover_img,i.roomBasic.introduce=e.data.introduce,i.roomBasic.content=e.data.content,i.roomBasic.logo_pic=e.data.logo_img,i.roomBasic.title=e.data.title,i.roomBasic.sub_title=e.data.sub_title,i.roomBasic.intro=e.data.intro,i.roomBasic.start_num=e.data.start_num,i.roomBasic.online_url=e.data.online_url,i.roomBasic.online_cover=e.data.online_cover,i.roomBasic.mobile=e.data.mobile,i.$route.meta.title=e.data.room_name,i.deliver=e.data.deliver,i.roomBasic.cover_img&&(i.showCover=!0),i.WxShare(),i.$nextTick(function(){})},function(i){console.log(i)})},getLens:function(){var i=this,e=this,t=new URLSearchParams;e.axiosPost("/room/lens?id="+this.room_id,t).then(function(t){e.$vux.loading.hide(),200==t.status?(e.lens=t.data,-1!=e.lens[0].vurl.indexOf(".m3u8")?(e.aliplayer_config.isLive=!0,e.aliplayer_config.autoplay=!1,e.aliplayer_config.rePlay=!1,e.play_status=1,e.firstMusic=!0):(e.aliplayer_config.isLive=!1,e.aliplayer_config.autoplay=!1,e.aliplayer_config.rePlay=!0,e.play_status=2),e.VideoCoverImg=e.lens[0].cover_img,e.aliplayer_config.source=e.lens[0].vurl,e.aliplayer_config.cover=e.lens[0].pic,e.aliplayer_config.id="J_prismPlayer",console.log(e.play_status),e.player=new Aliplayer(e.aliplayer_config),e.player.on("x5requestFullScreen",i.fullScreenHandle),e.player.on("x5cancelFullScreen",i.cancelFullScreenHandel),e.aliplayer_config.autoplay&&e.checkVideoPlayer(e.lens[0]),e.currentVideo=e.lens[0],e.initMusic()):i.$vux.alert.show({title:"温馨提示",content:t.message})},function(i){e.$vux.loading.hide()})},countPrice:function(i){this.total_price=i},tobuy:function(){var i=this;if(i.deliver>0&&parseInt(i.total_price)<parseInt(i.deliver))return this.$vux.alert.show({title:"温馨提示",content:"满"+i.deliver+"元起送，基地包邮到家"}),!1;this.$refs.product.buy_product(i.roomBasic.id,i.roomBasic.room_name,i.roomBasic.logo_pic,i.roomBasic.mobile)},subComment:function(){this.$refs.comment.setComment(this.comment)},clearParent:function(){this.comment=""},reload:function(){this.showComment=!1,this.$nextTick(function(){this.showComment=!0})},checkVideoPlayer:function(i){var e=this;e.contabObj=setTimeout(function(){e.player.getCurrentTime()<=0&&e.switchVideo(i,2)},3e3)},imgCover:function(){this.playing=1,$(".videoCover").css("z-index","-1 !important")},hideCoverImg:function(){this.roomBasic.cover_img&&this.showCover&&(this.showCover=!1)},WxShare:function(){var i=this,e=window.location.href,t=this,s=new URLSearchParams;s.append("open_id",this.openid),s.append("url",e),s.append("apis","chooseWXPay,onMenuShareTimeline,onMenuShareAppMessage");var a=location.protocol+"//"+document.domain+"/front/#/room?room_id="+t.room_id;Ht.a.miniProgram.postMessage({data:{title:t.roomBasic.title+" "+t.roomBasic.sub_title,desc:t.roomBasic.introduce,link:a,roomId:t.room_id}}),t.axiosPost("/wechat/jssdk",s).then(function(e){t.$vux.loading.hide(),200==e.status?(t.$wechat.config(JSON.parse(e.data)),t.$wechat.ready(function(){t.$wechat.onMenuShareAppMessage({title:t.roomBasic.title+" "+t.roomBasic.sub_title,desc:t.roomBasic.introduce,link:a,imgUrl:t.roomBasic.logo_img,success:function(){},cancel:function(){}}),t.$wechat.onMenuShareTimeline({title:t.roomBasic.title+" "+t.roomBasic.sub_title,link:a,imgUrl:t.roomBasic.logo_img,success:function(){},cancel:function(){}})})):i.$vux.alert.show({title:"温馨提示",content:"微信参数错误"})},function(i){t.$vux.loading.hide()})},initMusic:function(){this.musicFlag=!this.firstMusic,this.firstMusic=!1,this.lensMusicObj=document.getElementById("lens-music"),this.liveMusicObj=document.getElementById("live-music"),this.lensMusicObj.currentTime=0,this.liveMusicObj.currentTime=0},playBgMusic:function(){var i=this;i.musicFlag=!0,setTimeout(function(){i.liveMusicObj.play()},500)},playMusic:function(){this.musicFlag?(this.musicFlag=!1,this.liveMusicObj.pause(),this.lensMusicObj.play()):(this.lensMusicObj.pause(),this.liveMusicObj.play(),this.musicFlag=!0)},getCurrentTime:function(){var i=new Date,e=i.getFullYear(),t=i.getMonth()+1<10?"0"+(i.getMonth()+1):i.getMonth()+1,s=i.getDate()<10?"0"+i.getDate():i.getDate(),a=i.getHours()<10?"0"+i.getHours():i.getHours(),o=i.getMinutes()<10?"0"+i.getMinutes():i.getMinutes(),n=i.getSeconds()<10?"0"+i.getSeconds():i.getSeconds();this.date=e+"-"+t+"-"+s+" "+a+":"+o+":"+n},goHome:function(){this.$router.replace({path:"/"})},fullScreenHandle:function(){},cancelFullScreenHandel:function(){console.log("stopMUisc")},stopMUisc:function(){this.musicFlag=!1,this.liveMusicObj.pause(),this.lensMusicObj.pause(),this.player.pause()},checkLogin:function(){if(!Di.a.get("uid"))return this.$vux.alert.show({title:"温馨提示",content:"请先登录"}),Di.a.set("refer","/room?room_id="+this.room_id,{path:"/",expires:7200}),this.$router.replace({path:"/auth"}),console.log("请先登录"),!1}}},Nt=function(){var i=this,e=i.$createElement,t=i._self._c||e;return t("div",{directives:[{name:"wechat-title",rawName:"v-wechat-title",value:i.$route.meta.title,expression:"$route.meta.title"}],staticClass:"room-info"},[t("div",{staticClass:"room-deader"},[t("div",{staticClass:"video",on:{click:i.imgCover}},[t("div",{staticClass:"prism-player",attrs:{id:"J_prismPlayer"}}),i._v(" "),t("div",{class:1==i.play_status&&1!=i.playing||1==i.playinit?"videoCover online_video":"videoCover outline_video"},[t("img",{attrs:{src:i.VideoCoverImg}})]),i._v(" "),i._m(0),i._v(" "),i.currentVideo.live_music?t("div",{staticClass:"live-music"},[t("div",{class:i.musicFlag?"live-music-icon active":"live-music-icon",on:{click:i.playMusic}})]):i._e(),i._v(" "),t("div",{staticClass:"live-home-icon",on:{click:i.goHome}}),i._v(" "),t("div",{staticClass:"live-view-icon"},[i._v("热度 "+i._s(i.roomBasic.click_num)+" 人")])]),i._v(" "),t("div",{staticClass:"live-music-detail"},[t("audio",{staticStyle:{display:"none"},attrs:{src:i.currentVideo.lens_music,loop:"loop",id:"lens-music"}}),i._v(" "),t("audio",{staticStyle:{display:"none"},attrs:{src:i.currentVideo.live_music,loop:"loop",id:"live-music"}})])]),i._v(" "),t("div",{staticClass:"live-room-main"},[t("div",{staticClass:"swiper-container gallery-thumbs"},[t("div",{staticClass:"swiper-wrapper tabMenu"},[t("div",{staticClass:"swiper-slide cur",on:{click:function(e){return i.switchContent(0)}}},[i._v("实时视频")]),i._v(" "),t("div",{staticClass:"swiper-slide",on:{click:function(e){return i.switchContent(1)}}},[i._v("互动评论")]),i._v(" "),t("div",{staticClass:"swiper-slide",on:{click:function(e){return i.switchContent(2)}}},[i._v("精彩短片")])])]),i._v(" "),t("div",{staticClass:"live-room-content"},[t("div",{staticClass:"swiper-container gallery-top"},[t("div",{staticClass:"swiper-wrapper tabCon"},[t("div",{staticClass:"swiper-slide con"},[t("div",{staticClass:"swiper-container scroll"},[t("div",{staticClass:"swiper-wrapper"},[t("div",{staticClass:"swiper-slide slidescroll"},[t("h2",{staticClass:"tit videoIcon"},[i._v("实时镜头")]),i._v(" "),t("div",{staticClass:"videoList swiper-no-swiping"},i._l(i.lens,function(e){return t("dl",{staticClass:"live-1",on:{click:function(t){return i.switchVideo(e,1)}}},[t("dt",[t("img",{attrs:{src:e.cover_img}})]),i._v(" "),t("dd",[i._v(i._s(e.name))])])}),0),i._v(" "),t("h2",{staticClass:"tit shopCarIcon"},[i._v("详情介绍")]),i._v(" "),t("div",{staticClass:"company"},[t("dl",[t("dt",[t("img",{attrs:{src:i.roomBasic.logo_img}})]),i._v(" "),t("dd",[t("h3",[t("strong",[i._v(i._s(i.roomBasic.title))]),i._v(i._s(i.roomBasic.sub_title))]),i._v(" "),t("p",[t("span",[i._v(i._s(i.roomBasic.intro))])])])]),i._v(" "),t("div",{staticClass:"remarks"},[t("span",[i._v("生态简介：")]),i._v(" "),t("p",{staticClass:"hide",nativeOn:{click:function(e){return i.showMoreInfo(this)}}},[i._v("\n                        "+i._s(i.roomBasic.introduce))])])]),i._v(" "),t("div",{staticClass:"room_content",domProps:{innerHTML:i._s(i.roomBasic.content)}},[i._v("\n                    "+i._s(i.roomBasic.content)+"\n                  ")])])])])]),i._v(" "),t("div",{staticClass:"swiper-slide con"},[t("div",{staticClass:"swiper-container scroll"},[t("div",{staticClass:"swiper-wrapper"},[t("div",{staticClass:"swiper-slide slidescroll"},[t("h2",{staticClass:"tit messIcon"},[i._v("互动评论")]),i._v(" "),i.showComment?t("comments",{ref:"comment",attrs:{room_id:i.room_id},on:{clearComment:i.clearParent}}):i._e()],1)])])]),i._v(" "),t("div",{staticClass:"swiper-slide con"},[t("div",{staticClass:"swiper-container scroll"},[t("div",{staticClass:"swiper-wrapper"},[t("div",{staticClass:"swiper-slide slidescroll"},[t("h2",{staticClass:"tit videoIcon"},[i._v("精彩短片")]),i._v(" "),t("div",{staticClass:"filmList"},[t("room-video",{attrs:{room_id:i.room_id}})],1),i._v(" "),i._m(1)])])])])])])])]),i._v(" "),t("div",{staticClass:"sendMessMenu",staticStyle:{display:"none"}},[t("div",{staticClass:"sendMessBox"},[t("input",{directives:[{name:"model",rawName:"v-model",value:i.comment,expression:"comment"}],attrs:{type:"text",value:"",placeholder:"输入评论内容..."},domProps:{value:i.comment},on:{input:[function(e){e.target.composing||(i.comment=e.target.value)},i.checkLogin]}}),i._v(" "),t("button",{on:{click:i.subComment}})])]),i._v(" "),t("div",{staticClass:"shoppingCarBox",staticStyle:{display:"none"}},[t("dl",[t("dt",[t("h4",[i._v("¥"+i._s(i.total_price))]),i._v(" "),0==i.deliver?t("p",[i._v("基地到家，全场免运费")]):t("p",[i._v("满"+i._s(i.deliver)+"元起送，基地包邮到家")])]),i._v(" "),t("dd",[t("a",{attrs:{href:"javascript:void(0)"},on:{click:i.tobuy}},[i._v("去结算")])])])]),i._v(" "),i.showCover?t("div",{staticClass:"liveHome",on:{click:i.hideCoverImg}},[t("img",{attrs:{src:i.roomBasic.cover_img}})]):i._e(),i._v(" "),t("remote-script",{attrs:{src:"https://g.alicdn.com/de/prismplayer/2.8.1/aliplayer-min.js"}})],1)},qt=[function(){var i=this,e=i.$createElement,s=i._self._c||e;return s("div",{staticClass:"logo"},[s("img",{attrs:{src:t("Z2Ou")}})])},function(){var i=this,e=i.$createElement,s=i._self._c||e;return s("div",{staticClass:"footerLogo"},[s("img",{attrs:{src:t("TPZN")}})])}],Wt={render:Nt,staticRenderFns:qt},Zt=Wt,Gt=t("C7Lr"),Kt=y,zt=Gt(Jt,Zt,!1,Kt,"data-v-631b08be",null),Qt=zt.exports,Yt=t("fRcE"),Xt=t("uiKT"),is={name:"ArticleList",props:["room_id"],data:function(){return{articleList:[],page:1}},created:function(){this.getArticleList()},mounted:function(){var i=this;$(function(){$(window).scroll(function(){var e=$(this).scrollTop(),t=$(document).height();e+$(this).height()>=t&&!i.loadding&&!i.roomEnd&&i.getArticleList()})})},methods:{getArticleList:function(){var i=this;i.loadding=!0;var e=new URLSearchParams;e.append("page",i.page),e.append("room_id",i.room_id),i.axiosPost("/room/article",e).then(function(e){i.loadding=!1,i.$vux.loading.hide(),200==e.status?e.data.length>0?(e.data.forEach(function(e,t){i.articleList.push(e)}),i.page++):i.roomEnd=!0:i.$vux.alert.show({title:"温馨提示",content:e.message})},function(e){i.$vux.loading.hide()})},goArticle:function(i){this.$router.push({path:"/article",query:{room_id:i.room_id,aid:i.id,from:"groupmessage",isappinstalled:0}})}}},es=function(){var i=this,e=i.$createElement,t=i._self._c||e;return t("div",{staticClass:"article-list"},i._l(i.articleList,function(e,s){return t("div",{staticClass:"article-item",on:{click:function(t){return i.goArticle(e)}}},[t("div",{staticClass:"title"},[t("span",{staticClass:"spot"},[i._v("·")]),i._v(i._s(e.title)+"\n    ")]),i._v(" "),t("div",{staticClass:"cover"},[t("img",{attrs:{src:e.pic_path}})]),i._v(" "),t("div",{staticClass:"date"},[t("span",[i._v(i._s(e.created_at))])])])}),0)},ts=[],ss={render:es,staticRenderFns:ts},as=ss,os=t("C7Lr"),ns=C,rs=os(is,as,!1,ns,"data-v-05875fe9",null),ls=rs.exports,cs=(Yt.a,Xt.a,{name:"snapshot",components:{"room-video":at,Product:be,Comments:Ie,XDialog:Yt.a,ArticleList:ls},directives:{TransferDom:Xt.a},data:function(){return{bannerList:[],contabObj:{},contentSwiper:{},currentVideo:{},playing:2,playinit:2,VideoCoverImg:"",showCover:!1,galleryTop:{},play_status:1,room_id:0,room_info:{},showComment:!0,comment:"",total_price:0,lens:{},player:{},deliver:0,aliplayer_config:{id:"J_prismPlayer",autoplay:!1,playsinline:!0,showBuffer:!0,isLive:!0,useH5Prism:!0,useFlashPrism:!1,x5_video_position:"normal",x5_type:"video",source:"",cover:"",rePlay:!1,preload:!1,skinLayout:[{name:"bigPlayButton",align:"cc",x:30,y:80},{name:"H5Loading",align:"cc"},{name:"tooltip",align:"blabs",x:0,y:56},{name:"thumbnail"},{name:"controlBar",align:"blabs",x:0,y:0,children:[{name:"liveDisplay",align:"tlabs",x:15,y:6},{name:"progress",align:"blabs",x:0,y:44},{name:"playButton",align:"tl",x:15,y:12},{name:"timeDisplay",align:"tl",x:10,y:7},{name:"fullScreenButton",align:"tr",x:10,y:12}]}]},roomBasic:{room_name:"",start_num:"",title:"",sub_title:"",intro:"",click_num:"",introduce:"",content:"",cover_img:"",coordinate:"",addr_url:"",addr:"",logo_img:"",online_url:"",online_cover:"",mobile:""},firstMusic:!1,musicFlag:!1,lensMusicObj:"",liveMusicObj:"",showMusic:!0,isAndroid:!1,date:new Date,imageDialog:!0,dialogInfo:{link:"",type:1,showDialog:!1},snapshotList:[],videoList:[],videoLensId:0,videoPage:1,player2:{},roomEnd:!1,findex:"shop",showExtContent:!1,footer:[{fname:"shop",fclass:"live-foot-shop",ftext:"基地商城",path:""},{fname:"comment",fclass:"live-foot-video",ftext:"互动评论",path:""},{fname:"article",fclass:"live-foot-user",ftext:"新闻中心",path:""}]}},provide:function(){return{reload:this.reload}},created:function(){var i=navigator.userAgent;this.isAndroid=i.indexOf("Android")>-1||i.indexOf("Adr")>-1,this.room_id=this.$route.query.room_id,this.getBanner(),this.getData(),this.getLens(),this.getSnapshot(),localStorage.setItem("roomid",this.room_id)},mounted:function(){var i=this;$(".prism-big-play-btn").click(function(){$(".videoCover").fadeOut()}),setTimeout(i.initSwiper,1e3);var e=$(".prism-player").width();$(".prism-player").height(e/16*9),i.isAndroid||(i.playinit=1),$("#J_prismPlayer").click(function(){i.playinit=2,i.checkVideoPlayer(i.currentVideo),i.musicFlag=!0,i.playBgMusic(),console.log(i.player),navigator.userAgent.match(/(phone|pad|pod|iPhone|iPod|ios|iPad|Android|Mobile|BlackBerry|IEMobile|MQQBrowser|JUC|Fennec|wOSBrowser|BrowserNG|WebOS|Symbian|Windows Phone)/i)}),$(".company .remarks p").click(function(){$(this).hasClass("hide")?$(this).removeClass("hide"):$(this).addClass("hide")}),this.timer=setInterval(function(){i.getCurrentTime()},1e3),document.addEventListener("visibilitychange",function(){"hidden"===document.visibilityState&&(i.musicFlag=!1,i.lensMusicObj.currentTime=0,i.liveMusicObj.currentTime=0)}),$(function(){var e=$("#tabMenu").offset().top+150;$(window).scroll(function(){var t=$(this).scrollTop();t>=e?$("#tabMenu").addClass("fix-tab-menu"):t<e&&$("#tabMenu").removeClass("fix-tab-menu");var s=$(this).scrollTop(),a=$(document).height();s+$(this).height()>=a&&!i.loadding&&!i.roomEnd&&i.getVideoList()}),i.switchContent(0),setTimeout(function(){i.$previewRefresh()},1e3)}),document.querySelector("body").setAttribute("style","background-color:#F3F4F6")},watch:{$route:function(){}},methods:{getBanner:function(){var i=this,e=new URLSearchParams;e.append("id",this.room_id),i.axiosPost("/room/banner",e).then(function(e){i.bannerList=e.data.banner})},showMoreInfo:function(i){$(i).hasClass("hide")?$(i).removeClass("hide"):$(i).addClass("hide")},initSwiper:function(){new Swiper(".banner",{loop:!0,pagination:{el:".swiper-pagination",type:"bullets",bulletActiveClass:"live-banner-active"},autoplay:{delay:3e3,stopOnLastSlide:!1,disableOnInteraction:!0}})},switchVideo:function(i,e){this.playinit=2,clearTimeout(this.contabObj),$(".videoCover").fadeOut(),this.player.dispose(),this.VideoCoverImg="",$("#J_prismPlayer").empty(),this.play_status=1;var t=this;2==e?(t.play_status=2,t.aliplayer_config.autoplay=!1,t.aliplayer_config.source!=i.vurl_reback?(t.aliplayer_config.cover=i.reback_img,t.aliplayer_config.source=i.vurl_reback,t.VideoCoverImg=i.reback_img):(t.aliplayer_config.cover=i.spare_cover_url,t.aliplayer_config.source=i.spare_url,t.VideoCoverImg=i.spare_cover_url)):(t.VideoCoverImg=i.cover_img,t.aliplayer_config.cover=i.pic,t.aliplayer_config.source=i.vurl),-1!=t.aliplayer_config.source.indexOf(".m3u8")?(t.aliplayer_config.isLive=!0,t.aliplayer_config.autoplay=!1,t.aliplayer_config.rePlay=!1,t.play_status=1):(t.aliplayer_config.isLive=!1,t.aliplayer_config.autoplay=!1,t.aliplayer_config.rePlay=!0,t.play_status=2),t.currentVideo=i,t.aliplayer_config.id="J_prismPlayer",t.player=new Aliplayer(t.aliplayer_config),t.player.on("x5requestFullScreen",this.fullScreenHandle),t.player.on("x5cancelFullScreen",this.cancelFullScreenHandel),t.aliplayer_config.autoplay&&this.checkVideoPlayer(i),t.stopMUisc(),t.currentVideo=i,t.initMusic()},switchContent:function(i){this.showExtContent=!1,$(".tabMenu .swiper-slide").each(function(e){e==i?$(this).addClass("cur"):$(this).removeClass("cur")}),$(".con").each(function(e){e==i?$(this).show():$(this).hide()})},getData:function(){var i=this,e=new URLSearchParams;i.axiosPost("/room/info?id="+this.room_id,e).then(function(e){i.roomBasic.room_name=e.data.room_name,i.roomBasic.logo_img=e.data.logo_img,i.roomBasic.click_num=e.data.click_num,i.roomBasic.addr_url=e.data.addr_url,i.roomBasic.addr=e.data.addr,i.roomBasic.coordinate=e.data.coordinate,i.roomBasic.cover_img=e.data.cover_img,i.roomBasic.introduce=e.data.introduce,i.roomBasic.content=e.data.content,i.roomBasic.logo_pic=e.data.logo_img,i.roomBasic.title=e.data.title,i.roomBasic.sub_title=e.data.sub_title,i.roomBasic.intro=e.data.intro,i.roomBasic.start_num=e.data.start_num,i.roomBasic.online_url=e.data.online_url,i.roomBasic.online_cover=e.data.online_cover,i.roomBasic.mobile=e.data.mobile,i.$route.meta.title=e.data.room_name,i.deliver=e.data.deliver,i.roomBasic.cover_img&&(i.showCover=!0),i.WxShare()},function(i){console.log(i)})},getLens:function(){var i=this,e=this,t=new URLSearchParams;e.axiosPost("/room/lens?id="+this.room_id,t).then(function(t){if(e.$vux.loading.hide(),200==t.status){e.lens=t.data,-1!=e.lens[0].vurl.indexOf(".m3u8")?(e.aliplayer_config.isLive=!0,e.aliplayer_config.autoplay=!1,e.aliplayer_config.rePlay=!1,e.play_status=1,e.firstMusic=!0):(e.aliplayer_config.isLive=!1,e.aliplayer_config.autoplay=!1,e.aliplayer_config.rePlay=!0,e.play_status=2),e.VideoCoverImg=e.lens[0].cover_img,e.aliplayer_config.source=e.lens[0].vurl,e.aliplayer_config.cover=e.lens[0].pic,e.aliplayer_config.id="J_prismPlayer",e.player=new Aliplayer(e.aliplayer_config),e.player.on("x5requestFullScreen",i.fullScreenHandle),e.player.on("x5cancelFullScreen",i.cancelFullScreenHandel),e.aliplayer_config.autoplay&&e.checkVideoPlayer(e.lens[0]);for(var s in e.lens)if("lens"==e.lens[s].source_type){e.videoLensId=e.lens[s].aid,e.getVideoList();break}e.currentVideo=e.lens[0],e.initMusic()}else i.$vux.alert.show({title:"温馨提示",content:t.message})},function(i){e.$vux.loading.hide()})},countPrice:function(i){this.total_price=i},tobuy:function(){var i=this;if(i.deliver>0&&parseInt(i.total_price)<parseInt(i.deliver))return this.$vux.alert.show({title:"温馨提示",content:"满"+i.deliver+"元起送，基地包邮到家"}),!1;this.$refs.product.buy_product(i.roomBasic.id,i.roomBasic.room_name,i.roomBasic.logo_pic,i.roomBasic.mobile)},subComment:function(){this.$refs.comment.setComment(this.comment)},clearParent:function(){this.comment=""},reload:function(){this.showComment=!1,this.$nextTick(function(){this.showComment=!0})},checkVideoPlayer:function(i){var e=this;e.contabObj=setTimeout(function(){e.player.getCurrentTime()<=0&&e.switchVideo(i,2)},3e3)},imgCover:function(){this.playing=1,$(".videoCover").css("z-index","-1 !important")},hideCoverImg:function(){this.roomBasic.cover_img&&this.showCover&&(this.showCover=!1)},WxShare:function(){var i=this,e=window.location.href,t=this,s=new URLSearchParams;s.append("open_id",this.openid),s.append("url",e),s.append("apis","chooseWXPay,onMenuShareTimeline,onMenuShareAppMessage"),t.axiosPost("/wechat/jssdk",s).then(function(e){t.$vux.loading.hide(),200==e.status?(t.$wechat.config(JSON.parse(e.data)),t.$wechat.ready(function(){var i=location.protocol+"//"+document.domain+"/front/#/room?room_id="+t.room_id;t.$wechat.onMenuShareAppMessage({title:t.roomBasic.title+" "+t.roomBasic.sub_title,desc:t.roomBasic.introduce,link:i,imgUrl:t.roomBasic.logo_img,success:function(){},cancel:function(){}}),t.$wechat.onMenuShareTimeline({title:t.roomBasic.title+" "+t.roomBasic.sub_title,link:i,imgUrl:t.roomBasic.logo_img,success:function(){},cancel:function(){}})})):i.$vux.alert.show({title:"温馨提示",content:"微信参数错误"})},function(i){t.$vux.loading.hide()})},initMusic:function(){this.musicFlag=!this.firstMusic,this.firstMusic=!1,this.lensMusicObj=document.getElementById("lens-music"),this.liveMusicObj=document.getElementById("live-music"),this.lensMusicObj&&(this.lensMusicObj.currentTime=0),this.liveMusicObj&&(this.liveMusicObj.currentTime=0)},playBgMusic:function(){if(this.liveCommon.checkAndroid())return!1;var i=this;i.musicFlag=!0,setTimeout(function(){i.liveMusicObj&&i.liveMusicObj.play()},500)},playMusic:function(){if(this.liveCommon.checkAndroid())return!1;this.musicFlag?(this.musicFlag=!1,this.liveMusicObj.pause(),this.lensMusicObj.play()):(this.lensMusicObj.pause(),this.liveMusicObj.play(),this.musicFlag=!0)},getCurrentTime:function(){var i=new Date,e=i.getFullYear(),t=i.getMonth()+1<10?"0"+(i.getMonth()+1):i.getMonth()+1,s=i.getDate()<10?"0"+i.getDate():i.getDate(),a=i.getHours()<10?"0"+i.getHours():i.getHours(),o=i.getMinutes()<10?"0"+i.getMinutes():i.getMinutes(),n=i.getSeconds()<10?"0"+i.getSeconds():i.getSeconds();this.date=e+"-"+t+"-"+s+" "+a+":"+o+":"+n},goHome:function(){this.$router.replace({path:"/"})},fullScreenHandle:function(){},cancelFullScreenHandel:function(){},stopMUisc:function(){this.musicFlag=!1,this.liveMusicObj.pause(),this.lensMusicObj.pause(),this.player.pause()},checkLogin:function(){if(!Di.a.get("uid"))return this.$vux.alert.show({title:"温馨提示",content:"请先登录"}),Di.a.set("refer","/room?room_id="+this.room_id,{path:"/",expires:7200}),this.$router.replace({path:"/auth"}),console.log("请先登录"),!1},getVideoList:function(){var i=this;i.loadding=!0;var e=new URLSearchParams;e.append("page",i.videoPage),e.append("id",i.room_id),e.append("sid",i.videoLensId),i.axiosPost("/room/source-video",e).then(function(e){i.loadding=!1,i.$vux.loading.hide(),200==e.status?e.data.length>0?(e.data.forEach(function(e,t){i.videoList.push(e)}),i.videoPage++):i.roomEnd=!0:i.$vux.alert.show({title:"温馨提示",content:e.message})},function(e){i.$vux.loading.hide()})},changeVideo:function(i){this.videoLensId=i.aid,this.videoList=[],this.videoPage=1,this.getVideoList()},getSnapshot:function(){var i=this;i.loadding=!0;var e=new URLSearchParams;e.append("page",i.snapshotPage),e.append("id",i.room_id),i.axiosPost("/room/snapshot",e).then(function(e){i.loadding=!1,i.$vux.loading.hide(),200==e.status?e.data.length>0?(e.data.forEach(function(e,t){i.snapshotList.push(e)}),i.snapshotPage++):i.roomEnd=!0:i.$vux.alert.show({title:"温馨提示",content:e.message})},function(e){i.$vux.loading.hide()})},showDialog:function(i,e){this.dialogInfo.link=i,this.dialogInfo.type=e,this.dialogInfo.showDialog=!0},hideDialog:function(){},showVideoDialog:function(i){this.VideoCoverImg="",$("#player2").empty();var e=this,t={id:"player2",source:i,cover:"https://yc.adaxiang.com/front/static/images/video_load.gif",width:"100%",height:"100%",autoplay:!1,isLive:!1,rePlay:!1,playsinline:!0,preload:!1,controlBarVisibility:"hover",useH5Prism:!0,x5_type:"video",skinLayout:[{name:"controlBar",align:"blabs",x:0,y:0,children:[{name:"progress",align:"blabs",x:0,y:44},{name:"playButton",align:"tl",x:15,y:12},{name:"timeDisplay",align:"tl",x:10,y:7},{name:"fullScreenButton",align:"tr",x:10,y:12},{name:"volume",align:"tr",x:5,y:10}]}]};e.player2=new Aliplayer(t),$(".play-btn").show(),$(".video-dialog").show()},playervideo:function(){$(".play-btn").hide(),this.player2.play()},hideVideoDialog:function(){$(".video-dialog").hide(),this.player2.stop(),this.player2.dispose(),$("#player2").empty()},changeIndex:function(i){var e=this;e.switchContent(0),e.showExtContent=!0,e.findex=i}}}),ds=function(){var i=this,e=i.$createElement,t=i._self._c||e;return t("div",{directives:[{name:"wechat-title",rawName:"v-wechat-title",value:i.$route.meta.title,expression:"$route.meta.title"}],staticClass:"room-info snapshot",attrs:{id:"snapshot"}},[t("div",{staticClass:"room-header snapshot-header"},[t("div",{staticClass:"company-info"},[t("div",{staticClass:"company"},[t("dl",[t("dt",[t("img",{attrs:{src:i.roomBasic.logo_img}})]),i._v(" "),t("dd",[t("h3",[t("strong",[i._v(i._s(i.roomBasic.title))])]),i._v(" "),t("p",[t("span",[i._v(i._s(i.roomBasic.intro))])])])]),i._v(" "),i._m(0)])]),i._v(" "),t("div",{staticClass:"room-banner-container"},[t("div",{staticClass:"swiper-container banner"},[t("div",{staticClass:"swiper-wrapper"},i._l(i.bannerList,function(e,s){return t("div",{key:s,staticClass:"swiper-slide"},[t("a",{attrs:{href:""!=e.links?e.links:"javascript:void(0);"}},[t("img",{attrs:{src:e.cover},on:{click:[function(t){return i.goBanner(e)},function(i){i.stopPropagation()}]}})])])}),0),i._v(" "),t("div",{staticClass:"swiper-pagination"})])])]),i._v(" "),t("div",{staticClass:"live-room-main"},[t("div",{staticClass:"gallery-thumbs",attrs:{id:"tabMenu"}},[t("div",{staticClass:"tabMenu"},[t("div",{staticClass:"swiper-slide cur",on:{click:function(e){return i.switchContent(0)}}},[i._v("溯源直播")]),i._v(" "),t("div",{staticClass:"swiper-slide",on:{click:function(e){return i.switchContent(1)}}},[i._v("基地介绍")]),i._v(" "),t("div",{staticClass:"swiper-slide",on:{click:function(e){return i.switchContent(2)}}},[i._v("溯源回放")]),i._v(" "),t("div",{staticClass:"swiper-slide",on:{click:function(e){return i.switchContent(3)}}},[i._v("溯源查询")])])]),i._v(" "),t("div",{staticClass:"live-room-content",attrs:{id:"live-room-content"}},[t("div",{staticClass:"swiper-container gallery-top"},[t("div",{staticClass:"swiper-wrapper tabCon"},[t("div",{staticClass:"swiper-slide con"},[t("div",{staticClass:"swiper-container"},[t("div",{staticClass:"swiper-wrapper"},[t("div",{staticClass:"swiper-slide"},[t("div",{staticClass:"lens-list"},[t("div",{staticClass:"videoList"},[t("div",{staticClass:"video",on:{click:i.imgCover}},[t("div",{staticClass:"prism-player ",attrs:{id:"J_prismPlayer"}}),i._v(" "),t("div",{class:1==i.play_status&&1!=i.playing||1==i.playinit?"videoCover online_video":"videoCover outline_video"},[t("img",{attrs:{src:i.VideoCoverImg}})])]),i._v(" "),i._l(i.lens,function(e){return t("dl",{staticClass:"live-1",on:{click:function(t){return i.switchVideo(e,1)}}},[t("dt",[t("img",{attrs:{src:e.cover_img}})]),i._v(" "),t("dd",[i._v(i._s(e.name))])])})],2)])])])])]),i._v(" "),t("div",{staticClass:"swiper-slide con"},[t("div",{staticClass:"swiper-container scroll "},[t("div",{staticClass:"swiper-wrapper"},[t("div",{staticClass:"swiper-slide slidescroll"},[t("div",{staticClass:"room_content",domProps:{innerHTML:i._s(i.roomBasic.content)}},[i._v("\n                    "+i._s(i.roomBasic.content)+"\n                  ")])])])])]),i._v(" "),t("div",{staticClass:"swiper-slide con snapshot-video-slider",attrs:{id:"snapshot-video-slider"}},[t("div",{staticClass:"swiper-container scroll"},[t("div",{staticClass:"swiper-wrapper"},[t("div",{staticClass:"swiper-slide slidescroll video-container"},[i._m(1),i._v(" "),t("div",{staticClass:"lens"},[t("div",{staticClass:"videoList"},i._l(i.lens,function(e,s){return"lens"==e.source_type?t("dl",{class:["live-1",e.aid==i.videoLensId?"active":""],on:{click:function(t){return i.changeVideo(e)}}},[t("dd",[i._v(i._s(e.name))])]):i._e()}),0)]),i._v(" "),t("div",{staticClass:"video-list"},[i._m(2),i._v(" "),t("div",{staticClass:"video-main"},i._l(i.videoList,function(e,s){return t("div",{staticClass:"video-item",on:{click:function(t){return i.showVideoDialog(e.uri)}}},[t("div",{staticClass:"num"},[i._v(i._s(s+1))]),i._v(" "),t("div",{staticClass:"create-time"},[i._v(i._s(e.start_time))]),i._v(" "),t("div",{staticClass:"video-len"},[i._v(i._s(e.duration)+"秒")]),i._v(" "),t("div",{staticClass:"video-edit"},[i._v("点击播放")])])}),0)])])])])]),i._v(" "),t("div",{staticClass:"swiper-slide con snapshot-image-slider",attrs:{id:"snapshot-image-slider"}},[t("div",{staticClass:"swiper-container scroll"},[t("div",{staticClass:"swiper-wrapper"},[t("div",{staticClass:"swiper-slide slidescroll image-container"},[i._m(3),i._v(" "),t("div",{staticClass:"image-list"},i._l(i.snapshotList,function(e,s){return t("div",{staticClass:"image-item"},[t("div",{staticClass:"image-content"},[t("img",{attrs:{preview:s,"preview-text":e.title,src:e.cover}})]),i._v(" "),t("div",{staticClass:"image-intro"},[t("div",{staticClass:"image-title"},[i._v(i._s(e.title))]),i._v(" "),t("div",{staticClass:"image-time"},[i._v(i._s(e.created_time))])])])}),0)])])])])])])])]),i._v(" "),t("div",{staticClass:"video-dialog"},[t("div",{staticClass:"video-dialog-mask",on:{click:i.hideVideoDialog}}),i._v(" "),t("div",{staticClass:"video-dialog-container"},[t("div",{staticClass:"prism-player-video",attrs:{id:"player2"}}),i._v(" "),t("div",{staticClass:"play-btn",on:{click:function(e){return i.playervideo()}}})])]),i._v(" "),i.showCover?t("div",{staticClass:"liveHome",on:{click:i.hideCoverImg}},[t("img",{attrs:{src:i.roomBasic.cover_img}})]):i._e(),i._v(" "),t("remote-script",{attrs:{src:"https://g.alicdn.com/de/prismplayer/2.8.1/aliplayer-min.js"}})],1)},us=[function(){var i=this,e=i.$createElement,t=i._self._c||e;return t("div",{staticClass:"source-info"},[t("p",[i._v("溯源码: YC304190201")]),i._v(" "),t("p",[i._v("查询次数: 1")])])},function(){var i=this,e=i.$createElement,t=i._self._c||e;return t("div",{staticClass:"snapshot-intro-header"},[t("div",{staticClass:"title"},[i._v("优质产品，24小时监督")]),i._v(" "),t("div",{staticClass:"mark"})])},function(){var i=this,e=i.$createElement,t=i._self._c||e;return t("div",{staticClass:"video-header"},[t("div",{staticClass:"num"},[i._v("编号")]),i._v(" "),t("div",{staticClass:"create-time"},[i._v("时间")]),i._v(" "),t("div",{staticClass:"video-len"},[i._v("片长")]),i._v(" "),t("div",{staticClass:"video-edit"},[i._v("操作")])])},function(){var i=this,e=i.$createElement,t=i._self._c||e;return t("div",{staticClass:"snapshot-intro-header"},[t("div",{staticClass:"title"},[i._v("优质产品，全过程追溯")]),i._v(" "),t("div",{staticClass:"mark"},[i._v("长按图片，可下载保存")])])}],ms={render:ds,staticRenderFns:us},vs=ms,ps=t("C7Lr"),hs=w,_s=ps(cs,vs,!1,hs,"data-v-aca121f6",null),gs=_s.exports,fs=(Yt.a,Xt.a,{name:"snapshot",components:{"room-video":at,Product:be,Comments:Ie,XDialog:Yt.a,ArticleList:ls},directives:{TransferDom:Xt.a},data:function(){return{bannerList:[],contabObj:{},contentSwiper:{},currentVideo:{},playing:2,playinit:2,VideoCoverImg:"",showCover:!1,galleryTop:{},play_status:1,room_id:0,room_info:{},showComment:!0,comment:"",total_price:0,lens:{},player:{},deliver:0,aliplayer_config:{id:"J_prismPlayer",autoplay:!1,playsinline:!0,showBuffer:!0,isLive:!0,useH5Prism:!0,useFlashPrism:!1,x5_video_position:"normal",x5_type:"video",source:"",cover:"",rePlay:!1,preload:!1,skinLayout:[{name:"bigPlayButton",align:"cc",x:30,y:80},{name:"H5Loading",align:"cc"},{name:"tooltip",align:"blabs",x:0,y:56},{name:"thumbnail"},{name:"controlBar",align:"blabs",x:0,y:0,children:[{name:"liveDisplay",align:"tlabs",x:15,y:6},{name:"progress",align:"blabs",x:0,y:44},{name:"playButton",align:"tl",x:15,y:12},{name:"timeDisplay",align:"tl",x:10,y:7},{name:"fullScreenButton",align:"tr",x:10,y:12}]}]},roomBasic:{room_name:"",start_num:"",title:"",sub_title:"",intro:"",click_num:"",introduce:"",content:"",cover_img:"",coordinate:"",addr_url:"",addr:"",logo_img:"",online_url:"",online_cover:"",mobile:""},firstMusic:!1,musicFlag:!1,lensMusicObj:"",liveMusicObj:"",showMusic:!0,isAndroid:!1,date:new Date,imageDialog:!0,dialogInfo:{link:"",type:1,showDialog:!1},snapshotList:[],videoList:[],videoLensId:0,videoPage:1,player2:{},roomEnd:!1,roomVideoEnd:!1,findex:"",showExtContent:!1,footer:[{fname:"shop",fclass:"live-foot-shop",ftext:"基地商城",path:""},{fname:"comment",fclass:"live-foot-video",ftext:"互动评论",path:""},{fname:"article",fclass:"live-foot-user",ftext:"新闻中心",path:""}]}},provide:function(){return{reload:this.reload}},created:function(){var i=navigator.userAgent;this.isAndroid=i.indexOf("Android")>-1||i.indexOf("Adr")>-1,this.room_id=this.$route.query.room_id,this.getBanner(),this.getData(),this.getLens(),this.getSnapshot(),localStorage.setItem("roomid",this.room_id)},mounted:function(){var i=this;$(".prism-big-play-btn").click(function(){$(".videoCover").fadeOut()}),setTimeout(i.initSwiper,1e3);var e=$(".prism-player").width();$(".prism-player").height(e/16*9),i.isAndroid||(i.playinit=1),$("#J_prismPlayer").click(function(){i.playinit=2,i.checkVideoPlayer(i.currentVideo),i.musicFlag=!0,i.playBgMusic(),console.log(i.player),navigator.userAgent.match(/(phone|pad|pod|iPhone|iPod|ios|iPad|Android|Mobile|BlackBerry|IEMobile|MQQBrowser|JUC|Fennec|wOSBrowser|BrowserNG|WebOS|Symbian|Windows Phone)/i)}),$(".company .remarks p").click(function(){$(this).hasClass("hide")?$(this).removeClass("hide"):$(this).addClass("hide")}),this.timer=setInterval(function(){i.getCurrentTime()},1e3),document.addEventListener("visibilitychange",function(){"hidden"===document.visibilityState&&(i.musicFlag=!1,i.lensMusicObj.currentTime=0,i.liveMusicObj.currentTime=0)}),$(function(){var e=$("#tabMenu").offset().top+150;$(window).scroll(function(){var t=$(this).scrollTop();t>=e?$("#tabMenu").addClass("fix-tab-menu"):t<e&&$("#tabMenu").removeClass("fix-tab-menu");var s=$(this).scrollTop(),a=$(document).height();s+$(this).height()>=a&&!i.loadding&&!i.roomVideoEnd&&i.getVideoList()}),i.switchContent(0),setTimeout(function(){i.$previewRefresh()},1e3)}),document.querySelector("body").setAttribute("style","background-color:#F3F4F6")},watch:{$route:function(){}},methods:{getBanner:function(){var i=this,e=new URLSearchParams;e.append("id",this.room_id),i.axiosPost("/room/banner",e).then(function(e){i.bannerList=e.data.banner})},showMoreInfo:function(i){$(i).hasClass("hide")?$(i).removeClass("hide"):$(i).addClass("hide")},initSwiper:function(){new Swiper(".banner",{loop:!0,pagination:{el:".swiper-pagination",type:"bullets",bulletActiveClass:"live-banner-active"},autoplay:{delay:3e3,stopOnLastSlide:!1,disableOnInteraction:!0}})},switchVideo:function(i,e){this.playinit=2,clearTimeout(this.contabObj),$(".videoCover").fadeOut(),this.player.dispose(),this.VideoCoverImg="",$("#J_prismPlayer").empty(),this.play_status=1;var t=this;2==e?(t.play_status=2,t.aliplayer_config.autoplay=!1,t.aliplayer_config.source!=i.vurl_reback?(t.aliplayer_config.cover=i.reback_img,t.aliplayer_config.source=i.vurl_reback,t.VideoCoverImg=i.reback_img):(t.aliplayer_config.cover=i.spare_cover_url,t.aliplayer_config.source=i.spare_url,t.VideoCoverImg=i.spare_cover_url)):(t.VideoCoverImg=i.cover_img,t.aliplayer_config.cover=i.pic,t.aliplayer_config.source=i.vurl),-1!=t.aliplayer_config.source.indexOf(".m3u8")?(t.aliplayer_config.isLive=!0,t.aliplayer_config.autoplay=!1,t.aliplayer_config.rePlay=!1,t.play_status=1):(t.aliplayer_config.isLive=!1,t.aliplayer_config.autoplay=!1,t.aliplayer_config.rePlay=!0,t.play_status=2),t.currentVideo=i,t.aliplayer_config.id="J_prismPlayer",t.player=new Aliplayer(t.aliplayer_config),t.player.on("x5requestFullScreen",this.fullScreenHandle),t.player.on("x5cancelFullScreen",this.cancelFullScreenHandel),t.aliplayer_config.autoplay&&this.checkVideoPlayer(i),t.stopMUisc(),t.currentVideo=i,t.initMusic()},switchContent:function(i){this.showExtContent=!1,this.findex="",$(".tabMenu .swiper-slide").each(function(e){e==i?$(this).addClass("cur"):$(this).removeClass("cur")}),$(".con").each(function(e){e==i?$(this).show():$(this).hide()})},getData:function(){var i=this,e=new URLSearchParams;i.axiosPost("/room/info?id="+this.room_id,e).then(function(e){i.roomBasic.room_name=e.data.room_name,i.roomBasic.logo_img=e.data.logo_img,i.roomBasic.click_num=e.data.click_num,i.roomBasic.addr_url=e.data.addr_url,i.roomBasic.addr=e.data.addr,i.roomBasic.coordinate=e.data.coordinate,i.roomBasic.cover_img=e.data.cover_img,i.roomBasic.introduce=e.data.introduce,i.roomBasic.content=e.data.content,i.roomBasic.logo_pic=e.data.logo_img,i.roomBasic.title=e.data.title,i.roomBasic.sub_title=e.data.sub_title,i.roomBasic.intro=e.data.intro,i.roomBasic.start_num=e.data.start_num,i.roomBasic.online_url=e.data.online_url,i.roomBasic.online_cover=e.data.online_cover,i.roomBasic.mobile=e.data.mobile,i.$route.meta.title=e.data.room_name,i.deliver=e.data.deliver,i.roomBasic.cover_img&&(i.showCover=!0),i.WxShare()},function(i){console.log(i)})},getLens:function(){var i=this,e=this,t=new URLSearchParams;e.axiosPost("/room/lens?id="+this.room_id,t).then(function(t){if(e.$vux.loading.hide(),200==t.status){e.lens=t.data,-1!=e.lens[0].vurl.indexOf(".m3u8")?(e.aliplayer_config.isLive=!0,e.aliplayer_config.autoplay=!1,e.aliplayer_config.rePlay=!1,e.play_status=1,e.firstMusic=!0):(e.aliplayer_config.isLive=!1,e.aliplayer_config.autoplay=!1,e.aliplayer_config.rePlay=!0,e.play_status=2),e.VideoCoverImg=e.lens[0].cover_img,e.aliplayer_config.source=e.lens[0].vurl,e.aliplayer_config.cover=e.lens[0].pic,e.aliplayer_config.id="J_prismPlayer",e.player=new Aliplayer(e.aliplayer_config),e.player.on("x5requestFullScreen",i.fullScreenHandle),e.player.on("x5cancelFullScreen",i.cancelFullScreenHandel),e.aliplayer_config.autoplay&&e.checkVideoPlayer(e.lens[0]);for(var s in e.lens)if("lens"==e.lens[s].source_type){e.videoLensId=e.lens[s].aid,e.getVideoList();break}e.currentVideo=e.lens[0],e.initMusic()}else i.$vux.alert.show({title:"温馨提示",content:t.message})},function(i){e.$vux.loading.hide()})},countPrice:function(i){this.total_price=i},tobuy:function(){var i=this;if(i.deliver>0&&parseInt(i.total_price)<parseInt(i.deliver))return this.$vux.alert.show({title:"温馨提示",content:"满"+i.deliver+"元起送，基地包邮到家"}),!1;this.$refs.product.buy_product(i.roomBasic.id,i.roomBasic.room_name,i.roomBasic.logo_pic,i.roomBasic.mobile)},subComment:function(){this.$refs.comment.setComment(this.comment)},clearParent:function(){this.comment=""},reload:function(){this.showComment=!1,this.$nextTick(function(){this.showComment=!0})},checkVideoPlayer:function(i){var e=this;e.contabObj=setTimeout(function(){e.player.getCurrentTime()<=0&&e.switchVideo(i,2)},3e3)},imgCover:function(){this.playing=1,$(".videoCover").css("z-index","-1 !important")},hideCoverImg:function(){this.roomBasic.cover_img&&this.showCover&&(this.showCover=!1)},WxShare:function(){var i=this,e=window.location.href,t=this,s=new URLSearchParams;s.append("open_id",this.openid),s.append("url",e),s.append("apis","chooseWXPay,onMenuShareTimeline,onMenuShareAppMessage"),t.axiosPost("/wechat/jssdk",s).then(function(e){t.$vux.loading.hide(),200==e.status?(t.$wechat.config(JSON.parse(e.data)),t.$wechat.ready(function(){var i=location.protocol+"//"+document.domain+"/front/#/room?room_id="+t.room_id;t.$wechat.onMenuShareAppMessage({title:t.roomBasic.title+" "+t.roomBasic.sub_title,desc:t.roomBasic.introduce,link:i,imgUrl:t.roomBasic.logo_img,success:function(){},cancel:function(){}}),t.$wechat.onMenuShareTimeline({title:t.roomBasic.title+" "+t.roomBasic.sub_title,link:i,imgUrl:t.roomBasic.logo_img,success:function(){},cancel:function(){}})})):i.$vux.alert.show({title:"温馨提示",content:"微信参数错误"})},function(i){t.$vux.loading.hide()})},initMusic:function(){this.musicFlag=!this.firstMusic,this.firstMusic=!1,this.lensMusicObj=document.getElementById("lens-music"),this.liveMusicObj=document.getElementById("live-music"),this.lensMusicObj&&(this.lensMusicObj.currentTime=0),this.liveMusicObj&&(this.liveMusicObj.currentTime=0)},playBgMusic:function(){if(this.liveCommon.checkAndroid())return!1;var i=this;i.musicFlag=!0,setTimeout(function(){i.liveMusicObj&&i.liveMusicObj.play()},500)},playMusic:function(){if(this.liveCommon.checkAndroid())return!1;this.musicFlag?(this.musicFlag=!1,this.liveMusicObj.pause(),this.lensMusicObj.play()):(this.lensMusicObj.pause(),this.liveMusicObj.play(),this.musicFlag=!0)},getCurrentTime:function(){var i=new Date,e=i.getFullYear(),t=i.getMonth()+1<10?"0"+(i.getMonth()+1):i.getMonth()+1,s=i.getDate()<10?"0"+i.getDate():i.getDate(),a=i.getHours()<10?"0"+i.getHours():i.getHours(),o=i.getMinutes()<10?"0"+i.getMinutes():i.getMinutes(),n=i.getSeconds()<10?"0"+i.getSeconds():i.getSeconds();this.date=e+"-"+t+"-"+s+" "+a+":"+o+":"+n},goHome:function(){this.$router.replace({path:"/"})},fullScreenHandle:function(){},cancelFullScreenHandel:function(){},stopMUisc:function(){this.musicFlag=!1,this.liveMusicObj.pause(),this.lensMusicObj.pause(),this.player.pause()},checkLogin:function(){if(!Di.a.get("uid"))return this.$vux.alert.show({title:"温馨提示",content:"请先登录"}),Di.a.set("refer","/room?room_id="+this.room_id,{path:"/",expires:7200}),this.$router.replace({path:"/auth"}),console.log("请先登录"),!1},getVideoList:function(){var i=this;i.loadding=!0;var e=new URLSearchParams;e.append("page",i.videoPage),e.append("id",i.room_id),e.append("sid",i.videoLensId),i.axiosPost("/room/source-video",e).then(function(e){i.loadding=!1,i.$vux.loading.hide(),200==e.status?e.data.length>0?(e.data.forEach(function(e,t){i.videoList.push(e)}),i.videoPage++):i.roomVideoEnd=!0:i.$vux.alert.show({title:"温馨提示",content:e.message})},function(e){i.$vux.loading.hide()})},changeVideo:function(i){this.videoLensId=i.aid,this.videoList=[],this.videoPage=1,this.getVideoList()},getSnapshot:function(){var i=this;i.loadding=!0;var e=new URLSearchParams;e.append("page",i.snapshotPage),e.append("id",i.room_id),i.axiosPost("/room/snapshot",e).then(function(e){i.loadding=!1,i.$vux.loading.hide(),200==e.status?e.data.length>0?(e.data.forEach(function(e,t){i.snapshotList.push(e)}),i.snapshotPage++):i.roomEnd=!0:i.$vux.alert.show({title:"温馨提示",content:e.message})},function(e){i.$vux.loading.hide()})},showDialog:function(i,e){this.dialogInfo.link=i,this.dialogInfo.type=e,this.dialogInfo.showDialog=!0},hideDialog:function(){},showVideoDialog:function(i){this.VideoCoverImg="",$("#player2").empty();var e=this,t={id:"player2",source:i,cover:"https://yc.adaxiang.com/front/static/images/video_load.gif",width:"100%",height:"100%",autoplay:!1,isLive:!1,rePlay:!1,playsinline:!0,preload:!1,controlBarVisibility:"hover",useH5Prism:!0,x5_type:"video",skinLayout:[{name:"controlBar",align:"blabs",x:0,y:0,children:[{name:"progress",align:"blabs",x:0,y:44},{name:"playButton",align:"tl",x:15,y:12},{name:"timeDisplay",align:"tl",x:10,y:7},{name:"fullScreenButton",align:"tr",x:10,y:12},{name:"volume",align:"tr",x:5,y:10}]}]};e.player2=new Aliplayer(t),$(".play-btn").show(),$(".video-dialog").show()},playervideo:function(){$(".play-btn").hide(),this.player2.play()},hideVideoDialog:function(){$(".video-dialog").hide(),this.player2.stop(),this.player2.dispose(),$("#player2").empty()},changeIndex:function(i){$(window).scrollTop()>5&&$(document).scrollTop(0);var e=this;e.switchContent(0),e.showExtContent=!0,e.findex=i}}}),ys=function(){var i=this,e=i.$createElement,t=i._self._c||e;return t("div",{directives:[{name:"wechat-title",rawName:"v-wechat-title",value:i.$route.meta.title,expression:"$route.meta.title"}],staticClass:"room-info snapshot",attrs:{id:"snapshot"}},[t("div",{staticClass:"room-header snapshot-header"},[t("div",{staticClass:"company-info"},[t("div",{staticClass:"company"},[t("dl",[t("dt",[t("img",{attrs:{src:i.roomBasic.logo_img}})]),i._v(" "),t("dd",[t("h3",[t("strong",[i._v(i._s(i.roomBasic.title))])]),i._v(" "),t("p",[t("span",[i._v(i._s(i.roomBasic.intro))])])])]),i._v(" "),i._m(0)])]),i._v(" "),t("div",{staticClass:"room-banner-container"},[t("div",{staticClass:"swiper-container banner"},[t("div",{staticClass:"swiper-wrapper"},i._l(i.bannerList,function(e,s){return t("div",{key:s,staticClass:"swiper-slide"},[t("a",{attrs:{href:""!=e.links?e.links:"javascript:void(0);"}},[t("img",{attrs:{src:e.cover},on:{click:[function(t){return i.goBanner(e)},function(i){i.stopPropagation()}]}})])])}),0),i._v(" "),t("div",{staticClass:"swiper-pagination"})])])]),i._v(" "),t("div",{staticClass:"live-room-main"},[t("div",{staticClass:"gallery-thumbs",attrs:{id:"tabMenu"}},[t("div",{staticClass:"tabMenu"},[t("div",{staticClass:"swiper-slide cur",on:{click:function(e){return i.switchContent(0)}}},[i._v("溯源直播")]),i._v(" "),t("div",{staticClass:"swiper-slide",on:{click:function(e){return i.switchContent(1)}}},[i._v("基地介绍")]),i._v(" "),t("div",{staticClass:"swiper-slide",on:{click:function(e){return i.switchContent(2)}}},[i._v("溯源回放")]),i._v(" "),t("div",{staticClass:"swiper-slide",on:{click:function(e){return i.switchContent(3)}}},[i._v("溯源查询")])])]),i._v(" "),t("div",{staticClass:"live-room-content",attrs:{id:"live-room-content"}},[t("div",{directives:[{name:"show",rawName:"v-show",value:!i.showExtContent,expression:"!showExtContent"}],staticClass:"swiper-container gallery-top"},[t("div",{staticClass:"swiper-wrapper tabCon"},[t("div",{staticClass:"swiper-slide con"},[t("div",{staticClass:"swiper-container"},[t("div",{staticClass:"swiper-wrapper"},[t("div",{staticClass:"swiper-slide"},[t("div",{staticClass:"lens-list"},[t("div",{staticClass:"videoList"},[t("div",{staticClass:"video",on:{click:i.imgCover}},[t("div",{staticClass:"prism-player ",attrs:{id:"J_prismPlayer"}}),i._v(" "),t("div",{class:1==i.play_status&&1!=i.playing||1==i.playinit?"videoCover online_video":"videoCover outline_video"},[t("img",{attrs:{src:i.VideoCoverImg}})])]),i._v(" "),i._l(i.lens,function(e){return t("dl",{staticClass:"live-1",on:{click:function(t){return i.switchVideo(e,1)}}},[t("dt",[t("img",{attrs:{src:e.cover_img}})]),i._v(" "),t("dd",[i._v(i._s(e.name))])])})],2)])])])])]),i._v(" "),t("div",{staticClass:"swiper-slide con"},[t("div",{staticClass:"swiper-container scroll "},[t("div",{staticClass:"swiper-wrapper"},[t("div",{staticClass:"swiper-slide slidescroll"},[t("div",{staticClass:"room_content",domProps:{innerHTML:i._s(i.roomBasic.content)}},[i._v("\n                    "+i._s(i.roomBasic.content)+"\n                  ")])])])])]),i._v(" "),t("div",{staticClass:"swiper-slide con snapshot-video-slider",attrs:{id:"snapshot-video-slider"}},[t("div",{staticClass:"swiper-container scroll"},[t("div",{staticClass:"swiper-wrapper"},[t("div",{staticClass:"swiper-slide slidescroll video-container"},[i._m(1),i._v(" "),t("div",{staticClass:"lens"},[t("div",{staticClass:"videoList"},i._l(i.lens,function(e,s){return"lens"==e.source_type?t("dl",{class:["live-1",e.aid==i.videoLensId?"active":""],on:{click:function(t){return i.changeVideo(e)}}},[t("dd",[i._v(i._s(e.name))])]):i._e()}),0)]),i._v(" "),t("div",{staticClass:"video-list"},[i._m(2),i._v(" "),t("div",{staticClass:"video-main"},i._l(i.videoList,function(e,s){return t("div",{staticClass:"video-item",on:{click:function(t){return i.showVideoDialog(e.uri)}}},[t("div",{staticClass:"num"},[i._v(i._s(s+1))]),i._v(" "),t("div",{staticClass:"create-time"},[i._v(i._s(e.start_time))]),i._v(" "),t("div",{staticClass:"video-len"},[i._v(i._s(e.duration)+"秒")]),i._v(" "),t("div",{staticClass:"video-edit"},[i._v("点击播放")])])}),0)])])])])]),i._v(" "),t("div",{staticClass:"swiper-slide con snapshot-image-slider",attrs:{id:"snapshot-image-slider"}},[t("div",{staticClass:"swiper-container scroll"},[t("div",{staticClass:"swiper-wrapper"},[t("div",{staticClass:"swiper-slide slidescroll image-container"},[i._m(3),i._v(" "),t("div",{staticClass:"image-list"},i._l(i.snapshotList,function(e,s){return t("div",{staticClass:"image-item"},[t("div",{staticClass:"image-content"},[t("img",{attrs:{preview:s,"preview-text":e.title,src:e.cover}})]),i._v(" "),t("div",{staticClass:"image-intro"},[t("div",{staticClass:"image-title"},[i._v(i._s(e.title))]),i._v(" "),t("div",{staticClass:"image-time"},[i._v(i._s(e.created_time))])])])}),0)])])])])])]),i._v(" "),t("div",{directives:[{name:"show",rawName:"v-show",value:i.showExtContent,expression:"showExtContent"}],staticClass:"ext-content"},[t("div",{directives:[{name:"show",rawName:"v-show",value:"shop"==i.findex,expression:"findex == 'shop'"}],staticClass:"ext-content-shop"},[t("div",[t("div",{staticClass:"snapshot-intro-header"},[t("div",{staticClass:"title"},[i._v("全场满100元，基地包邮到家")]),i._v(" "),t("div",{staticClass:"mark"},[t("router-link",{attrs:{to:{path:"orders"}}},[t("span",{staticStyle:{color:"#ccc"}},[i._v("个人中心>")])])],1)])]),i._v(" "),t("div",{},[t("product",{ref:"product",attrs:{room_id:i.room_id},on:{buy_price:i.countPrice}})],1),i._v(" "),t("div",{staticClass:"footer-menu-fixed"},[t("div",{staticClass:"footer-menu-fixed-container"},[t("div",{staticClass:"container shop-cart"},[i._v("\n                已选订单金额¥"+i._s(i.total_price)+"\n              ")]),i._v(" "),t("div",{staticClass:"button",on:{click:i.tobuy}},[i._v("结算")])])])]),i._v(" "),t("div",{directives:[{name:"show",rawName:"v-show",value:"comment"==i.findex,expression:"findex == 'comment'"}],staticClass:"ext-content-comment"},[t("comments",{ref:"comment",attrs:{room_id:i.room_id},on:{clearComment:i.clearParent}}),i._v(" "),t("div",{staticClass:"footer-menu-fixed"},[t("div",{staticClass:"footer-menu-fixed-container"},[t("div",{staticClass:"container comment"},[t("div",{staticClass:"input-container"},[t("input",{directives:[{name:"model",rawName:"v-model",value:i.comment,expression:"comment"}],attrs:{type:"text",placeholder:"点击输入评论"},domProps:{value:i.comment},on:{input:[function(e){e.target.composing||(i.comment=e.target.value)},i.checkLogin]}})])]),i._v(" "),t("div",{staticClass:"button",on:{click:i.subComment}},[i._v("发送")])])])],1),i._v(" "),t("div",{directives:[{name:"show",rawName:"v-show",value:"article"==i.findex,expression:"findex == 'article'"}],staticClass:"ext-content-article"},[t("article-list",{attrs:{room_id:i.room_id}})],1)])])]),i._v(" "),t("div",{staticClass:"video-dialog"},[t("div",{staticClass:"video-dialog-mask",on:{click:i.hideVideoDialog}}),i._v(" "),t("div",{staticClass:"video-dialog-container"},[t("div",{staticClass:"prism-player-video",attrs:{id:"player2"}}),i._v(" "),t("div",{staticClass:"play-btn",on:{click:function(e){return i.playervideo()}}})])]),i._v(" "),t("div",{staticClass:"footer"},i._l(i.footer,function(e,s){return t("div",{key:s,staticClass:"item"},[t("div",{class:e.fclass},[t("div",{class:i.findex==e.fname?"active":"",on:{click:function(t){return i.changeIndex(e.fname)}}},[t("div",{staticClass:"item-icon"}),i._v(" "),t("div",{staticClass:"item-text"},[i._v(i._s(e.ftext))])])])])}),0),i._v(" "),i.showCover?t("div",{staticClass:"liveHome",on:{click:i.hideCoverImg}},[t("img",{attrs:{src:i.roomBasic.cover_img}})]):i._e(),i._v(" "),t("remote-script",{attrs:{src:"https://g.alicdn.com/de/prismplayer/2.8.1/aliplayer-min.js"}})],1)},Cs=[function(){var i=this,e=i.$createElement,t=i._self._c||e;return t("div",{staticClass:"source-info"},[t("p",[i._v("溯源码: YC304190201")]),i._v(" "),t("p",[i._v("查询次数: 1")])])},function(){var i=this,e=i.$createElement,t=i._self._c||e;return t("div",{staticClass:"snapshot-intro-header"},[t("div",{staticClass:"title"},[i._v("优质产品，24小时监督")]),i._v(" "),t("div",{staticClass:"mark"})])},function(){var i=this,e=i.$createElement,t=i._self._c||e;return t("div",{staticClass:"video-header"},[t("div",{staticClass:"num"},[i._v("编号")]),i._v(" "),t("div",{staticClass:"create-time"},[i._v("时间")]),i._v(" "),t("div",{staticClass:"video-len"},[i._v("片长")]),i._v(" "),t("div",{staticClass:"video-edit"},[i._v("操作")])])},function(){var i=this,e=i.$createElement,t=i._self._c||e;return t("div",{staticClass:"snapshot-intro-header"},[t("div",{staticClass:"title"},[i._v("优质产品，全过程追溯")]),i._v(" "),t("div",{staticClass:"mark"},[i._v("长按图片，可下载保存")])])}],ws={render:ys,staticRenderFns:Cs},bs=ws,xs=t("C7Lr"),Bs=b,$s=xs(fs,bs,!1,Bs,"data-v-a6dc71e4",null),Ss=$s.exports,ks=(Yt.a,Xt.a,{name:"snapshot",components:{"room-video":at,Product:be,Comments:Ie,XDialog:Yt.a,ArticleList:ls},directives:{TransferDom:Xt.a},data:function(){return{bannerList:[],contabObj:{},contentSwiper:{},currentVideo:{},playing:2,playinit:2,VideoCoverImg:"",showCover:!1,galleryTop:{},play_status:1,room_id:0,room_info:{},showComment:!0,comment:"",total_price:0,lens:{},player:{},deliver:0,aliplayer_config:{id:"J_prismPlayer",autoplay:!1,playsinline:!0,showBuffer:!0,isLive:!0,useH5Prism:!0,useFlashPrism:!1,x5_video_position:"normal",x5_type:"video",source:"",cover:"",rePlay:!1,preload:!1,skinLayout:[{name:"bigPlayButton",align:"cc",x:30,y:80},{name:"H5Loading",align:"cc"},{name:"tooltip",align:"blabs",x:0,y:56},{name:"thumbnail"},{name:"controlBar",align:"blabs",x:0,y:0,children:[{name:"liveDisplay",align:"tlabs",x:15,y:6},{name:"progress",align:"blabs",x:0,y:44},{name:"playButton",align:"tl",x:15,y:12},{name:"timeDisplay",align:"tl",x:10,y:7},{name:"fullScreenButton",align:"tr",x:10,y:12}]}]},roomBasic:{room_name:"",start_num:"",title:"",sub_title:"",intro:"",click_num:"",introduce:"",content:"",cover_img:"",coordinate:"",addr_url:"",addr:"",logo_img:"",online_url:"",online_cover:"",mobile:""},firstMusic:!1,musicFlag:!1,lensMusicObj:"",liveMusicObj:"",showMusic:!0,isAndroid:!1,date:new Date,imageDialog:!0,dialogInfo:{link:"",type:1,showDialog:!1},snapshotList:[],videoList:[],videoLensId:0,videoPage:1,player2:{},roomEnd:!1,roomVideoEnd:!1,findex:"",showExtContent:!1,footer:[{fname:"shop",fclass:"live-foot-shop",ftext:"基地商城",path:""},{fname:"comment",fclass:"live-foot-video",ftext:"互动评论",path:""},{fname:"article",fclass:"live-foot-user",ftext:"新闻中心",path:""}]}},provide:function(){return{reload:this.reload}},created:function(){var i=navigator.userAgent;this.isAndroid=i.indexOf("Android")>-1||i.indexOf("Adr")>-1,this.room_id=this.$route.query.room_id,this.getBanner(),this.getData(),this.getLens(),this.getSnapshot(),localStorage.setItem("roomid",this.room_id)},mounted:function(){var i=this;$(".prism-big-play-btn").click(function(){$(".videoCover").fadeOut()}),setTimeout(i.initSwiper,1e3);var e=$(".prism-player").width();$(".prism-player").height(e/16*9),i.isAndroid||(i.playinit=1),$("#J_prismPlayer").click(function(){i.playinit=2,i.checkVideoPlayer(i.currentVideo),i.musicFlag=!0,i.playBgMusic(),console.log(i.player),navigator.userAgent.match(/(phone|pad|pod|iPhone|iPod|ios|iPad|Android|Mobile|BlackBerry|IEMobile|MQQBrowser|JUC|Fennec|wOSBrowser|BrowserNG|WebOS|Symbian|Windows Phone)/i)}),$(".company .remarks p").click(function(){$(this).hasClass("hide")?$(this).removeClass("hide"):$(this).addClass("hide")}),this.timer=setInterval(function(){i.getCurrentTime()},1e3),document.addEventListener("visibilitychange",function(){"hidden"===document.visibilityState&&(i.musicFlag=!1,i.lensMusicObj.currentTime=0,i.liveMusicObj.currentTime=0)}),$(function(){var e=$("#tabMenu").offset().top+150;$(window).scroll(function(){var t=$(this).scrollTop();t>=e?$("#tabMenu").addClass("fix-tab-menu"):t<e&&$("#tabMenu").removeClass("fix-tab-menu");var s=$(this).scrollTop(),a=$(document).height();s+$(this).height()>=a&&!i.loadding&&!i.roomVideoEnd&&i.getVideoList()}),i.switchContent(0),setTimeout(function(){i.$previewRefresh()},1e3)}),document.querySelector("body").setAttribute("style","background-color:#F3F4F6")},watch:{$route:function(){}},methods:{getBanner:function(){var i=this,e=new URLSearchParams;e.append("id",this.room_id),i.axiosPost("/room/banner",e).then(function(e){i.bannerList=e.data.banner})},showMoreInfo:function(i){$(i).hasClass("hide")?$(i).removeClass("hide"):$(i).addClass("hide")},initSwiper:function(){new Swiper(".banner",{loop:!0,pagination:{el:".swiper-pagination",type:"bullets",bulletActiveClass:"live-banner-active"},autoplay:{delay:3e3,stopOnLastSlide:!1,disableOnInteraction:!0}})},switchVideo:function(i,e){this.playinit=2,clearTimeout(this.contabObj),$(".videoCover").fadeOut(),this.player.dispose(),this.VideoCoverImg="",$("#J_prismPlayer").empty(),this.play_status=1;var t=this;2==e?(t.play_status=2,t.aliplayer_config.autoplay=!1,t.aliplayer_config.source!=i.vurl_reback?(t.aliplayer_config.cover=i.reback_img,t.aliplayer_config.source=i.vurl_reback,t.VideoCoverImg=i.reback_img):(t.aliplayer_config.cover=i.spare_cover_url,t.aliplayer_config.source=i.spare_url,t.VideoCoverImg=i.spare_cover_url)):(t.VideoCoverImg=i.cover_img,t.aliplayer_config.cover=i.pic,t.aliplayer_config.source=i.vurl),-1!=t.aliplayer_config.source.indexOf(".m3u8")?(t.aliplayer_config.isLive=!0,t.aliplayer_config.autoplay=!1,t.aliplayer_config.rePlay=!1,t.play_status=1):(t.aliplayer_config.isLive=!1,t.aliplayer_config.autoplay=!1,t.aliplayer_config.rePlay=!0,t.play_status=2),t.currentVideo=i,t.aliplayer_config.id="J_prismPlayer",t.player=new Aliplayer(t.aliplayer_config),t.player.on("x5requestFullScreen",this.fullScreenHandle),t.player.on("x5cancelFullScreen",this.cancelFullScreenHandel),t.aliplayer_config.autoplay&&this.checkVideoPlayer(i),t.stopMUisc(),t.currentVideo=i,t.initMusic()},switchContent:function(i){this.showExtContent=!1,this.findex="",$(".tabMenu .swiper-slide").each(function(e){e==i?$(this).addClass("cur"):$(this).removeClass("cur")}),$(".con").each(function(e){e==i?$(this).show():$(this).hide()})},getData:function(){var i=this,e=new URLSearchParams;i.axiosPost("/room/info?id="+this.room_id,e).then(function(e){i.roomBasic.room_name=e.data.room_name,i.roomBasic.logo_img=e.data.logo_img,i.roomBasic.click_num=e.data.click_num,i.roomBasic.addr_url=e.data.addr_url,i.roomBasic.addr=e.data.addr,i.roomBasic.coordinate=e.data.coordinate,i.roomBasic.cover_img=e.data.cover_img,i.roomBasic.introduce=e.data.introduce,i.roomBasic.content=e.data.content,i.roomBasic.logo_pic=e.data.logo_img,i.roomBasic.title=e.data.title,i.roomBasic.sub_title=e.data.sub_title,i.roomBasic.intro=e.data.intro,i.roomBasic.start_num=e.data.start_num,i.roomBasic.online_url=e.data.online_url,i.roomBasic.online_cover=e.data.online_cover,i.roomBasic.mobile=e.data.mobile,i.$route.meta.title=e.data.room_name,i.deliver=e.data.deliver,i.roomBasic.cover_img&&(i.showCover=!0),i.WxShare()},function(i){console.log(i)})},getLens:function(){var i=this,e=this,t=new URLSearchParams;e.axiosPost("/room/lens?id="+this.room_id,t).then(function(t){if(e.$vux.loading.hide(),200==t.status){e.lens=t.data,-1!=e.lens[0].vurl.indexOf(".m3u8")?(e.aliplayer_config.isLive=!0,e.aliplayer_config.autoplay=!1,e.aliplayer_config.rePlay=!1,e.play_status=1,e.firstMusic=!0):(e.aliplayer_config.isLive=!1,e.aliplayer_config.autoplay=!1,e.aliplayer_config.rePlay=!0,e.play_status=2),e.VideoCoverImg=e.lens[0].cover_img,e.aliplayer_config.source=e.lens[0].vurl,e.aliplayer_config.cover=e.lens[0].pic,e.aliplayer_config.id="J_prismPlayer",e.player=new Aliplayer(e.aliplayer_config),e.player.on("x5requestFullScreen",i.fullScreenHandle),e.player.on("x5cancelFullScreen",i.cancelFullScreenHandel),e.aliplayer_config.autoplay&&e.checkVideoPlayer(e.lens[0]);for(var s in e.lens)if("lens"==e.lens[s].source_type){e.videoLensId=e.lens[s].aid,e.getVideoList();break}e.currentVideo=e.lens[0],e.initMusic()}else i.$vux.alert.show({title:"温馨提示",content:t.message})},function(i){e.$vux.loading.hide()})},countPrice:function(i){this.total_price=i},tobuy:function(){var i=this;if(i.deliver>0&&parseInt(i.total_price)<parseInt(i.deliver))return this.$vux.alert.show({title:"温馨提示",content:"满"+i.deliver+"元起送，基地包邮到家"}),!1;this.$refs.product.buy_product(i.roomBasic.id,i.roomBasic.room_name,i.roomBasic.logo_pic,i.roomBasic.mobile)},subComment:function(){this.$refs.comment.setComment(this.comment)},clearParent:function(){this.comment=""},reload:function(){this.showComment=!1,this.$nextTick(function(){this.showComment=!0})},checkVideoPlayer:function(i){var e=this;e.contabObj=setTimeout(function(){e.player.getCurrentTime()<=0&&e.switchVideo(i,2)},3e3)},imgCover:function(){this.playing=1,$(".videoCover").css("z-index","-1 !important")},hideCoverImg:function(){this.roomBasic.cover_img&&this.showCover&&(this.showCover=!1)},WxShare:function(){var i=this,e=window.location.href,t=this,s=new URLSearchParams;s.append("open_id",this.openid),s.append("url",e),s.append("apis","chooseWXPay,onMenuShareTimeline,onMenuShareAppMessage"),t.axiosPost("/wechat/jssdk",s).then(function(e){t.$vux.loading.hide(),200==e.status?(t.$wechat.config(JSON.parse(e.data)),t.$wechat.ready(function(){var i=location.protocol+"//"+document.domain+"/front/#/room?room_id="+t.room_id;t.$wechat.onMenuShareAppMessage({title:t.roomBasic.title+" "+t.roomBasic.sub_title,desc:t.roomBasic.introduce,link:i,imgUrl:t.roomBasic.logo_img,success:function(){},cancel:function(){}}),t.$wechat.onMenuShareTimeline({title:t.roomBasic.title+" "+t.roomBasic.sub_title,link:i,imgUrl:t.roomBasic.logo_img,success:function(){},cancel:function(){}})})):i.$vux.alert.show({title:"温馨提示",content:"微信参数错误"})},function(i){t.$vux.loading.hide()})},initMusic:function(){this.musicFlag=!this.firstMusic,this.firstMusic=!1,this.lensMusicObj=document.getElementById("lens-music"),this.liveMusicObj=document.getElementById("live-music"),this.lensMusicObj&&(this.lensMusicObj.currentTime=0),this.liveMusicObj&&(this.liveMusicObj.currentTime=0)},playBgMusic:function(){if(this.liveCommon.checkAndroid())return!1;var i=this;i.musicFlag=!0,setTimeout(function(){i.liveMusicObj&&i.liveMusicObj.play()},500)},playMusic:function(){if(this.liveCommon.checkAndroid())return!1;this.musicFlag?(this.musicFlag=!1,this.liveMusicObj.pause(),this.lensMusicObj.play()):(this.lensMusicObj.pause(),this.liveMusicObj.play(),this.musicFlag=!0)},getCurrentTime:function(){var i=new Date,e=i.getFullYear(),t=i.getMonth()+1<10?"0"+(i.getMonth()+1):i.getMonth()+1,s=i.getDate()<10?"0"+i.getDate():i.getDate(),a=i.getHours()<10?"0"+i.getHours():i.getHours(),o=i.getMinutes()<10?"0"+i.getMinutes():i.getMinutes(),n=i.getSeconds()<10?"0"+i.getSeconds():i.getSeconds();this.date=e+"-"+t+"-"+s+" "+a+":"+o+":"+n},goHome:function(){this.$router.replace({path:"/"})},fullScreenHandle:function(){},cancelFullScreenHandel:function(){},stopMUisc:function(){this.musicFlag=!1,this.liveMusicObj.pause(),this.lensMusicObj.pause(),this.player.pause()},checkLogin:function(){if(!Di.a.get("uid"))return this.$vux.alert.show({title:"温馨提示",content:"请先登录"}),Di.a.set("refer","/room?room_id="+this.room_id,{path:"/",expires:7200}),this.$router.replace({path:"/auth"}),console.log("请先登录"),!1},getVideoList:function(){var i=this;i.loadding=!0;var e=new URLSearchParams;e.append("page",i.videoPage),e.append("id",i.room_id),e.append("sid",i.videoLensId),i.axiosPost("/room/source-video",e).then(function(e){i.loadding=!1,i.$vux.loading.hide(),200==e.status?e.data.length>0?(e.data.forEach(function(e,t){i.videoList.push(e)}),i.videoPage++):i.roomVideoEnd=!0:i.$vux.alert.show({title:"温馨提示",content:e.message})},function(e){i.$vux.loading.hide()})},changeVideo:function(i){this.videoLensId=i.aid,this.videoList=[],this.videoPage=1,this.getVideoList()},getSnapshot:function(){var i=this;i.loadding=!0;var e=new URLSearchParams;e.append("page",i.snapshotPage),e.append("id",i.room_id),i.axiosPost("/room/snapshot",e).then(function(e){i.loadding=!1,i.$vux.loading.hide(),200==e.status?e.data.length>0?(e.data.forEach(function(e,t){i.snapshotList.push(e)}),i.snapshotPage++):i.roomEnd=!0:i.$vux.alert.show({title:"温馨提示",content:e.message})},function(e){i.$vux.loading.hide()})},showDialog:function(i,e){this.dialogInfo.link=i,this.dialogInfo.type=e,this.dialogInfo.showDialog=!0},hideDialog:function(){},showVideoDialog:function(i){this.VideoCoverImg="",$("#player2").empty();var e=this,t={id:"player2",source:i,cover:"https://yc.adaxiang.com/front/static/images/video_load.gif",width:"100%",height:"100%",autoplay:!1,isLive:!1,rePlay:!1,playsinline:!0,preload:!1,controlBarVisibility:"hover",useH5Prism:!0,x5_type:"video",skinLayout:[{name:"controlBar",align:"blabs",x:0,y:0,children:[{name:"progress",align:"blabs",x:0,y:44},{name:"playButton",align:"tl",x:15,y:12},{name:"timeDisplay",align:"tl",x:10,y:7},{name:"fullScreenButton",align:"tr",x:10,y:12},{name:"volume",align:"tr",x:5,y:10}]}]};e.player2=new Aliplayer(t),$(".play-btn").show(),$(".video-dialog").show()},playervideo:function(){$(".play-btn").hide(),this.player2.play()},hideVideoDialog:function(){$(".video-dialog").hide(),this.player2.stop(),this.player2.dispose(),$("#player2").empty()},changeIndex:function(i){$(window).scrollTop()>5&&$(document).scrollTop(0);var e=this;e.switchContent(0),e.showExtContent=!0,e.findex=i}}}),Ms=function(){var i=this,e=i.$createElement,t=i._self._c||e;return t("div",{directives:[{name:"wechat-title",rawName:"v-wechat-title",value:i.$route.meta.title,expression:"$route.meta.title"}],staticClass:"room-info snapshot",attrs:{id:"snapshot"}},[t("div",{staticClass:"room-header snapshot-header"},[t("div",{staticClass:"company-info"},[t("div",{staticClass:"company"},[t("dl",[t("dt",[t("img",{attrs:{src:i.roomBasic.logo_img}})]),i._v(" "),t("dd",[t("h3",[t("strong",[i._v(i._s(i.roomBasic.title))])]),i._v(" "),t("p",[t("span",[i._v(i._s(i.roomBasic.intro))])])])])])]),i._v(" "),t("div",{staticClass:"room-banner-container"},[t("div",{staticClass:"swiper-container banner"},[t("div",{staticClass:"swiper-wrapper"},i._l(i.bannerList,function(e,s){return t("div",{key:s,staticClass:"swiper-slide"},[t("a",{attrs:{href:""!=e.links?e.links:"javascript:void(0);"}},[t("img",{attrs:{src:e.cover},on:{click:[function(t){return i.goBanner(e)},function(i){i.stopPropagation()}]}})])])}),0),i._v(" "),t("div",{staticClass:"swiper-pagination"})])])]),i._v(" "),t("div",{staticClass:"live-room-main"},[t("div",{staticClass:"gallery-thumbs",attrs:{id:"tabMenu"}},[t("div",{staticClass:"tabMenu"},[t("div",{staticClass:"swiper-slide cur",on:{click:function(e){return i.switchContent(0)}}},[i._v("溯源直播")]),i._v(" "),t("div",{staticClass:"swiper-slide",on:{click:function(e){return i.switchContent(1)}}},[i._v("基地介绍")]),i._v(" "),t("div",{staticClass:"swiper-slide",on:{click:function(e){return i.switchContent(2)}}},[i._v("溯源回放")]),i._v(" "),t("div",{staticClass:"swiper-slide",on:{click:function(e){return i.switchContent(3)}}},[i._v("溯源查询")])])]),i._v(" "),t("div",{staticClass:"live-room-content",attrs:{id:"live-room-content"}},[t("div",{directives:[{name:"show",rawName:"v-show",value:!i.showExtContent,expression:"!showExtContent"}],staticClass:"swiper-container gallery-top"},[t("div",{staticClass:"swiper-wrapper tabCon"},[t("div",{staticClass:"swiper-slide con"},[t("div",{staticClass:"swiper-container"},[t("div",{staticClass:"swiper-wrapper"},[t("div",{staticClass:"swiper-slide"},[t("div",{staticClass:"lens-list"},[t("div",{staticClass:"videoList"},[t("div",{staticClass:"video",on:{click:i.imgCover}},[t("div",{staticClass:"prism-player ",attrs:{id:"J_prismPlayer"}}),i._v(" "),t("div",{class:1==i.play_status&&1!=i.playing||1==i.playinit?"videoCover online_video":"videoCover outline_video"},[t("img",{attrs:{src:i.VideoCoverImg}})])]),i._v(" "),i._l(i.lens,function(e){return t("dl",{staticClass:"live-1",on:{click:function(t){return i.switchVideo(e,1)}}},[t("dt",[t("img",{attrs:{src:e.cover_img}})]),i._v(" "),t("dd",[i._v(i._s(e.name))])])})],2)])])])])]),i._v(" "),t("div",{staticClass:"swiper-slide con"},[t("div",{staticClass:"swiper-container scroll "},[t("div",{staticClass:"swiper-wrapper"},[t("div",{staticClass:"swiper-slide slidescroll"},[t("div",{staticClass:"room_content",domProps:{innerHTML:i._s(i.roomBasic.content)}},[i._v("\n                    "+i._s(i.roomBasic.content)+"\n                  ")])])])])]),i._v(" "),t("div",{staticClass:"swiper-slide con snapshot-video-slider",attrs:{id:"snapshot-video-slider"}},[t("div",{staticClass:"swiper-container scroll"},[t("div",{staticClass:"swiper-wrapper"},[t("div",{staticClass:"swiper-slide slidescroll video-container"},[i._m(0),i._v(" "),t("div",{staticClass:"lens"},[t("div",{staticClass:"videoList"},i._l(i.lens,function(e,s){return"lens"==e.source_type?t("dl",{class:["live-1",e.aid==i.videoLensId?"active":""],on:{click:function(t){return i.changeVideo(e)}}},[t("dd",[i._v(i._s(e.name))])]):i._e()}),0)]),i._v(" "),t("div",{staticClass:"video-list"},[i._m(1),i._v(" "),t("div",{staticClass:"video-main"},i._l(i.videoList,function(e,s){return t("div",{staticClass:"video-item",on:{click:function(t){return i.showVideoDialog(e.uri)}}},[t("div",{staticClass:"num"},[i._v(i._s(s+1))]),i._v(" "),t("div",{staticClass:"create-time"},[i._v(i._s(e.start_time))]),i._v(" "),t("div",{staticClass:"video-len"},[i._v(i._s(e.duration)+"秒")]),i._v(" "),t("div",{staticClass:"video-edit"},[i._v("点击播放")])])}),0)])])])])]),i._v(" "),t("div",{staticClass:"swiper-slide con snapshot-image-slider",attrs:{id:"snapshot-image-slider"}},[t("div",{staticClass:"swiper-container scroll"},[t("div",{staticClass:"swiper-wrapper"},[t("div",{staticClass:"swiper-slide slidescroll image-container"},[i._m(2),i._v(" "),t("div",{staticClass:"image-list"},i._l(i.snapshotList,function(e,s){return t("div",{staticClass:"image-item"},[t("div",{staticClass:"image-content"},[t("img",{attrs:{preview:s,"preview-text":e.title,src:e.cover}})]),i._v(" "),t("div",{staticClass:"image-intro"},[t("div",{staticClass:"image-title"},[i._v(i._s(e.title))]),i._v(" "),t("div",{staticClass:"image-time"},[i._v(i._s(e.created_time))])])])}),0)])])])])])]),i._v(" "),t("div",{directives:[{name:"show",rawName:"v-show",value:i.showExtContent,expression:"showExtContent"}],staticClass:"ext-content"},[t("div",{directives:[{name:"show",rawName:"v-show",value:"shop"==i.findex,expression:"findex == 'shop'"}],staticClass:"ext-content-shop"},[t("div",[t("div",{staticClass:"snapshot-intro-header"},[t("div",{staticClass:"title"},[i._v("全场满100元，基地包邮到家")]),i._v(" "),t("div",{staticClass:"mark"},[t("router-link",{attrs:{to:{path:"orders"}}},[t("span",{staticStyle:{color:"#ccc"}},[i._v("个人中心>")])])],1)])]),i._v(" "),t("div",{},[t("product",{ref:"product",attrs:{room_id:i.room_id},on:{buy_price:i.countPrice}})],1),i._v(" "),t("div",{staticClass:"footer-menu-fixed"},[t("div",{staticClass:"footer-menu-fixed-container"},[t("div",{staticClass:"container shop-cart"},[i._v("\n                已选订单金额¥"+i._s(i.total_price)+"\n              ")]),i._v(" "),t("div",{staticClass:"button",on:{click:i.tobuy}},[i._v("结算")])])])]),i._v(" "),t("div",{directives:[{name:"show",rawName:"v-show",value:"comment"==i.findex,expression:"findex == 'comment'"}],staticClass:"ext-content-comment"},[t("comments",{ref:"comment",attrs:{room_id:i.room_id},on:{clearComment:i.clearParent}}),i._v(" "),t("div",{staticClass:"footer-menu-fixed"},[t("div",{staticClass:"footer-menu-fixed-container"},[t("div",{staticClass:"container comment"},[t("div",{staticClass:"input-container"},[t("input",{directives:[{name:"model",rawName:"v-model",value:i.comment,expression:"comment"}],attrs:{type:"text",placeholder:"点击输入评论"},domProps:{value:i.comment},on:{input:[function(e){e.target.composing||(i.comment=e.target.value)},i.checkLogin]}})])]),i._v(" "),t("div",{staticClass:"button",on:{click:i.subComment}},[i._v("发送")])])])],1),i._v(" "),t("div",{directives:[{name:"show",rawName:"v-show",value:"article"==i.findex,expression:"findex == 'article'"}],staticClass:"ext-content-article"},[t("article-list",{attrs:{room_id:i.room_id}})],1)])])]),i._v(" "),t("div",{staticClass:"video-dialog"},[t("div",{staticClass:"video-dialog-mask",on:{click:i.hideVideoDialog}}),i._v(" "),t("div",{staticClass:"video-dialog-container"},[t("div",{staticClass:"prism-player-video",attrs:{id:"player2"}}),i._v(" "),t("div",{staticClass:"play-btn",on:{click:function(e){return i.playervideo()}}})])]),i._v(" "),t("div",{staticClass:"footer"},i._l(i.footer,function(e,s){return t("div",{key:s,staticClass:"item"},[t("div",{class:e.fclass},[t("div",{class:i.findex==e.fname?"active":"",on:{click:function(t){return i.changeIndex(e.fname)}}},[t("div",{staticClass:"item-icon"}),i._v(" "),t("div",{staticClass:"item-text"},[i._v(i._s(e.ftext))])])])])}),0),i._v(" "),i.showCover?t("div",{staticClass:"liveHome",on:{click:i.hideCoverImg}},[t("img",{attrs:{src:i.roomBasic.cover_img}})]):i._e(),i._v(" "),t("remote-script",{attrs:{src:"https://g.alicdn.com/de/prismplayer/2.8.1/aliplayer-min.js"}})],1)},Ps=[function(){var i=this,e=i.$createElement,t=i._self._c||e;return t("div",{staticClass:"snapshot-intro-header"},[t("div",{staticClass:"title"},[i._v("优质产品，24小时监督")]),i._v(" "),t("div",{staticClass:"mark"})])},function(){var i=this,e=i.$createElement,t=i._self._c||e;return t("div",{staticClass:"video-header"},[t("div",{staticClass:"num"},[i._v("编号")]),i._v(" "),t("div",{staticClass:"create-time"},[i._v("时间")]),i._v(" "),t("div",{staticClass:"video-len"},[i._v("片长")]),i._v(" "),t("div",{staticClass:"video-edit"},[i._v("操作")])])},function(){var i=this,e=i.$createElement,t=i._self._c||e;return t("div",{staticClass:"snapshot-intro-header"},[t("div",{staticClass:"title"},[i._v("优质产品，全过程追溯")]),i._v(" "),t("div",{staticClass:"mark"},[i._v("长按图片，可下载保存")])])}],Ls={render:Ms,staticRenderFns:Ps},Is=Ls,Os=t("C7Lr"),Vs=x,As=Os(ks,Is,!1,Vs,"data-v-1ef19af7",null),Fs=As.exports,js=(Yt.a,Xt.a,{name:"educate-news",components:{"room-video":at,Product:be,Comments:Ie,XDialog:Yt.a,ArticleList:ls},directives:{TransferDom:Xt.a},data:function(){return{bannerList:[],contabObj:{},contentSwiper:{},currentVideo:{},playing:2,playinit:2,VideoCoverImg:"",showCover:!1,galleryTop:{},play_status:1,room_id:0,room_info:{},showComment:!0,comment:"",total_price:0,lens:{},player:{},deliver:0,aliplayer_config:{id:"J_prismPlayer",autoplay:!1,playsinline:!0,showBuffer:!0,isLive:!0,useH5Prism:!0,useFlashPrism:!1,x5_video_position:"normal",x5_type:"video",source:"",cover:"",rePlay:!1,preload:!1,skinLayout:[{name:"bigPlayButton",align:"cc",x:30,y:80},{name:"H5Loading",align:"cc"},{name:"tooltip",align:"blabs",x:0,y:56},{name:"thumbnail"},{name:"controlBar",align:"blabs",x:0,y:0,children:[{name:"liveDisplay",align:"tlabs",x:15,y:6},{name:"progress",align:"blabs",x:0,y:44},{name:"playButton",align:"tl",x:15,y:12},{name:"timeDisplay",align:"tl",x:10,y:7},{name:"fullScreenButton",align:"tr",x:10,y:12}]}]},roomBasic:{room_name:"",start_num:"",title:"",sub_title:"",intro:"",click_num:"",introduce:"",content:"",cover_img:"",coordinate:"",addr_url:"",addr:"",logo_img:"",online_url:"",online_cover:"",mobile:"",wx_logo:""},firstMusic:!1,musicFlag:!1,lensMusicObj:"",liveMusicObj:"",showMusic:!0,isAndroid:!1,date:new Date,imageDialog:!0,eduList:[],videoLensId:0,page:1,roomEnd:!1,showArticle:!1,articleList:[],findex:"live",footer:[{fname:"live",fclass:"live-foot-live",ftext:"现场直播",path:"/"},{fname:"article",fclass:"live-foot-video",ftext:"活动中心",path:""},{fname:"my",fclass:"live-foot-user",ftext:"联系我们",path:""}]}},provide:function(){return{reload:this.reload}},created:function(){var i=navigator.userAgent;this.isAndroid=i.indexOf("Android")>-1||i.indexOf("Adr")>-1,this.room_id=this.$route.query.room_id,this.getBanner(),this.getData(),this.getLens(),this.getSnaphot(),localStorage.setItem("roomid",this.room_id)},mounted:function(){var i=this;$(".prism-big-play-btn").click(function(){$(".videoCover").fadeOut()}),setTimeout(i.initSwiper,1e3);var e=$(".prism-player").width();$(".prism-player").height(e/16*9),i.isAndroid||(i.playinit=1),$("#J_prismPlayer").click(function(){i.playinit=2,i.checkVideoPlayer(i.currentVideo),i.musicFlag=!0,i.playBgMusic(),navigator.userAgent.match(/(phone|pad|pod|iPhone|iPod|ios|iPad|Android|Mobile|BlackBerry|IEMobile|MQQBrowser|JUC|Fennec|wOSBrowser|BrowserNG|WebOS|Symbian|Windows Phone)/i)}),$(".company .remarks p").click(function(){$(this).hasClass("hide")?$(this).removeClass("hide"):$(this).addClass("hide")}),this.timer=setInterval(function(){i.getCurrentTime()},1e3),document.addEventListener("visibilitychange",function(){"hidden"===document.visibilityState&&(i.musicFlag=!1,i.liveMusicObj.pause(),i.lensMusicObj.pause())}),$(function(){var e=$("#tabMenu").offset().top+150;$(window).scroll(function(){var i=$(this).scrollTop();i>=e?$("#tabMenu").addClass("fix-tab-menu"):i<e&&$("#tabMenu").removeClass("fix-tab-menu")}),i.switchContent(0),setTimeout(function(){i.$previewRefresh()},1e3)}),document.querySelector("body").setAttribute("style","background-color:#F3F4F6")},watch:{$route:function(){}},methods:{getBanner:function(){var i=this,e=new URLSearchParams;e.append("id",this.room_id),i.axiosPost("/room/banner",e).then(function(e){i.bannerList=e.data.banner})},showMoreInfo:function(i){$(i).hasClass("hide")?$(i).removeClass("hide"):$(i).addClass("hide")},initSwiper:function(){new Swiper(".banner",{loop:!0,pagination:{el:".swiper-pagination",type:"bullets",bulletActiveClass:"live-banner-active"},autoHeight:!0,autoplay:{delay:3e3,stopOnLastSlide:!1,disableOnInteraction:!0}})},switchVideo:function(i,e){this.playinit=2,clearTimeout(this.contabObj),$(".videoCover").fadeOut(),this.player.dispose(),this.VideoCoverImg="",$("#J_prismPlayer").empty(),this.play_status=1;var t=this;2==e?(t.play_status=2,t.aliplayer_config.autoplay=!1,t.aliplayer_config.source!=i.vurl_reback?(t.aliplayer_config.cover=i.reback_img,t.aliplayer_config.source=i.vurl_reback,t.VideoCoverImg=i.reback_img):(t.aliplayer_config.cover=i.spare_cover_url,t.aliplayer_config.source=i.spare_url,t.VideoCoverImg=i.spare_cover_url)):(t.VideoCoverImg=i.cover_img,t.aliplayer_config.cover=i.pic,t.aliplayer_config.source=i.vurl),-1!=t.aliplayer_config.source.indexOf(".m3u8")?(t.aliplayer_config.isLive=!0,t.aliplayer_config.autoplay=!1,t.aliplayer_config.rePlay=!1,t.play_status=1):(t.aliplayer_config.isLive=!1,t.aliplayer_config.autoplay=!1,t.aliplayer_config.rePlay=!0,t.play_status=2),t.currentVideo=i,t.aliplayer_config.id="J_prismPlayer",t.player=new Aliplayer(t.aliplayer_config),t.player.on("x5requestFullScreen",this.fullScreenHandle),t.player.on("x5cancelFullScreen",this.cancelFullScreenHandel),t.aliplayer_config.autoplay&&this.checkVideoPlayer(i),t.stopMUisc(),t.currentVideo=i,t.initMusic()},switchContent:function(i){this.showArticle=!1,this.findex="live",$(".tabMenu .swiper-slide").each(function(e){e==i?$(this).addClass("cur"):$(this).removeClass("cur")}),$(".con").each(function(e){e==i?$(this).show():$(this).hide()})},getData:function(){var i=this,e=new URLSearchParams;i.axiosPost("/room/info?id="+this.room_id,e).then(function(e){i.roomBasic.room_name=e.data.room_name,i.roomBasic.logo_img=e.data.logo_img,i.roomBasic.click_num=e.data.click_num,i.roomBasic.addr_url=e.data.addr_url,i.roomBasic.addr=e.data.addr,i.roomBasic.coordinate=e.data.coordinate,i.roomBasic.cover_img=e.data.cover_img,i.roomBasic.introduce=e.data.introduce,i.roomBasic.content=e.data.content,i.roomBasic.logo_pic=e.data.logo_img,i.roomBasic.title=e.data.title,i.roomBasic.sub_title=e.data.sub_title,i.roomBasic.intro=e.data.intro,i.roomBasic.start_num=e.data.start_num,i.roomBasic.online_url=e.data.online_url,i.roomBasic.online_cover=e.data.online_cover,i.roomBasic.mobile=e.data.mobile,i.roomBasic.wx_logo=e.data.wx_logo,i.$route.meta.title=e.data.room_name,i.deliver=e.data.deliver,i.roomBasic.cover_img&&(i.showCover=!0),i.WxShare()},function(i){console.log(i)})},getLens:function(){var i=this,e=this,t=new URLSearchParams;e.axiosPost("/room/lens?id="+this.room_id,t).then(function(t){e.$vux.loading.hide(),200==t.status?(e.lens=t.data,-1!=e.lens[0].vurl.indexOf(".m3u8")?(e.aliplayer_config.isLive=!0,e.aliplayer_config.autoplay=!1,e.aliplayer_config.rePlay=!1,e.play_status=1,e.firstMusic=!0):(e.aliplayer_config.isLive=!1,e.aliplayer_config.autoplay=!1,e.aliplayer_config.rePlay=!0,e.play_status=2),e.VideoCoverImg=e.lens[0].cover_img,e.aliplayer_config.source=e.lens[0].vurl,e.aliplayer_config.cover=e.lens[0].pic,e.aliplayer_config.id="J_prismPlayer",e.player=new Aliplayer(e.aliplayer_config),e.player.on("x5requestFullScreen",i.fullScreenHandle),e.player.on("x5cancelFullScreen",i.cancelFullScreenHandel),e.aliplayer_config.autoplay&&e.checkVideoPlayer(e.lens[0]),e.currentVideo=e.lens[0],e.initMusic()):i.$vux.alert.show({title:"温馨提示",content:t.message})},function(i){e.$vux.loading.hide()})},subComment:function(){this.$refs.comment.setComment(this.comment)},clearParent:function(){this.comment=""},reload:function(){this.showComment=!1,this.$nextTick(function(){this.showComment=!0})},checkVideoPlayer:function(i){var e=this;e.contabObj=setTimeout(function(){e.player.getCurrentTime()<=0&&e.switchVideo(i,2)},3e3)},imgCover:function(){this.playing=1,$(".videoCover").css("z-index","-1 !important")},hideCoverImg:function(){this.roomBasic.cover_img&&this.showCover&&(this.showCover=!1)},WxShare:function(){var i=this,e=window.location.href,t=this,s=new URLSearchParams;s.append("open_id",this.openid),s.append("url",e),s.append("apis","chooseWXPay,onMenuShareTimeline,onMenuShareAppMessage"),t.axiosPost("/wechat/jssdk",s).then(function(e){t.$vux.loading.hide(),200==e.status?(t.$wechat.config(JSON.parse(e.data)),t.$wechat.ready(function(){var i=location.protocol+"//"+document.domain+"/front/#/room?room_id="+t.room_id;t.$wechat.onMenuShareAppMessage({title:t.roomBasic.title+" "+t.roomBasic.sub_title,desc:t.roomBasic.introduce,link:i,imgUrl:t.roomBasic.wx_logo,success:function(){},cancel:function(){}}),t.$wechat.onMenuShareTimeline({title:t.roomBasic.title+" "+t.roomBasic.sub_title,link:i,imgUrl:t.roomBasic.wx_logo,success:function(){},cancel:function(){}})})):i.$vux.alert.show({title:"温馨提示",content:"微信参数错误"})},function(i){t.$vux.loading.hide()})},initMusic:function(){this.musicFlag=!this.firstMusic,this.firstMusic=!1,this.lensMusicObj=document.getElementById("lens-music"),this.liveMusicObj=document.getElementById("live-music"),this.lensMusicObj.currentTime=0,this.liveMusicObj.currentTime=0},playBgMusic:function(){if(this.liveCommon.checkAndroid())return!1;var i=this;i.musicFlag=!0,setTimeout(function(){i.liveMusicObj.play()},500)},playMusic:function(){if(this.liveCommon.checkAndroid())return!1;this.musicFlag?(this.musicFlag=!1,this.liveMusicObj.pause(),this.lensMusicObj.play()):(this.lensMusicObj.pause(),this.liveMusicObj.play(),this.musicFlag=!0)},getCurrentTime:function(){var i=new Date,e=i.getFullYear(),t=i.getMonth()+1<10?"0"+(i.getMonth()+1):i.getMonth()+1,s=i.getDate()<10?"0"+i.getDate():i.getDate(),a=i.getHours()<10?"0"+i.getHours():i.getHours(),o=i.getMinutes()<10?"0"+i.getMinutes():i.getMinutes(),n=i.getSeconds()<10?"0"+i.getSeconds():i.getSeconds();this.date=e+"-"+t+"-"+s+" "+a+":"+o+":"+n},goHome:function(){this.$router.replace({path:"/"})},fullScreenHandle:function(){},cancelFullScreenHandel:function(){},stopMUisc:function(){this.musicFlag=!1,this.player.pause()},checkLogin:function(){if(!Di.a.get("uid"))return this.$vux.alert.show({title:"温馨提示",content:"请先登录"}),Di.a.set("refer","/room?room_id="+this.room_id,{path:"/",expires:7200}),this.$router.replace({path:"/auth"}),console.log("请先登录"),!1},getSnaphot:function(){var i=this;i.loadding=!0;var e=new URLSearchParams;e.append("page",i.eduPage),e.append("id",i.room_id),i.axiosPost("/room/snapshot",e).then(function(e){i.loadding=!1,i.$vux.loading.hide(),200==e.status?e.data.length>0?(e.data.forEach(function(e,t){i.eduList.push(e)}),i.eduPage++):i.roomEnd=!0:i.$vux.alert.show({title:"温馨提示",content:e.message})},function(e){i.$vux.loading.hide()})},changeIndex:function(i){$(window).scrollTop()>5&&$(document).scrollTop(0);var e=this;switch(i){case"live":e.switchContent(0),e.showArticle=!1;break;case"article":e.switchContent(0),e.showArticle=!0;break;case"my":e.switchContent(1);var t=$(document).height()-$(window).height();$(document).scrollTop(t),e.showArticle=!1}e.findex=i}}}),Ts=function(){var i=this,e=i.$createElement,t=i._self._c||e;return t("div",{directives:[{name:"wechat-title",rawName:"v-wechat-title",value:i.$route.meta.title,expression:"$route.meta.title"}],staticClass:"room-info edu",attrs:{id:"edu"}},[t("div",{staticClass:"room-header edu-header"},[t("div",{staticClass:"company-info"},[t("div",{staticClass:"company"},[t("div",{staticClass:"company-logo"},[t("img",{attrs:{src:i.roomBasic.logo_img}})]),i._v(" "),t("dl",[t("dd",[t("p",[t("span",[i._v(i._s(i.roomBasic.intro))])])])])])]),i._v(" "),t("div",{staticClass:"room-banner-container"},[t("div",{staticClass:"swiper-container banner"},[t("div",{staticClass:"swiper-wrapper"},i._l(i.bannerList,function(e,s){return t("div",{key:s,staticClass:"swiper-slide"},[t("a",{attrs:{href:""!=e.links?e.links:"javascript:void(0);"}},[t("img",{attrs:{src:e.cover},on:{click:[function(t){return i.goBanner(e)},function(i){i.stopPropagation()}]}})])])}),0),i._v(" "),t("div",{staticClass:"swiper-pagination"})])])]),i._v(" "),t("div",{staticClass:"live-room-main"},[t("div",{staticClass:"gallery-thumbs",attrs:{id:"tabMenu"}},[t("div",{staticClass:"tabMenu"},[t("div",{staticClass:"swiper-slide cur",on:{click:function(e){return i.switchContent(0)}}},[t("span",{staticClass:"live-icon"},[i._v("现场直播")])]),i._v(" "),t("div",{staticClass:"swiper-slide",on:{click:function(e){return i.switchContent(1)}}},[i._v("中心介绍")]),i._v(" "),t("div",{staticClass:"swiper-slide",on:{click:function(e){return i.switchContent(2)}}},[i._v("精彩视频")]),i._v(" "),t("div",{staticClass:"swiper-slide",on:{click:function(e){return i.switchContent(3)}}},[i._v("精彩照片")])])]),i._v(" "),t("div",{staticClass:"live-room-content",attrs:{id:"live-room-content"}},[t("div",{directives:[{name:"show",rawName:"v-show",value:!i.showArticle,expression:"!showArticle"}],staticClass:"swiper-container gallery-top"},[t("div",{staticClass:"swiper-wrapper tabCon"},[t("div",{staticClass:"swiper-slide con"},[t("div",{staticClass:"swiper-container"},[t("div",{staticClass:"swiper-wrapper"},[t("div",{staticClass:"swiper-slide"},[t("div",{staticClass:"lens-list"},[t("div",{staticClass:"videoList"},[t("div",{staticClass:"video",on:{click:i.imgCover}},[t("div",{staticClass:"prism-player ",attrs:{id:"J_prismPlayer"}}),i._v(" "),t("div",{class:1==i.play_status&&1!=i.playing||1==i.playinit?"videoCover online_video":"videoCover outline_video"},[t("img",{attrs:{src:i.VideoCoverImg}})])]),i._v(" "),i._l(i.lens,function(e){return t("dl",{staticClass:"live-1",on:{click:function(t){return i.switchVideo(e,1)}}},[t("dt",[t("img",{attrs:{src:e.cover_img}})]),i._v(" "),t("dd",[i._v(i._s(e.name))])])})],2)])])])])]),i._v(" "),t("div",{staticClass:"swiper-slide con"},[t("div",{staticClass:"swiper-container scroll "},[t("div",{staticClass:"swiper-wrapper"},[t("div",{staticClass:"swiper-slide slidescroll"},[t("div",{staticClass:"room_content",domProps:{innerHTML:i._s(i.roomBasic.content)}},[i._v("\n                    "+i._s(i.roomBasic.content)+"\n                  ")])])])])]),i._v(" "),t("div",{staticClass:"swiper-slide con edu-video-slider",attrs:{id:"edu-video-slider"}},[t("div",{staticClass:"swiper-container scroll"},[t("div",{staticClass:"swiper-wrapper"},[t("div",{staticClass:"swiper-slide slidescroll"},[t("div",{staticClass:"filmList"},[t("room-video",{attrs:{room_id:i.room_id}})],1)])])])]),i._v(" "),t("div",{staticClass:"swiper-slide con edu-image-slider",attrs:{id:"edu-image-slider"}},[t("div",{staticClass:"swiper-container scroll"},[t("div",{staticClass:"swiper-wrapper"},[t("div",{staticClass:"swiper-slide slidescroll image-container"},[i._m(0),i._v(" "),t("div",{staticClass:"image-list"},i._l(i.eduList,function(e,s){return t("div",{staticClass:"image-item"},[t("div",{staticClass:"image-content"},[t("img",{attrs:{preview:s,"preview-text":e.title,src:e.cover}})]),i._v(" "),t("div",{staticClass:"image-intro"},[t("div",{staticClass:"image-title"},[i._v(i._s(e.title))]),i._v(" "),t("div",{staticClass:"image-time"},[i._v(i._s(e.created_time))])])])}),0)])])])])])]),i._v(" "),t("div",{directives:[{name:"show",rawName:"v-show",value:i.showArticle,expression:"showArticle"}],staticClass:"tab-content"},[t("article-list",{attrs:{room_id:i.room_id}})],1)])]),i._v(" "),t("div",{staticClass:"footer"},i._l(i.footer,function(e,s){return t("div",{key:s,staticClass:"item"},[t("div",{class:e.fclass},[t("div",{class:i.findex==e.fname?"active":"",on:{click:function(t){return i.changeIndex(e.fname)}}},[t("div",{staticClass:"item-icon"}),i._v(" "),t("div",{staticClass:"item-text"},[i._v(i._s(e.ftext))])])])])}),0),i._v(" "),i.showCover?t("div",{staticClass:"liveHome",on:{click:i.hideCoverImg}},[t("img",{attrs:{src:i.roomBasic.cover_img}})]):i._e(),i._v(" "),t("remote-script",{attrs:{src:"https://g.alicdn.com/de/prismplayer/2.8.1/aliplayer-min.js"}})],1)},Es=[function(){var i=this,e=i.$createElement,t=i._self._c||e;return t("div",{staticClass:"edu-intro-header"},[t("div",{staticClass:"title"},[i._v("图片留存瞬间的美好")]),i._v(" "),t("div",{staticClass:"mark"},[i._v("长按图片，可下载保存")])])}],Rs={render:Ts,staticRenderFns:Es},Ds=Rs,Us=t("C7Lr"),Hs=B,Js=Us(js,Ds,!1,Hs,"data-v-0122cf6b",null),Ns=Js.exports,qs=(Yt.a,Xt.a,{name:"educate-news",components:{"room-video":at,Product:be,Comments:Ie,XDialog:Yt.a,ArticleList:ls},directives:{TransferDom:Xt.a},data:function(){return{bannerList:[],contabObj:{},contentSwiper:{},currentVideo:{},playing:2,playinit:2,VideoCoverImg:"",showCover:!1,galleryTop:{},play_status:1,room_id:0,room_info:{},showComment:!0,comment:"",total_price:0,lens:{},player:{},deliver:0,aliplayer_config:{id:"J_prismPlayer",autoplay:!1,playsinline:!0,showBuffer:!0,isLive:!0,useH5Prism:!0,useFlashPrism:!1,x5_video_position:"normal",x5_type:"video",source:"",cover:"",rePlay:!1,preload:!1,skinLayout:[{name:"bigPlayButton",align:"cc",x:30,y:80},{name:"H5Loading",align:"cc"},{name:"tooltip",align:"blabs",x:0,y:56},{name:"thumbnail"},{name:"controlBar",align:"blabs",x:0,y:0,children:[{name:"liveDisplay",align:"tlabs",x:15,y:6},{name:"progress",align:"blabs",x:0,y:44},{name:"playButton",align:"tl",x:15,y:12},{name:"timeDisplay",align:"tl",x:10,y:7},{name:"fullScreenButton",align:"tr",x:10,y:12}]}]},roomBasic:{room_name:"",start_num:"",title:"",sub_title:"",intro:"",click_num:"",introduce:"",content:"",cover_img:"",coordinate:"",addr_url:"",addr:"",logo_img:"",online_url:"",online_cover:"",mobile:"",wx_logo:""},firstMusic:!1,musicFlag:!1,lensMusicObj:"",liveMusicObj:"",showMusic:!0,isAndroid:!1,date:new Date,imageDialog:!0,eduList:[],videoLensId:0,page:1,roomEnd:!1,showArticle:!1,articleList:[],findex:"live",currentLensName:""}},provide:function(){return{reload:this.reload}},created:function(){var i=navigator.userAgent;this.isAndroid=i.indexOf("Android")>-1||i.indexOf("Adr")>-1,this.room_id=this.$route.query.room_id,this.getBanner(),this.getData(),this.getLens(),this.getSnaphot(),localStorage.setItem("roomid",this.room_id)},mounted:function(){var i=this;$(".prism-big-play-btn").click(function(){$(".videoCover").fadeOut()}),setTimeout(i.initSwiper,1e3);var e=$(".prism-player").width();$(".prism-player").height(e/16*9),i.isAndroid||(i.playinit=1),$("#J_prismPlayer").click(function(){i.playinit=2,i.checkVideoPlayer(i.currentVideo),i.musicFlag=!0,i.playBgMusic(),navigator.userAgent.match(/(phone|pad|pod|iPhone|iPod|ios|iPad|Android|Mobile|BlackBerry|IEMobile|MQQBrowser|JUC|Fennec|wOSBrowser|BrowserNG|WebOS|Symbian|Windows Phone)/i)}),$(".company .remarks p").click(function(){$(this).hasClass("hide")?$(this).removeClass("hide"):$(this).addClass("hide")}),this.timer=setInterval(function(){i.getCurrentTime()},1e3),document.addEventListener("visibilitychange",function(){"hidden"===document.visibilityState&&(i.musicFlag=!1,i.liveMusicObj.pause(),i.lensMusicObj.pause())}),$(function(){i.switchContent(0),setTimeout(function(){i.$previewRefresh()},1e3)}),document.querySelector("body").setAttribute("style","background-color:#F3F4F6")},watch:{$route:function(){}},methods:{getBanner:function(){var i=this,e=new URLSearchParams;e.append("id",this.room_id),i.axiosPost("/room/banner",e).then(function(e){i.bannerList=e.data.banner})},showMoreInfo:function(i){$(i).hasClass("hide")?$(i).removeClass("hide"):$(i).addClass("hide")},initSwiper:function(){new Swiper(".banner",{loop:!0,pagination:{el:".swiper-pagination",type:"bullets",bulletActiveClass:"live-banner-active"},autoHeight:!0,autoplay:{delay:3e3,stopOnLastSlide:!1,disableOnInteraction:!0}})},switchVideo:function(i,e){this.playinit=2,clearTimeout(this.contabObj),$(".videoCover").fadeOut(),this.player.dispose(),this.VideoCoverImg="",$("#J_prismPlayer").empty(),this.play_status=1;var t=this;2==e?(t.play_status=2,t.aliplayer_config.autoplay=!1,t.aliplayer_config.source!=i.vurl_reback?(t.aliplayer_config.cover=i.reback_img,t.aliplayer_config.source=i.vurl_reback,t.VideoCoverImg=i.reback_img):(t.aliplayer_config.cover=i.spare_cover_url,t.aliplayer_config.source=i.spare_url,t.VideoCoverImg=i.spare_cover_url)):(t.VideoCoverImg=i.cover_img,t.aliplayer_config.cover=i.pic,t.aliplayer_config.source=i.vurl),-1!=t.aliplayer_config.source.indexOf(".m3u8")?(t.aliplayer_config.isLive=!0,t.aliplayer_config.autoplay=!1,t.aliplayer_config.rePlay=!1,t.play_status=1):(t.aliplayer_config.isLive=!1,t.aliplayer_config.autoplay=!1,t.aliplayer_config.rePlay=!0,t.play_status=2),t.currentVideo=i,t.aliplayer_config.id="J_prismPlayer",t.player=new Aliplayer(t.aliplayer_config),t.player.on("x5requestFullScreen",this.fullScreenHandle),t.player.on("x5cancelFullScreen",this.cancelFullScreenHandel),t.aliplayer_config.autoplay&&this.checkVideoPlayer(i),t.stopMUisc(),t.currentVideo=i,t.initMusic()},switchContent:function(i){this.showArticle=!1,this.findex="live",$(".tabMenu .swiper-slide").each(function(e){e==i?$(this).addClass("cur"):$(this).removeClass("cur")}),$(".con").each(function(e){e==i?$(this).show():$(this).hide()})},getData:function(){var i=this,e=new URLSearchParams;i.axiosPost("/room/info?id="+this.room_id,e).then(function(e){i.roomBasic.room_name=e.data.room_name,i.roomBasic.logo_img=e.data.logo_img,i.roomBasic.click_num=e.data.click_num,i.roomBasic.addr_url=e.data.addr_url,i.roomBasic.addr=e.data.addr,i.roomBasic.coordinate=e.data.coordinate,i.roomBasic.cover_img=e.data.cover_img,i.roomBasic.introduce=e.data.introduce,i.roomBasic.content=e.data.content,i.roomBasic.logo_pic=e.data.logo_img,i.roomBasic.title=e.data.title,i.roomBasic.sub_title=e.data.sub_title,i.roomBasic.intro=e.data.intro,i.roomBasic.start_num=e.data.start_num,i.roomBasic.online_url=e.data.online_url,i.roomBasic.online_cover=e.data.online_cover,i.roomBasic.mobile=e.data.mobile,i.roomBasic.wx_logo=e.data.wx_logo,i.$route.meta.title=e.data.room_name,i.deliver=e.data.deliver,i.roomBasic.cover_img&&(i.showCover=!0),i.WxShare()},function(i){console.log(i)})},getLens:function(){var i=this,e=this,t=new URLSearchParams;e.axiosPost("/room/lens?id="+this.room_id,t).then(function(t){e.$vux.loading.hide(),200==t.status?(e.lens=t.data,-1!=e.lens[0].vurl.indexOf(".m3u8")?(e.aliplayer_config.isLive=!0,e.aliplayer_config.autoplay=!1,e.aliplayer_config.rePlay=!1,e.play_status=1,e.firstMusic=!0):(e.aliplayer_config.isLive=!1,e.aliplayer_config.autoplay=!1,e.aliplayer_config.rePlay=!0,e.play_status=2),e.VideoCoverImg=e.lens[0].cover_img,e.aliplayer_config.source=e.lens[0].vurl,e.aliplayer_config.cover=e.lens[0].pic,e.aliplayer_config.id="J_prismPlayer",e.player=new Aliplayer(e.aliplayer_config),e.player.on("x5requestFullScreen",i.fullScreenHandle),e.player.on("x5cancelFullScreen",i.cancelFullScreenHandel),e.aliplayer_config.autoplay&&e.checkVideoPlayer(e.lens[0]),e.currentVideo=e.lens[0],e.initMusic()):i.$vux.alert.show({title:"温馨提示",content:t.message})},function(i){e.$vux.loading.hide()})},subComment:function(){this.$refs.comment.setComment(this.comment)},clearParent:function(){this.comment=""},reload:function(){this.showComment=!1,this.$nextTick(function(){this.showComment=!0})},checkVideoPlayer:function(i){var e=this;e.contabObj=setTimeout(function(){e.player.getCurrentTime()<=0&&e.switchVideo(i,2)},3e3)},imgCover:function(){this.playing=1,$(".videoCover").css("z-index","-1 !important")},hideCoverImg:function(){this.roomBasic.cover_img&&this.showCover&&(this.showCover=!1)},WxShare:function(){var i=this,e=window.location.href,t=this,s=new URLSearchParams;s.append("open_id",this.openid),s.append("url",e),s.append("apis","chooseWXPay,onMenuShareTimeline,onMenuShareAppMessage"),t.axiosPost("/wechat/jssdk",s).then(function(e){t.$vux.loading.hide(),200==e.status?(t.$wechat.config(JSON.parse(e.data)),t.$wechat.ready(function(){var i=location.protocol+"//"+document.domain+"/front/#/room?room_id="+t.room_id;t.$wechat.onMenuShareAppMessage({title:t.roomBasic.title+" "+t.roomBasic.sub_title,desc:t.roomBasic.introduce,link:i,imgUrl:t.roomBasic.wx_logo,success:function(){},cancel:function(){}}),t.$wechat.onMenuShareTimeline({title:t.roomBasic.title+" "+t.roomBasic.sub_title,link:i,imgUrl:t.roomBasic.wx_logo,success:function(){},cancel:function(){}})})):i.$vux.alert.show({title:"温馨提示",content:"微信参数错误"})},function(i){t.$vux.loading.hide()})},initMusic:function(){this.musicFlag=!this.firstMusic,this.firstMusic=!1,this.lensMusicObj=document.getElementById("lens-music"),this.liveMusicObj=document.getElementById("live-music"),this.lensMusicObj.currentTime=0,this.liveMusicObj.currentTime=0},playBgMusic:function(){if(this.liveCommon.checkAndroid())return!1;var i=this;i.musicFlag=!0,setTimeout(function(){i.liveMusicObj.play()},500)},playMusic:function(){if(this.liveCommon.checkAndroid())return!1;this.musicFlag?(this.musicFlag=!1,this.liveMusicObj.pause(),this.lensMusicObj.play()):(this.lensMusicObj.pause(),this.liveMusicObj.play(),this.musicFlag=!0)},getCurrentTime:function(){var i=new Date,e=i.getFullYear(),t=i.getMonth()+1<10?"0"+(i.getMonth()+1):i.getMonth()+1,s=i.getDate()<10?"0"+i.getDate():i.getDate(),a=i.getHours()<10?"0"+i.getHours():i.getHours(),o=i.getMinutes()<10?"0"+i.getMinutes():i.getMinutes(),n=i.getSeconds()<10?"0"+i.getSeconds():i.getSeconds();this.date=e+"-"+t+"-"+s+" "+a+":"+o+":"+n},goHome:function(){this.$router.replace({path:"/"})},fullScreenHandle:function(){},cancelFullScreenHandel:function(){},stopMUisc:function(){this.musicFlag=!1,this.player.pause()},checkLogin:function(){if(!Di.a.get("uid"))return this.$vux.alert.show({title:"温馨提示",content:"请先登录"}),Di.a.set("refer","/room?room_id="+this.room_id,{path:"/",expires:7200}),this.$router.replace({path:"/auth"}),console.log("请先登录"),!1},getSnaphot:function(){var i=this;i.loadding=!0;var e=new URLSearchParams;e.append("page",i.eduPage),e.append("id",i.room_id),i.axiosPost("/room/snapshot",e).then(function(e){i.loadding=!1,i.$vux.loading.hide(),200==e.status?e.data.length>0?(e.data.forEach(function(e,t){i.eduList.push(e)}),i.eduPage++):i.roomEnd=!0:i.$vux.alert.show({title:"温馨提示",content:e.message})},function(e){i.$vux.loading.hide()})},changeIndex:function(i){$(window).scrollTop()>5&&$(document).scrollTop(0);var e=this;switch(i){case"live":e.switchContent(0),e.showArticle=!1;break;case"article":e.switchContent(0),e.showArticle=!0;break;case"my":e.switchContent(1);var t=$(document).height()-$(window).height();$(document).scrollTop(t),e.showArticle=!1}e.findex=i}}}),Ws=function(){var i=this,e=i.$createElement,t=i._self._c||e;return t("div",{directives:[{name:"wechat-title",rawName:"v-wechat-title",value:i.$route.meta.title,expression:"$route.meta.title"}],staticClass:"room-info edu",attrs:{id:"edu"}},[t("div",{staticClass:"room-header edu-header"},[t("div",{staticClass:"company-info"},[t("div",{staticClass:"company"},[t("div",{staticClass:"company-logo"},[t("img",{attrs:{src:i.roomBasic.logo_img}})]),i._v(" "),t("dl",[t("dd",[t("p",[t("span",[i._v(i._s(i.roomBasic.intro))])])])])])]),i._v(" "),t("div",{staticClass:"room-banner-container"},[t("div",{staticClass:"swiper-container banner"},[t("div",{staticClass:"swiper-wrapper"},i._l(i.bannerList,function(e,s){return t("div",{key:s,staticClass:"swiper-slide"},[t("a",{attrs:{href:""!=e.links?e.links:"javascript:void(0);"}},[t("img",{attrs:{src:e.cover},on:{click:[function(t){return i.goBanner(e)},function(i){i.stopPropagation()}]}})])])}),0),i._v(" "),t("div",{staticClass:"swiper-pagination"})])]),i._v(" "),t("div",{staticClass:"lens-list"},[t("div",{staticClass:"videoList"},[t("div",{staticClass:"video",on:{click:i.imgCover}},[t("div",{staticClass:"prism-player ",attrs:{id:"J_prismPlayer"}}),i._v(" "),t("div",{class:1==i.play_status&&1!=i.playing||1==i.playinit?"videoCover online_video":"videoCover outline_video"},[t("img",{attrs:{src:i.VideoCoverImg}})])]),i._v(" "),i.lens&&i.lens.length>0?t("div",{staticStyle:{"text-align":"center"}},[i._v(i._s(i.currentVideo.name))]):i._e(),i._v(" "),i._l(i.lens,function(e){return t("dl",{staticClass:"live-1",on:{click:function(t){return i.switchVideo(e,1)}}},[t("dt",[t("img",{attrs:{src:e.cover_img}})]),i._v(" "),t("dd",[i._v(i._s(e.name))])])})],2)])]),i._v(" "),i.showCover?t("div",{staticClass:"liveHome",on:{click:i.hideCoverImg}},[t("img",{attrs:{src:i.roomBasic.cover_img}})]):i._e(),i._v(" "),t("remote-script",{attrs:{src:"https://g.alicdn.com/de/prismplayer/2.8.1/aliplayer-min.js"}})],1)},Zs=[],Gs={render:Ws,staticRenderFns:Zs},Ks=Gs,zs=t("C7Lr"),Qs=S,Ys=zs(qs,Ks,!1,Qs,"data-v-2c9e5442",null),Xs=Ys.exports,ia=t("adVT"),ea=(Boolean,Boolean,Boolean,String,String,Boolean,String,Object,Array,{name:"x-button",props:{type:{default:"default"},disabled:Boolean,mini:Boolean,plain:Boolean,text:String,actionType:String,showLoading:Boolean,link:[String,Object],gradients:{type:Array,validator:function(i){return 2===i.length}}},methods:{onClick:function(){!this.disabled&&Object(ia.a)(this.link,this.$router)}},computed:{noBorder:function(){return Array.isArray(this.gradients)},buttonStyle:function(){if(this.gradients)return{background:"linear-gradient(90deg, "+this.gradients[0]+", "+this.gradients[1]+")",color:"#FFFFFF"}},classes:function(){return[{"weui-btn_disabled":!this.plain&&this.disabled,"weui-btn_plain-disabled":this.plain&&this.disabled,"weui-btn_mini":this.mini,"vux-x-button-no-border":this.noBorder},this.plain?"":"weui-btn_"+this.type,this.plain?"weui-btn_plain-"+this.type:"",this.showLoading?"weui-btn_loading":""]}}}),ta=function(){var i=this,e=i.$createElement,t=i._self._c||e;return t("button",{staticClass:"weui-btn",class:i.classes,style:i.buttonStyle,attrs:{disabled:i.disabled,type:i.actionType},on:{click:i.onClick}},[i.showLoading?t("i",{staticClass:"weui-loading"}):i._e(),i._v(" "),i._t("default",[i._v(i._s(i.text))])],2)},sa=[],aa={render:ta,staticRenderFns:sa},oa=aa,na=t("C7Lr"),ra=k,la=na(ea,oa,!1,ra,null,null),ca=la.exports,da={name:"room_template",components:{roomMini:Qt,tea:ae,educate:De,roomOld:Ke,roomNew:vt,roomCommon:bt,roomNoHome:It,roomCommonNoHome:Dt,XButton:ca,snapshot:gs,educateNews:Ns,snapshotNew:Ss,snapshotNewVideo:Fs,educateCommon:Xs},data:function(){return{room_template:0,room_id:0,check_secret:0,secret_key:"",showPage:!1,auth_mobile:"",mobile_code:"",smsModel:"获取验证码",smsStatus:0,tip_message:"",check_pass:!1,localMobile:"",auth_template:1}},mounted:function(){document.getElementById("secret-input")&&document.getElementById("secret-input").addEventListener("blur",function(){window.scrollTo(0,0)},!1)},created:function(){this.room_id=this.$route.query.room_id,this.localMobile=localStorage.getItem("auth:room:"+this.room_id),this.getRoomTemplate()},methods:{getRoomTemplate:function(){var i=this;i.$vux.loading.show({text:"加载中~"}),i.showPage=!0;var e=new URLSearchParams;e.append("id",this.room_id),i.axiosPost("/room/template",e).then(function(e){i.$vux.loading.hide(),i.room_template=e.data.template,i.auth_template=e.data.auth_template,i.check_secret=e.data.secret,e.data.secret&&i.checkLocalStoreMobile(),"micromessenger"==window.navigator.userAgent.toLowerCase().match(/MicroMessenger/i)&&Ht.a.miniProgram.getEnv(function(e){e.miniprogram&&27!=i.room_id&&26!=i.room_id&&21!=i.room_id&&(i.room_template=9999)})})},checkLocalStoreMobile:function(){var i=this,e=this,t=localStorage.getItem("auth:room:"+this.room_id),s=localStorage.getItem("auth:room:sign:"+this.room_id);if(t){var a=new URLSearchParams;a.append("id",this.room_id),a.append("secretKey",t),a.append("roomSign",s),e.axiosPost("/room/check-secret",a).then(function(t){200==t.status&&(!0===t.data.check?e.check_pass=!0:(e.check_pass=!1,localStorage.removeItem("auth:room:"+i.room_id),localStorage.removeItem("auth:room:sign:"+i.room_id)))},function(i){e.$vux.loading.hide()})}},checkSecretKey:function(){var i=this;if(!this.auth_mobile)return this.tip_message="请填写手机号码",!1;this.tip_message="",i.$vux.loading.show({text:"加载中~"});var e=new URLSearchParams;e.append("id",this.room_id),e.append("secretKey",this.auth_mobile),i.axiosPost("/room/check-secret",e).then(function(e){i.$vux.loading.hide(),200==e.status?e.data.check?i.sendSms():i.tip_message="无效手机号码":i.tip_message=e.message},function(e){i.$vux.loading.hide()})},checkAuth:function(){var i=this;if(!this.auth_mobile||!this.mobile_code)return this.$vux.alert.show({title:"温馨提示",content:"请填写手机号码、验证码"}),!1;i.$vux.loading.show({text:"加载中~"});var e=localStorage.getItem("auth:room:sign:"+this.room_id),t=new URLSearchParams;t.append("id",this.room_id),t.append("mobile",this.auth_mobile),t.append("sms",this.mobile_code),t.append("roomSign",e),i.axiosPost("/room/auth-room",t).then(function(e){i.$vux.loading.hide(),200==e.status&&e.data.check?(localStorage.setItem("auth:room:"+i.room_id,i.auth_mobile),localStorage.setItem("auth:room:sign:"+i.room_id,e.data.token),i.check_secret=!1,window.scrollTo(0,0)):i.$vux.alert.show({title:"温馨提示",content:e.message})},function(e){i.$vux.loading.hide()})},sendSms:function(){var i=this;if(this.smsStatus)return!1;if(!/^1[3456789]\d{9}$/.test(this.auth_mobile))return this.tip_message="请输入正确的手机号码",!1;var e=new URLSearchParams;e.append("mobile",this.auth_mobile),i.axiosPost("/client/sms",e).then(function(e){i.$vux.loading.hide(),200==e.status?(i.smsModel=60,i.smsStatus=!0,i.countDown()):(i.smsStatus=0,i.tip_message=e.message)},function(e){i.smsStatus=0,i.$vux.loading.hide()})},countDown:function(){if(1==this.smsModel)this.smsModel="获取验证码",this.smsStatus=0;else{this.smsModel--;var i=this;setTimeout(function(){i.countDown()},1e3)}}}},ua=function(){var i=this,e=i.$createElement,t=i._self._c||e;return t("div",[i.localMobile||!i.check_secret||i.check_pass?t("div",[8==i.room_template?t("educate"):1==i.room_template?t("room-old"):2==i.room_template?t("roomNew"):4==i.room_template?t("room-common"):5==i.room_template?t("room-no-home"):6==i.room_template?t("room-common-no-home"):9==i.room_template?t("snapshot"):10==i.room_template||13==i.room_template?t("educate-news"):11==i.room_template?t("snapshot-new"):12==i.room_template?t("snapshot-new-video"):14==i.room_template?t("educate-common"):9999==i.room_template&&i.showPage?t("room-mini"):i._e()],1):t("div",{class:1==i.auth_template||3==i.auth_template?"secret-input auth_bg auth_bg_education":"secret-input auth_bg auth_bg_pets"},[t("div",{staticClass:"auth_education"},[i._v(i._s(1==i.auth_template||3==i.auth_template?"家长远程观看":"主人远程观看"))]),i._v(" "),t("div",{staticClass:"secret-input-box"},[t("div",{staticClass:"input-container"},[t("input",{directives:[{name:"model",rawName:"v-model",value:i.auth_mobile,expression:"auth_mobile"}],staticClass:"input-box auth_mobile",attrs:{type:"text",oninput:"if(value.length>11) value=value.slice(0,11)",name:"auth_mobile",placeholder:"请输入手机号码"},domProps:{value:i.auth_mobile},on:{input:function(e){e.target.composing||(i.auth_mobile=e.target.value)}}})]),i._v(" "),t("div",{staticClass:"input-container"},[t("input",{directives:[{name:"model",rawName:"v-model",value:i.mobile_code,expression:"mobile_code"}],staticClass:"input-box mobile_code",attrs:{type:"text",oninput:"if(value.length>4) value=value.slice(0,4)",name:"mobile-code",placeholder:"请输入验证码"},domProps:{value:i.mobile_code},on:{input:function(e){e.target.composing||(i.mobile_code=e.target.value)}}}),i._v(" "),t("div",{staticClass:"send_message auth_bg_color"},[i.smsStatus?t("span",{staticClass:"send-code"},[i._v(i._s(i.smsModel))]):t("span",{staticClass:"send-code",on:{click:i.checkSecretKey}},[i._v(i._s(i.smsModel))])])]),i._v(" "),i.tip_message?t("div",{staticClass:"input-container tip-message"},[i._v("\n        "+i._s(i.tip_message)+"\n        ")]):i._e(),i._v(" "),t("div",{staticClass:"secret-input-btn"},[t("x-button",{staticClass:"auth_bg_color",attrs:{type:"primary"},nativeOn:{click:function(e){return i.checkAuth(e)}}},[i._v("登录")])],1)])])])},ma=[],va={render:ua,staticRenderFns:ma},pa=va,ha=t("C7Lr"),_a=M,ga=ha(da,pa,!1,_a,"data-v-bfb7dbdc",null),fa=ga.exports,ya={name:"room",components:{"room-video":at,Product:be,Comments:Ie},data:function(){return{contabObj:{},contentSwiper:{},currentVideo:{},playing:!1,playinit:!1,VideoCoverImg:"",showCover:!1,galleryTop:{},play_status:1,room_id:0,room_info:{},showComment:!0,comment:"",total_price:0,lens:{},player:{},deliver:0,aliplayer_config:{id:"J_prismPlayer",autoplay:!1,playsinline:!0,showBuffer:!0,isLive:!0,useH5Prism:!0,useFlashPrism:!1,x5_video_position:"normal",x5_type:"h5",source:"",cover:"",rePlay:!1,preload:!1,skinLayout:[{name:"bigPlayButton",align:"cc",x:30,y:80},{name:"H5Loading",align:"cc"},{name:"tooltip",align:"blabs",x:0,y:56},{name:"thumbnail"},{name:"controlBar",align:"blabs",x:0,y:0,children:[{name:"liveDisplay",align:"tlabs",x:15,y:6},{name:"progress",align:"blabs",x:0,y:44},{name:"playButton",align:"tl",x:15,y:12},{name:"timeDisplay",align:"tl",x:10,y:7},{name:"fullScreenButton",align:"tr",x:10,y:12}]}]},roomBasic:{room_name:"",start_num:"",title:"",sub_title:"",intro:"",click_num:"",introduce:"",content:"",cover_img:"",coordinate:"",addr_url:"",addr:"",logo_img:"",online_url:"",online_cover:"",mobile:""},firstMusic:!1,musicFlag:!1,lensMusicObj:"",liveMusicObj:"",showMusic:!0,isAndroid:!1,date:new Date}},provide:function(){return{reload:this.reload}},created:function(){var i=navigator.userAgent;this.isAndroid=i.indexOf("Android")>-1||i.indexOf("Adr")>-1,this.room_id=this.$route.query.room_id>0?this.$route.query.room_id:9,this.getData(),this.getLens(),localStorage.setItem("roomid",this.room_id)},mounted:function(){var i=this;$(".prism-big-play-btn").click(function(){$(".videoCover").fadeOut()}),setTimeout(i.initSwiper,1e3);var e=$(".prism-player").width();$(".prism-player").height(e/16*9),$("#J_prismPlayer").click(function(){i.playinit=!1,i.checkVideoPlayer(i.currentVideo),i.musicFlag=!0,i.playBgMusic(),navigator.userAgent.match(/(phone|pad|pod|iPhone|iPod|ios|iPad|Android|Mobile|BlackBerry|IEMobile|MQQBrowser|JUC|Fennec|wOSBrowser|BrowserNG|WebOS|Symbian|Windows Phone)/i)}),$(".company .remarks p").click(function(){$(this).hasClass("hide")?$(this).removeClass("hide"):$(this).addClass("hide")}),i.isAndroid||(i.playinit=!0),this.timer=setInterval(function(){i.getCurrentTime()},1e3),window.addEventListener("blur",function(){i.musicFlag=!1,i.liveMusicObj.pause(),i.lensMusicObj.pause()}),window.addEventListener("focus",function(){i.musicFlag=!0,i.liveMusicObj.play()}),document.addEventListener("visibilitychange",function(){"hidden"===document.visibilityState&&(i.musicFlag=!1,i.liveMusicObj.pause(),i.lensMusicObj.pause())})},watch:{$route:function(){}},methods:{showMoreInfo:function(i){$(i).hasClass("hide")?$(i).removeClass("hide"):$(i).addClass("hide")},initSwiper:function(){},switchVideo:function(i,e){this.playinit=!1,clearTimeout(this.contabObj),$(".videoCover").fadeOut(),this.player.dispose(),this.VideoCoverImg="",$("#J_prismPlayer").empty(),this.play_status=1;var t=this;-1!=i.vurl.indexOf(".m3u8")?(t.aliplayer_config.isLive=!0,t.aliplayer_config.autoplay=!1,t.aliplayer_config.rePlay=!1,t.play_status=1):(t.aliplayer_config.isLive=!1,t.aliplayer_config.autoplay=!0,t.aliplayer_config.rePlay=!0,t.play_status=2),t.VideoCoverImg=i.cover_img,t.aliplayer_config.cover=i.pic,t.aliplayer_config.source=i.vurl,2==e&&(t.play_status=2,t.aliplayer_config.autoplay=!1,t.aliplayer_config.cover=i.reback_img,t.aliplayer_config.source=i.vurl_reback),t.currentVideo=i,t.aliplayer_config.id="J_prismPlayer",t.player=new Aliplayer(t.aliplayer_config),t.player.on("x5requestFullScreen",this.fullScreenHandle),t.player.on("x5cancelFullScreen",this.cancelFullScreenHandel),t.currentVideo=i,t.initMusic(),2==t.play_status&&t.playBgMusic()},switchContent:function(i){$(".swiper-slide").each(function(e){e==i?$(this).addClass("cur"):$(this).removeClass("cur")}),$(".con").each(function(e){e==i?$(this).show():$(this).hide(),1==i?($(".shoppingCarBox").fadeIn(),$(".sendMessMenu").hide()):2==i?($(".sendMessMenu").fadeIn(),$(".shoppingCarBox").hide()):($(".shoppingCarBox").hide(),$(".sendMessMenu").hide())})},getData:function(){var i=this,e=new URLSearchParams;i.axiosPost("/room/info?id="+this.room_id,e).then(function(e){i.roomBasic.room_name=e.data.room_name,i.roomBasic.logo_img=e.data.logo_img,i.roomBasic.click_num=e.data.click_num,i.roomBasic.addr_url=e.data.addr_url,i.roomBasic.addr=e.data.addr,i.roomBasic.coordinate=e.data.coordinate,i.roomBasic.cover_img=e.data.cover_img,i.roomBasic.introduce=e.data.introduce,i.roomBasic.content=e.data.content,i.roomBasic.logo_pic=e.data.logo_img,i.roomBasic.title=e.data.title,i.roomBasic.sub_title=e.data.sub_title,i.roomBasic.intro=e.data.intro,i.roomBasic.start_num=e.data.start_num,i.roomBasic.online_url=e.data.online_url,i.roomBasic.online_cover=e.data.online_cover,i.roomBasic.mobile=e.data.mobile,i.$route.meta.title=e.data.room_name,i.deliver=e.data.deliver,i.roomBasic.cover_img&&(i.showCover=!0),i.WxShare(),i.$nextTick(function(){})},function(i){console.log(i)})},getLens:function(){var i=this,e=this,t=new URLSearchParams;e.axiosPost("/room/lens?id="+this.room_id,t).then(function(t){e.$vux.loading.hide(),200==t.status?(e.lens=t.data,-1!=e.lens[0].vurl.indexOf(".m3u8")?(e.aliplayer_config.isLive=!0,e.aliplayer_config.autoplay=!1,e.aliplayer_config.rePlay=!1,e.play_status=1,e.firstMusic=!0):(e.aliplayer_config.isLive=!1,e.aliplayer_config.autoplay=!0,e.aliplayer_config.rePlay=!0,e.play_status=2),e.VideoCoverImg=e.lens[0].cover_img,e.aliplayer_config.source=e.lens[0].vurl,e.aliplayer_config.cover=e.lens[0].pic,e.aliplayer_config.id="J_prismPlayer",e.player=new Aliplayer(e.aliplayer_config),e.player.on("x5requestFullScreen",i.fullScreenHandle),e.player.on("x5cancelFullScreen",i.cancelFullScreenHandel),e.currentVideo=e.lens[0],e.initMusic(),2==e.play_status&&e.playBgMusic()):i.$vux.alert.show({title:"温馨提示",content:t.message})},function(i){e.$vux.loading.hide()})},countPrice:function(i){this.total_price=i},tobuy:function(){var i=this;if(i.deliver>0&&i.total_price<i.deliver)return this.$vux.alert.show({title:"温馨提示",content:"满"+i.deliver+"元起送，基地包邮到家"}),!1;this.$refs.product.buy_product(i.roomBasic.id,i.roomBasic.room_name,i.roomBasic.logo_pic,i.roomBasic.mobile)},subComment:function(){this.$refs.comment.setComment(this.comment)},clearParent:function(){this.comment=""},reload:function(){this.showComment=!1,this.$nextTick(function(){this.showComment=!0})},checkVideoPlayer:function(i){var e=this;e.contabObj=setTimeout(function(){var t=e.player.getCurrentTime();e.aliplayer_config.isLive&&t<=0&&e.switchVideo(i,2)},3e3)},imgCover:function(){this.playing=!0,$(".videoCover").css("z-index","-1 !important")},hideCoverImg:function(){this.roomBasic.cover_img&&this.showCover&&(this.showCover=!1)},WxShare:function(){var i=this,e=window.location.href,t=this,s=new URLSearchParams;s.append("open_id",this.openid),s.append("url",e),s.append("apis","chooseWXPay,onMenuShareTimeline,onMenuShareAppMessage"),t.axiosPost("/wechat/jssdk",s).then(function(e){t.$vux.loading.hide(),200==e.status?(t.$wechat.config(JSON.parse(e.data)),t.$wechat.ready(function(){2==t.play_status&&(t.musicFlag=!0,t.playBgMusic());var i=location.protocol+"//"+document.domain+"/front/#/room?room_id="+t.room_id;t.$wechat.onMenuShareAppMessage({title:t.roomBasic.title+" "+t.roomBasic.sub_title,desc:t.roomBasic.introduce,link:i,imgUrl:t.roomBasic.logo_img,success:function(){},cancel:function(){}}),t.$wechat.onMenuShareTimeline({title:t.roomBasic.title+" "+t.roomBasic.sub_title,link:i,imgUrl:t.roomBasic.logo_img,success:function(){},cancel:function(){}})})):i.$vux.alert.show({title:"温馨提示",content:"微信参数错误"})},function(i){t.$vux.loading.hide()})},initMusic:function(){this.musicFlag=!this.firstMusic,this.firstMusic=!1,this.lensMusicObj=document.getElementById("lens-music"),this.liveMusicObj=document.getElementById("live-music"),this.lensMusicObj.currentTime=0,this.liveMusicObj.currentTime=0},playBgMusic:function(){var i=this;i.musicFlag=!0,setTimeout(function(){i.liveMusicObj.play()},500)},playMusic:function(){this.musicFlag?(this.musicFlag=!1,this.liveMusicObj.pause(),this.lensMusicObj.play()):(this.lensMusicObj.pause(),this.liveMusicObj.play(),this.musicFlag=!0)},getCurrentTime:function(){var i=new Date,e=i.getFullYear(),t=i.getMonth()+1<10?"0"+(i.getMonth()+1):i.getMonth()+1,s=i.getDate()<10?"0"+i.getDate():i.getDate(),a=i.getHours()<10?"0"+i.getHours():i.getHours(),o=i.getMinutes()<10?"0"+i.getMinutes():i.getMinutes(),n=i.getSeconds()<10?"0"+i.getSeconds():i.getSeconds();this.date=e+"-"+t+"-"+s+" "+a+":"+o+":"+n},goHome:function(){this.$router.replace({path:"/"})},fullScreenHandle:function(){this.musicFlag=!0,this.liveMusicObj.play(),this.player.tag.style.height=window.height},cancelFullScreenHandel:function(){console.log("stopMUisc")}}},Ca=function(){var i=this,e=i.$createElement,t=i._self._c||e;return t("div",{directives:[{name:"wechat-title",rawName:"v-wechat-title",value:i.$route.meta.title,expression:"$route.meta.title"}],staticClass:"room-info"},[t("div",{staticClass:"room-deader"},[t("div",{staticClass:"video",on:{click:i.imgCover}},[t("div",{staticClass:"prism-player",attrs:{id:"J_prismPlayer"}}),i._v(" "),t("div",{class:1==i.play_status&&!1===i.playing||!0===i.playinit?"videoCover online_video":"videoCover outline_video"},[t("img",{attrs:{src:i.VideoCoverImg}})]),i._v(" "),i._m(0),i._v(" "),i.currentVideo.live_music?t("div",{staticClass:"live-music"},[t("div",{class:i.musicFlag?"live-music-icon active":"live-music-icon",on:{click:i.playMusic}})]):i._e(),i._v(" "),t("div",{staticClass:"live-home-icon",on:{click:i.goHome}}),i._v(" "),t("div",{staticClass:"live-view-icon"},[i._v("热度 "+i._s(i.roomBasic.click_num)+" 人")])]),i._v(" "),t("div",{staticClass:"live-music-detail"},[t("audio",{staticStyle:{display:"none"},attrs:{src:i.currentVideo.lens_music,loop:"loop",id:"lens-music"}}),i._v(" "),t("audio",{staticStyle:{display:"none"},attrs:{src:i.currentVideo.live_music,loop:"loop",id:"live-music"}})])]),i._v(" "),t("div",{staticClass:"live-room-main"},[t("div",{staticClass:"swiper-container gallery-thumbs"},[t("div",{staticClass:"swiper-wrapper tabMenu"},[t("div",{staticClass:"swiper-slide cur",on:{click:function(e){return i.switchContent(0)}}},[i._v("实时视频")]),i._v(" "),t("div",{staticClass:"swiper-slide",on:{click:function(e){return i.switchContent(1)}}},[i._v("生态商城")]),i._v(" "),t("div",{staticClass:"swiper-slide",on:{click:function(e){return i.switchContent(2)}}},[i._v("互动评论")]),i._v(" "),t("div",{staticClass:"swiper-slide",on:{click:function(e){return i.switchContent(3)}}},[i._v("精彩短片")])])]),i._v(" "),t("div",{staticClass:"live-room-content"},[t("div",{staticClass:"swiper-container gallery-top"},[t("div",{staticClass:"swiper-wrapper tabCon"},[t("div",{staticClass:"swiper-slide con"},[t("div",{staticClass:"swiper-container scroll"},[t("div",{staticClass:"swiper-wrapper"},[t("div",{staticClass:"swiper-slide slidescroll"},[t("h2",{staticClass:"tit videoIcon"},[i._v("溯源镜头")]),i._v(" "),t("div",{staticClass:"videoList swiper-no-swiping"},i._l(i.lens,function(e){return t("dl",{staticClass:"live-1",on:{click:function(t){return i.switchVideo(e,1)}}},[t("dt",[t("img",{attrs:{src:e.cover_img}})]),i._v(" "),t("dd",[i._v(i._s(e.name))])])}),0),i._v(" "),t("h2",{staticClass:"tit shopCarIcon"},[i._v("生态介绍")]),i._v(" "),t("div",{staticClass:"company"},[t("dl",[t("dt",[t("img",{attrs:{src:i.roomBasic.logo_img}})]),i._v(" "),t("dd",[t("h3",[t("strong",[i._v(i._s(i.roomBasic.title))]),i._v(i._s(i.roomBasic.sub_title))]),i._v(" "),t("p",[t("span",[i._v(i._s(i.roomBasic.intro))])])])]),i._v(" "),t("div",{staticClass:"remarks"},[t("span",[i._v("生态简介：")]),i._v(" "),t("p",{staticClass:"hide",nativeOn:{click:function(e){return i.showMoreInfo(this)}}},[i._v("\n                        "+i._s(i.roomBasic.introduce))])])]),i._v(" "),t("div",{staticClass:"room_content",domProps:{innerHTML:i._s(i.roomBasic.content)}},[i._v("\n                    "+i._s(i.roomBasic.content)+"\n                  ")])])])])]),i._v(" "),t("div",{staticClass:"swiper-slide con",attrs:{id:"live"}},[t("div",{staticClass:"swiper-container scroll "},[t("div",{staticClass:"swiper-wrapper"},[t("div",{staticClass:"swiper-slide slidescroll"},[t("div",{staticClass:"my-order"},[t("router-link",{attrs:{to:{path:"orders"}}},[t("span",[i._v("我的订单>")])])],1),i._v(" "),t("h2",{staticClass:"tit shopCarIcon"},[i._v("生态商城")]),i._v(" "),t("div",{staticClass:"company"},[t("dl",[t("dt",[t("img",{attrs:{src:i.roomBasic.logo_img}})]),i._v(" "),t("dd",[t("h3",[t("strong",[i._v(i._s(i.roomBasic.title))]),i._v(i._s(i.roomBasic.sub_title))]),i._v(" "),t("p",[t("span",[i._v(i._s(i.roomBasic.intro))])])])]),i._v(" "),t("div",{staticClass:"remarks"},[t("span",[i._v("生态简介：")]),i._v(" "),t("p",{staticClass:"hide",nativeOn:{click:function(e){return i.showMoreInfo(this)}}},[i._v("\n                        "+i._s(i.roomBasic.introduce))])])]),i._v(" "),t("div",{staticClass:"shopList"},[t("product",{ref:"product",attrs:{room_id:i.room_id},on:{buy_price:i.countPrice}})],1)])])])]),i._v(" "),t("div",{staticClass:"swiper-slide con"},[t("div",{staticClass:"swiper-container scroll"},[t("div",{staticClass:"swiper-wrapper"},[t("div",{staticClass:"swiper-slide slidescroll"},[t("h2",{staticClass:"tit messIcon"},[i._v("互动评论")]),i._v(" "),i.showComment?t("comments",{ref:"comment",attrs:{room_id:i.room_id},on:{clearComment:i.clearParent}}):i._e()],1)])])]),i._v(" "),t("div",{staticClass:"swiper-slide con"},[t("div",{staticClass:"swiper-container scroll"},[t("div",{staticClass:"swiper-wrapper"},[t("div",{staticClass:"swiper-slide slidescroll"},[t("h2",{staticClass:"tit videoIcon"},[i._v("精彩短片")]),i._v(" "),t("div",{staticClass:"filmList"},[t("room-video",{attrs:{room_id:i.room_id}})],1),i._v(" "),t("div",{staticClass:"footerLogo"})])])])])])])])]),i._v(" "),t("div",{staticClass:"sendMessMenu",staticStyle:{display:"none"}},[t("div",{staticClass:"sendMessBox"},[t("input",{directives:[{name:"model",rawName:"v-model",value:i.comment,expression:"comment"}],attrs:{type:"text",value:"",placeholder:"输入评论内容..."},domProps:{value:i.comment},on:{input:function(e){e.target.composing||(i.comment=e.target.value)}}}),i._v(" "),t("button",{on:{click:i.subComment}})])]),i._v(" "),t("div",{staticClass:"shoppingCarBox",staticStyle:{display:"none"}},[t("dl",[t("dt",[t("h4",[i._v("¥"+i._s(i.total_price))]),i._v(" "),0==i.deliver?t("p",[i._v("基地到家，全场免运费")]):t("p",[i._v("满"+i._s(i.deliver)+"元起送，基地包邮到家")])]),i._v(" "),t("dd",[t("a",{attrs:{href:"javascript:void(0)"},on:{click:i.tobuy}},[i._v("去结算")])])])]),i._v(" "),i.showCover?t("div",{staticClass:"liveHome",on:{click:i.hideCoverImg}},[t("img",{attrs:{src:i.roomBasic.cover_img}})]):i._e(),i._v(" "),t("remote-script",{attrs:{src:"https://g.alicdn.com/de/prismplayer/2.7.1/aliplayer-min.js"}})],1)},wa=[function(){var i=this,e=i.$createElement,s=i._self._c||e;return s("div",{staticClass:"logo"},[s("img",{attrs:{src:t("Z2Ou")}})])}],ba={render:Ca,staticRenderFns:wa},xa=ba,Ba=t("C7Lr"),$a=P,Sa=Ba(ya,xa,!1,$a,"data-v-0436e87a",null),ka=Sa.exports,Ma={name:"LiveHead",data:function(){return{searchStr:"",headImg:""}},props:["room_name"],created:function(){this.room_name&&(this.searchStr=this.room_name);var i=localStorage.getItem("uimg");i&&void 0!==i&&(this.headImg=i)},methods:{searchRoom:function(){this.searchStr?(this.$router.replace({path:"/",query:{room_name:this.searchStr}}),this.$emit("searchRoom")):this.$vux.alert.show({title:"温馨提示",content:"请填写直播间名称"})},goHome:function(){this.$router.replace({path:"/"})},checkContent:function(){console.log(this.searchStr)}}},Pa=function(){var i=this,e=i.$createElement,t=i._self._c||e;return t("div",{staticClass:"live-head-container"},[t("div",{staticClass:"search-bar"},[i.headImg?t("div",{staticClass:"user-head",style:{backgroundImage:"url("+i.headImg+")"}}):t("div",{staticClass:"user-head"}),i._v(" "),t("div",{staticClass:"live-search-box"},[t("div",{staticClass:"search-box"},[t("i",{staticClass:"live-search-icon"}),i._v(" "),t("input",{directives:[{name:"model",rawName:"v-model.trim",value:i.searchStr,expression:"searchStr",modifiers:{trim:!0}}],staticClass:"search-input",attrs:{placeholder:"直播间名称"},domProps:{value:i.searchStr},on:{input:function(e){e.target.composing||(i.searchStr=e.target.value.trim())},blur:function(e){return i.$forceUpdate()}}}),i._v(" "),t("i",{staticClass:"live-search-next",on:{click:i.searchRoom}})])]),i._v(" "),t("div",{staticClass:"yclive-home",on:{click:i.goHome}})])])},La=[],Ia={render:Pa,staticRenderFns:La},Oa=Ia,Va=t("C7Lr"),Aa=L,Fa=Va(Ma,Oa,!1,Aa,"data-v-04287493",null),ja=Fa.exports,Ta=(Boolean,String,{name:"load-more",props:{showLoading:{type:Boolean,default:!0},tip:String}}),Ea=function(){var i=this,e=i.$createElement,t=i._self._c||e;return t("div",{staticClass:"vux-loadmore weui-loadmore",class:{"weui-loadmore_line":!i.showLoading,"weui-loadmore_dot":!i.showLoading&&!i.tip}},[i.showLoading?t("i",{staticClass:"weui-loading"}):i._e(),i._v(" "),t("span",{directives:[{name:"show",rawName:"v-show",value:i.tip||!i.showLoading,expression:"tip || !showLoading"}],staticClass:"weui-loadmore__tips"},[i._v(i._s(i.tip))])])},Ra=[],Da={render:Ea,staticRenderFns:Ra},Ua=Da,Ha=t("C7Lr"),Ja=I,Na=Ha(Ta,Ua,!1,Ja,null,null),qa=Na.exports,Wa={name:"IndexNew",components:{LiveHead:ja,LiveFooter:bi,LoadMore:qa},data:function(){return{pageSize:1,findex:"live",activity:{},bannerList:[],menuList:[],roomList:[],bannerSwiper:{},pageSwiper:{},navSwiper:{},loadding:!1,roomEnd:!1,roomType:2,categoryId:1,roomName:"",containerId:"live-main-container1",currentSwiperId:0}},watch:{$route:function(){}},created:function(){this.getHeader(),this.getBanner(),this.getActivity(),this.$route.query.room_name&&(this.roomType=1,this.roomName=this.$route.query.room_name),this.getRoomList()},mounted:function(){var i=this;window.addEventListener("scroll",this.handleScroll,!0),setTimeout(function(){i.$route.query.room_name&&i.pageSwiper.slideTo(1,300)},1500)},destroyed:function(){window.removeEventListener("scroll",this.handleScroll,!1)},methods:{initSwiperMenu:function(){var i,e,t,s,a,o,n,r,l,c,d,u,m=this;m.navSwiper=new Swiper("#nav",{slidesPerView:5,freeMode:!0,observer:!0,observeParents:!0,on:{init:function(){l=this.slides.eq(0).css("width"),c=this.$el.find(".bar"),c.css("width",l),c.transition(300),i=this.slides.length>0?this.slides[this.slides.length-1].offsetLeft:0,n=parseInt(this.$wrapperEl.css("width")),r=0;for(var e=0;e<this.slides.length;e++)r+=parseInt(this.slides.eq(e).css("width"))}}}),m.navSwiper.$el.on("touchstart",function(i){i.preventDefault()}),m.navSwiper.on("tap",function(i){d=this.clickedIndex,u=this.slides.eq(d),m.pageSwiper.slideTo(d,0),this.slides.find("span").css("font-size","1rem"),u.find("span").css("font-size","1.2rem"),m.categoryId=u.find("span").attr("category"),m.changeRoomList(d),m.currentSwiperId=this.clickedIndex}),m.pageSwiper=new Swiper("#page",{watchSlidesProgress:!0,resistanceRatio:0,noSwiping:!0,observer:!0,observeParents:!0,on:{touchMove:function(){e=this.progress,c.transition(0),c.transform("translateX("+i*e+"px)");for(var s=0;s<this.slides.length;s++)t=this.slides[s].progress,Math.abs(t)<1&&m.navSwiper.slides.eq(s).find("span").css("font-size","1.2rem")},transitionStart:function(){s=this.activeIndex,a=m.navSwiper.slides[s].offsetLeft,c.transition(300),c.transform("translateX("+a+"px)"),m.navSwiper.slides.eq(s).find("span").transition(300),m.navSwiper.slides.eq(s).find("span").css("font-size","1.2rem"),s>0&&(m.navSwiper.slides.eq(s-1).find("span").transition(300),m.navSwiper.slides.eq(s-1).find("span").css("font-size","1rem")),s<this.slides.length&&(m.navSwiper.slides.eq(s+1).find("span").transition(300),m.navSwiper.slides.eq(s+1).find("span").css("font-size","1rem")),o=m.navSwiper.slides[s].offsetLeft,m.navSwiper.setTransition(300),l=m.navSwiper.slides.eq(0).css("width"),r=0;for(var i=0;i<m.navSwiper.slides.length;i++)r+=parseInt(m.navSwiper.slides.eq(i).css("width"));o<(n-parseInt(l))/2?m.navSwiper.setTranslate(0):o>r-(parseInt(l)+n)/2?m.navSwiper.setTranslate(n-r):m.navSwiper.setTranslate((n-parseInt(l))/2-o),m.categoryId=m.navSwiper.slides.eq(s).find("span").attr("category"),m.changeRoomList(s)}}})},initSwiperBanner:function(){this.bannerSwiper=new Swiper(".banner",{loop:!0,observer:!0,observeParents:!0,pagination:{el:".swiper-pagination",type:"bullets",bulletActiveClass:"live-banner-active"},autoplay:{delay:3e3,stopOnLastSlide:!1,disableOnInteraction:!0}})},getHeader:function(){var i=this,e=new URLSearchParams;i.axiosPost("/live/category",e).then(function(e){200==e.status?(i.menuList=e.data,setTimeout(i.initSwiperMenu(),1500)):i.$vux.alert.show({title:"温馨提示",content:e.message})},function(e){i.$vux.loading.hide()})},getRoomList:function(){var i=this;if(i.loadding)return!1;i.$vux.loading.show({text:"加载中~"}),i.loadding=!0;var e=new URLSearchParams;e.append("room_type",i.roomType),e.append("room_name",i.roomName),e.append("page",i.pageSize),e.append("category",i.categoryId),i.axiosPost("/live/room",e).then(function(e){i.loadding=!1,i.$vux.loading.hide(),200==e.status?e.data.length>0?(e.data.forEach(function(e,t){i.roomList.push(e)}),i.pageSize++):i.roomEnd=!0:i.$vux.alert.show({title:"温馨提示",content:e.message})},function(e){i.$vux.loading.hide()})},changeRoomList:function(i){this.pageSize=1,this.roomList=[],this.roomEnd=!1,this.roomType=0==i?2:1,this.getRoomList()},getActivity:function(){var i=this,e=new URLSearchParams;i.axiosPost("/live/activity",e).then(function(e){200==e.status?i.activity=e.data:i.$vux.alert.show({title:"温馨提示",content:e.message})},function(e){i.$vux.loading.hide()})},getBanner:function(){var i=this,e=new URLSearchParams;i.axiosPost("/live/banner",e).then(function(e){200==e.status?(i.bannerList=e.data,i.initSwiperBanner()):i.$vux.alert.show({title:"温馨提示",content:e.message})},function(e){i.$vux.loading.hide()})},goActivity:function(i){i.activity_url&&this.goUrl(i.activity_url)},goBanner:function(i){i.links&&this.goUrl(i.links)},goUrl:function(i){window.location.href=i},goRoom:function(i){1==this.DEBUG?this.$router.replace({path:"/room",query:{room_id:i.room_id,from:"groupmessage",isappinstalled:0}}):window.location.replace(location.protocol+"//"+document.domain+"/front/#/room?room_id="+i.room_id)},handleScroll:function(){var i=this;if(document.getElementById("live-main-container"+i.categoryId)){var e=document.getElementById("live-main-container"+i.categoryId).clientHeight,t=document.getElementById("live-main-container"+i.categoryId);e+t.scrollTop+1>=t.scrollHeight&&!i.loadding&&!i.roomEnd&&this.getRoomList()}},searchRoom:function(){this.$route.query.room_name&&(this.roomList=[],this.pageSize=1,this.roomType=1,this.roomName=this.$route.query.room_name,this.pageSwiper.slideTo(1,300),this.getRoomList())}}},Za=function(){var i=this,e=i.$createElement,t=i._self._c||e;return t("div",{staticClass:"live-index-container live-h100"},[t("div",{staticClass:"header",attrs:{id:"top"}},[t("live-head",{attrs:{room_name:i.roomName},on:{searchRoom:i.searchRoom}}),i._v(" "),t("div",{staticClass:"live-menu-bar"},[t("div",{staticClass:"swiper-container",attrs:{id:"nav"}},[t("div",{staticClass:"swiper-wrapper"},i._l(i.menuList,function(e,s){return t("div",{key:s,staticClass:"swiper-slide"},[t("span",{class:0==s?"active":0,attrs:{category:e.id}},[i._v(i._s(e.title))])])}),0)])]),i._v(" "),t("div",{staticClass:"live-header-bg"})],1),i._v(" "),t("div",{staticClass:"live-main swiper-container",attrs:{id:"page"}},[t("div",{staticClass:"swiper-wrapper"},[t("div",{staticClass:"swiper-slide slidepage swiper-no-swiping"},[t("div",{staticClass:"live-main-container",attrs:{id:"live-main-container1"}},[t("div",{staticClass:"swiper-container banner"},[t("div",{staticClass:"swiper-wrapper"},i._l(i.bannerList,function(e,s){return t("div",{key:s,staticClass:"swiper-slide"},[t("img",{attrs:{src:e.cover},on:{click:[function(t){return i.goBanner(e)},function(i){i.stopPropagation()}]}})])}),0),i._v(" "),t("div",{staticClass:"swiper-pagination"})]),i._v(" "),i.activity&&i.activity.hasOwnProperty("title")&&i.activity.title?t("div",{staticClass:"live-activity"},[t("div",{staticClass:"live-activity-head"},[i._v("活动")]),i._v(" "),t("div",{staticClass:"live-activity-box"},[t("div",{staticClass:"live-activity-content"},[t("div",{staticClass:"live-activity-title"},[i._v("\n                  "+i._s(i.activity.title)+"\n                ")]),i._v(" "),t("div",[t("span",{staticClass:"live-activity-date"},[i._v(i._s(i.activity.activity_time))]),i._v(" "),t("span",{staticClass:"live-color"},[i._v("开始热播")])])])]),i._v(" "),t("div",{staticClass:"live-activity-btn",on:{click:function(e){return i.goActivity(i.activity)}}},[i._v("围观")])]):i._e(),i._v(" "),t("div",{staticClass:"live-lists-head"},[i._v("\n            热点推荐\n          ")]),i._v(" "),t("div",{staticClass:"live-lists-content"},[t("ul",{staticClass:"live-items"},i._l(i.roomList,function(e,s){return t("li",{key:s,staticClass:"live-item",on:{click:function(t){return i.goRoom(e)}}},[t("div",{staticClass:"live-item-show"},[t("img",{attrs:{src:e.online_cover}})]),i._v(" "),t("div",{staticClass:"live-item-des"},[t("div",{staticClass:"live-item-info"},[t("div",{staticClass:"live-item-title"},[i._v("\n                      "+i._s(e.title)+"\n                    ")]),i._v(" "),t("div",{staticClass:"live-item-intro"},[i._v("\n                      "+i._s(e.intro)+"\n                    ")])]),i._v(" "),t("span",{staticClass:"live-item-view"},[i._v(i._s(e.click_num))])])])}),0)])])]),i._v(" "),i._l(i.menuList,function(e,s){return s>0?t("div",{key:s,staticClass:"swiper-slide slidepage swiper-no-swiping"},[t("div",{staticClass:"live-lists-content live-main-container",attrs:{id:"live-main-container"+e.id}},[t("ul",{staticClass:"live-items live-items-all"},i._l(i.roomList,function(e,s){return t("li",{key:s,staticClass:"live-item",on:{click:function(t){return i.goRoom(e)}}},[t("div",{staticClass:"live-item-show"},[t("img",{attrs:{src:e.online_cover}})]),i._v(" "),t("div",{staticClass:"live-item-des"},[t("div",{staticClass:"live-item-info"},[t("div",{staticClass:"live-item-title"},[i._v("\n                      "+i._s(e.title)+"\n                    ")]),i._v(" "),t("div",{staticClass:"live-item-intro"},[i._v("\n                      "+i._s(e.intro)+"\n                    ")])]),i._v(" "),t("span",{staticClass:"live-item-view"},[i._v(i._s(e.click_num))])])])}),0)])]):i._e()})],2)]),i._v(" "),t("live-footer",{attrs:{findex:i.findex}})],1)},Ga=[],Ka={render:Za,staticRenderFns:Ga},za=Ka,Qa=t("C7Lr"),Ya=O,Xa=Qa(Wa,za,!1,Ya,"data-v-0c2853dc",null),io=Xa.exports,eo={name:"LiveVideo",components:{LiveHead:ja,LiveFooter:bi},data:function(){return{pageSize:1,findex:"video",videoList:[],loadding:!1,videoEnd:!1,player:{},video_height:0,aliplayer_config:{id:"",width:"100%",height:"195px",autoplay:!0,playsinline:!0,showBuffer:!0,isLive:!1,x5_type:!0,source:"",cover:"",skinLayout:[{name:"bigPlayButton",align:"cc",x:30,y:80},{name:"H5Loading",align:"cc"},{name:"tooltip",align:"blabs",x:0,y:56},{name:"thumbnail"},{name:"controlBar",align:"blabs",x:0,y:0,children:[{name:"liveDisplay",align:"tlabs",x:15,y:6},{name:"progress",align:"blabs",x:0,y:44},{name:"playButton",align:"tl",x:15,y:12},{name:"timeDisplay",align:"tl",x:10,y:7},{name:"fullScreenButton",align:"tr",x:10,y:12},{name:"volume",align:"tr",x:5,y:10}]}]}}},mounted:function(){window.addEventListener("scroll",this.handleVideoScroll,!0)},destroyed:function(){window.removeEventListener("scroll",this.handleVideoScroll,!0)},created:function(){var i=document.body.clientWidth-15,e=9*i/16;this.video_height=e+"px",this.aliplayer_config.height=this.video_height,this.getVideo()},methods:{getVideo:function(){var i=this;if(i.loadding)return!1;i.$vux.loading.show({text:"加载中~"}),i.loadding=!0;var e=new URLSearchParams;e.append("page",i.pageSize),i.axiosPost("/live/video",e).then(function(e){i.loadding=!1,i.$vux.loading.hide(),200==e.status?e.data.length>0?(e.data.forEach(function(e,t){e.status=1,e.vno="J_prismPlayer"+e.id,i.videoList.push(e)}),i.pageSize++):i.videoEnd=!0:i.$vux.alert.show({title:"温馨提示",content:e.message})},function(e){i.$vux.loading.hide()})},handleVideoScroll:function(){var i=this;if(document.getElementById("live-video-container")){var e=document.getElementById("live-video-container").clientHeight,t=document.getElementById("live-video-container");e+t.scrollTop+1>=t.scrollHeight&&!i.loadding&&!i.roomEnd&&this.getVideo()}},goHome:function(){this.$router.replace({path:"/"})},playervideo:function(i,e,t){t.status=0,this.player.length>0&&this.player.dispose();var s=this;s.aliplayer_config.source=e,s.aliplayer_config.id=i,this.player=new Aliplayer(s.aliplayer_config),this.clickNum(t)},clickNum:function(i){var e=this;if(i.click++,e.subStatus)return!1;var t=new URLSearchParams;t.append("cid",i.id),t.append("ctype","video"),e.subStatus=!0,e.axiosPost("/room/click-num",t).then(function(i){e.subStatus=!1,200==i.status||e.$vux.alert.show({title:"温馨提示",content:i.message})},function(i){e.subStatus=!1})}}},to=function(){var i=this,e=i.$createElement,t=i._self._c||e;return t("div",{staticClass:"live-index-container live-h100"},[t("div",{staticClass:"header",attrs:{id:"top"}},[t("live-head"),i._v(" "),i._m(0),i._v(" "),t("div",{staticClass:"live-header-bg"})],1),i._v(" "),t("div",{staticClass:"live-main swiper-container"},[t("div",{staticClass:"live-video-list live-main-container",attrs:{id:"live-video-container"}},[i._m(1),i._v(" "),i._m(2),i._v(" "),t("div",{staticClass:"live-video-items"},i._l(i.videoList,function(e,s){return t("div",{key:s,staticClass:"live-video-item"},[t("div",{staticClass:"live-video-cover"},[t("div",{staticClass:"video_item"},[t("div",{staticClass:"prism-player-video",style:{display:1==e.status?"none":"block"},attrs:{id:e.vno},on:{click:function(t){return i.clickNum(e)}}})]),i._v(" "),1==e.status?t("img",{attrs:{src:e.cover_img},on:{click:function(t){return i.playervideo(e.vno,e.vurl,e)}}}):i._e(),i._v(" "),1==e.status?t("div",{staticClass:"play-btn",on:{click:function(t){return i.playervideo(e.vno,e.vurl,e)}}}):i._e()]),i._v(" "),t("div",{staticClass:"live-room-info"},[t("span",{staticClass:"live-video-user"},[t("img",{attrs:{src:e.logo_img}})]),i._v(" "),t("div",{staticClass:"live-video-names"},[t("div",{staticClass:"live-video-name-info"},[t("span",{staticClass:"live-video-name"},[i._v(i._s(e.title))])])]),i._v(" "),t("span",{staticClass:"live-video-start"},[i._v(i._s(e.click_num))]),i._v(" "),t("span",{staticClass:"live-video-len"},[i._v(i._s(e.video_length))])])])}),0)])]),i._v(" "),t("live-footer",{attrs:{findex:i.findex}}),i._v(" "),t("remote-script",{attrs:{src:"https://g.alicdn.com/de/prismplayer/2.7.1/aliplayer-min.js"}})],1)},so=[function(){var i=this,e=i.$createElement,t=i._self._c||e;return t("div",{staticClass:"live-menu-bar",attrs:{id:"nav"}},[t("span",{staticClass:"active"},[i._v("精彩短片")])])},function(){var i=this,e=i.$createElement,t=i._self._c||e;return t("div",{staticClass:"live-video-head"},[t("div",{staticClass:"live-video-menu"},[t("span",{staticClass:"active"},[i._v("短片")]),i._v(" "),t("span",[i._v("精彩截图")])])])},function(){var i=this,e=i.$createElement,t=i._self._c||e;return t("div",{staticClass:"live-video-times"},[t("span",[i._v("实时更新")])])}],ao={render:to,staticRenderFns:so},oo=ao,no=t("C7Lr"),ro=V,lo=no(eo,oo,!1,ro,"data-v-281474a7",null),co=lo.exports,uo={name:"LiveUserHead",data:function(){return{userInfo:{},headImg:"../../static/images/defaultUser.png",userName:"云窗在线"}},created:function(){var i=localStorage.getItem("uimg");i&&void 0!==i&&(this.headImg=i);var e=localStorage.getItem("uname");e&&void 0!==e&&(this.userName=e),this.getData()},methods:{getData:function(){}}},mo=function(){var i=this,e=i.$createElement,t=i._self._c||e;return t("div",{staticClass:"live-my-head"},[i.headImg?t("div",{staticClass:"live-my-img",style:{backgroundImage:"url("+i.headImg+")"}}):t("div",{staticClass:"live-my-img"}),i._v(" "),t("div",{staticClass:"live-my-info"},[t("p",{staticClass:"user-name"},[i._v(i._s(i.userName))]),i._v(" "),i._m(0)]),i._v(" "),t("div",{staticClass:"live-my-head-bg"})])},vo=[function(){var i=this,e=i.$createElement,t=i._self._c||e;return t("p",[t("span",[i._v("云窗会员")]),i._v(" "),t("span",{staticClass:"live-level"},[i._v("LV1")])])}],po={render:mo,staticRenderFns:vo},ho=po,_o=t("C7Lr"),go=A,fo=_o(uo,ho,!1,go,"data-v-b0dedeb6",null),yo=fo.exports,Co={name:"LiveUser",components:{LiveUserHead:yo,LiveFooter:bi},data:function(){return{findex:"user",uitem:0}},created:function(){},methods:{goDetail:function(i){switch(this.uitem=i,i){case 1:this.$router.replace({path:"/orders"});break;case 2:this.$router.replace({path:"/addr"});break;case 3:this.$router.replace({path:"/roomStart"})}}}},wo=function(){var i=this,e=i.$createElement,t=i._self._c||e;return t("div",{staticClass:"live-index-container live-h100"},[t("live-user-head"),i._v(" "),t("div",{staticClass:"live-my-main"},[t("div",{staticClass:"live-main-container"},[t("div",{staticClass:"live-user-item"},[t("ul",[t("li",{class:1==i.uitem?"active":"",on:{click:function(e){return i.goDetail(1)}}},[t("i",{staticClass:"live-my-icon live-icon-myorder"}),i._v("\n            我的订单\n          ")]),i._v(" "),t("li",{class:2==i.uitem?"active":"",on:{click:function(e){return i.goDetail(2)}}},[t("i",{staticClass:"live-my-icon live-icon-myaddr"}),i._v("\n            我的地址\n          ")]),i._v(" "),t("li",{class:3==i.uitem?"active":"",on:{click:function(e){return i.goDetail(3)}}},[t("i",{staticClass:"live-my-icon live-icon-mystart"}),i._v("\n            我的关注\n          ")]),i._v(" "),t("li",{class:4==i.uitem?"active":"",on:{click:function(e){return i.goDetail(4)}}},[t("i",{staticClass:"live-my-icon live-icon-apply"}),i._v("\n            开通可视溯源\n          ")])])]),i._v(" "),t("div",{staticClass:"live-user-item live-sys-item"},[t("ul",[t("li",{class:5==i.uitem?"active":"",on:{click:function(e){return i.goDetail(5)}}},[t("i",{staticClass:"live-my-icon live-icon-cooperate"}),i._v("\n            我要合作\n          ")]),i._v(" "),t("li",{class:6==i.uitem?"active":"",on:{click:function(e){return i.goDetail(6)}}},[t("i",{staticClass:"live-my-icon live-icon-service"}),i._v("\n            客服中心\n          ")])])])])]),i._v(" "),t("live-footer",{attrs:{findex:i.findex}})],1)},bo=[],xo={render:wo,staticRenderFns:bo},Bo=xo,$o=t("C7Lr"),So=F,ko=$o(Co,Bo,!1,So,"data-v-5f2ba1d7",null),Mo=ko.exports,Po={name:"LiveOrder",components:{LiveUserHead:yo,LiveFooter:bi},data:function(){return{findex:"user",orderList:[]}},created:function(){this.getOrderList()},methods:{getOrderList:function(){var i=this,e=new URLSearchParams;i.axiosPost("/client/orders",e).then(function(e){i.orderList=e.data},function(i){console.log(i)})},orderDetails:function(i){this.$router.replace({path:"/orderDetail",query:{order_id:i.order_id}})}}},Lo=function(){var i=this,e=i.$createElement,t=i._self._c||e;return t("div",{staticClass:"live-index-container live-h100"},[t("live-user-head"),i._v(" "),t("div",{staticClass:"live-main"},[t("div",{staticClass:"live-main-container"},[t("div",{staticClass:"live-order-container"},[t("div",{staticClass:"live-order-head"},[i._v("我的订单")]),i._v(" "),t("div",{staticClass:"myOrder live-order-list"},i._l(i.orderList,function(e){return t("div",{staticClass:"orderBox live-order-item",on:{click:function(t){return i.orderDetails(e)}}},[t("h4",{staticClass:"tit live-order-title",style:{backgroundImage:"url("+e.logo_img+")"}},[i._v(i._s(e.room_name)),t("span",[i._v("订单号码："+i._s(e.order_id))])]),i._v(" "),i._l(e.list,function(e){return t("dl",[t("dt",[i._v(i._s(e.title)+" X "+i._s(e.num))]),i._v(" "),t("dd",[i._v(i._s(e.title))])])}),i._v(" "),t("p",[i._v("合计"),t("span",[i._v("¥"+i._s(e.total_money))])])],2)}),0)])])]),i._v(" "),t("live-footer",{attrs:{findex:i.findex}})],1)},Io=[],Oo={render:Lo,staticRenderFns:Io},Vo=Oo,Ao=t("C7Lr"),Fo=j,jo=Ao(Po,Vo,!1,Fo,"data-v-3c331aea",null),To=jo.exports,Eo={name:"LiveOrderDetail",components:{LiveUserHead:yo,LiveFooter:bi},created:function(){this.order_id=this.$route.query.order_id,this.getOrderDetail()},data:function(){return{findex:"user",order_id:"",orders:{}}},methods:{getOrderDetail:function(){var i=this;if(!i.order_id)return this.$vux.alert.show({title:"温馨提示",content:"无效订单号"}),!1;var e=new URLSearchParams;e.append("order_id",i.order_id),i.axiosPost("/client/orders",e).then(function(e){200==e.status?i.orders=e.data[0]:i.$vux.alert.show({title:"温馨提示",content:e.message})},function(i){console.log(i)})}}},Ro=function(){var i=this,e=i.$createElement,t=i._self._c||e;return t("div",{staticClass:"live-index-container live-h100"},[t("live-user-head"),i._v(" "),t("div",{staticClass:"live-main"},[t("div",{staticClass:"live-main-container"},[t("div",{staticClass:"live-order-container"},[t("div",{staticClass:"live-order-head"},[i._v("我的订单")]),i._v(" "),t("div",{staticClass:"myOrder live-order-info"},[t("div",{staticClass:"orderList"},[t("div",{staticClass:"tit",style:{backgroundImage:"url("+i.orders.logo_img+")"}},[i._v(i._s(i.orders.room_name))]),i._v(" "),i._l(i.orders.list,function(e){return t("dl",[t("dt",[t("img",{attrs:{src:e.cover_img}})]),i._v(" "),t("dd",[t("h3",[i._v(i._s(e.title)),t("span",[i._v("¥"+i._s(e.price)+" × "+i._s(e.num))])]),i._v(" "),t("p",[i._v(i._s(e.title))])])])}),i._v(" "),t("div",{staticClass:"total"},[t("p",[i._v("配送费¥"+i._s(i.orders.deliver_money)),t("span",{staticClass:"express-no live-color"},[i._v(i._s(i.orders.express_no))]),t("span",[i._v(i._s(i.orders.express_name))])]),i._v(" "),t("p",[t("span",[i._v("小计")]),t("span",[i._v("¥"+i._s(i.orders.total_money))])])]),i._v(" "),t("div",{staticClass:"total orderInfo"},[t("ul",[t("li",[i._v("订单号码"),t("span",[i._v(i._s(i.orders.order_id))])]),i._v(" "),t("li",[i._v("下单时间"),t("span",[i._v(i._s(i.orders.create_time))])]),i._v(" "),t("li",[i._v("\n                  配送地址\n                  "),t("span",[i._v(i._s(i.orders.user_name)+" "+i._s(i.orders.user_phone)+"\n                    "),t("br"),i._v(i._s(i.orders.user_address))])])])])],2)])])])]),i._v(" "),t("live-footer",{attrs:{findex:i.findex}})],1)},Do=[],Uo={render:Ro,staticRenderFns:Do},Ho=Uo,Jo=t("C7Lr"),No=T,qo=Jo(Eo,Ho,!1,No,"data-v-3c167a29",null),Wo=qo.exports,Zo={name:"LiveAddress",components:{LiveUserHead:yo,LiveFooter:bi},data:function(){return{changeCommon:!1,findex:"user",addresList:[],check:!1}},created:function(){this.$route.query.from&&(this.check=!0),this.getData()},methods:{getData:function(){var i=this,e=this,t=new URLSearchParams;t.append("open_id",this.openid),e.axiosPost("/client/addr-list",t).then(function(t){e.$vux.loading.hide(),200==t.status?e.addresList=t.data:i.$vux.alert.show({title:"温馨提示",content:t.message})},function(i){e.$vux.loading.hide()})},addAddr:function(){localStorage.setItem("address_edit",""),this.$router.replace({path:"/addr/edit",query:{from:2}})},editAddr:function(i){localStorage.setItem("address_edit",ai()(i)),this.$router.replace({path:"/addr/edit",query:{from:2}})},selectAddr:function(i){var e=this,t=this,s=new URLSearchParams;s.append("open_id",this.openid),s.append("aid",i.aid),t.axiosPost("/client/addr-default",s).then(function(i){t.$vux.loading.hide(),200==i.status?(t.addresList=i.data,t.$router.replace({path:"/order"})):e.$vux.alert.show({title:"温馨提示",content:i.message})},function(i){t.$vux.loading.hide()})}}},Go=function(){var i=this,e=i.$createElement,t=i._self._c||e;return t("div",{staticClass:"live-index-container live-h100"},[t("live-user-head"),i._v(" "),t("div",{staticClass:"live-main"},[t("div",{staticClass:"live-main-container"},[t("div",{staticClass:"live-address-list"},[t("div",{staticClass:"live-address-head"},[i._v("我的地址")]),i._v(" "),t("ul",i._l(i.addresList,function(e,s){return t("li",{key:s},[t("i",{class:[1==e.common?"icon live-address-active":i.check?"icon live-address-uncheck":""],on:{click:function(t){return i.selectAddr(e)}}}),i._v(" "),t("div",{on:{click:function(t){return i.editAddr(e)}}},[t("div",{staticClass:"live-address-detail"},[i._v("\n                "+i._s(e.addr)+i._s(e.detail)+"\n              ")]),i._v(" "),t("div",{staticClass:"live-address-userinfo"},[t("span",{staticClass:"live-address-user"},[i._v(i._s(e.name))]),i._v(" "),t("span",{staticClass:"live-address-umobile"},[i._v(i._s(e.mobile))])])])])}),0),i._v(" "),t("div",{staticClass:"live-address-add live-color",on:{click:i.addAddr}},[i._v("+新增收获地址")])])])]),i._v(" "),t("live-footer",{attrs:{findex:i.findex}})],1)},Ko=[],zo={render:Go,staticRenderFns:Ko},Qo=zo,Yo=t("C7Lr"),Xo=E,en=Yo(Zo,Qo,!1,Xo,"data-v-1032a540",null),tn=en.exports,sn={name:"LiveStart",components:{LiveHead:ja,LiveFooter:bi},data:function(){return{findex:"user",roomList:[],loadding:!1}},created:function(){this.getRoomList()},methods:{getRoomList:function(){var i=this;if(i.loadding)return!1;i.loadding=!0;var e=new URLSearchParams;i.axiosPost("/client/room-start",e).then(function(e){i.loadding=!1,200==e.status?i.roomList=e.data:i.$vux.alert.show({title:"温馨提示",content:e.message})},function(e){i.$vux.loading.hide()})},goRoom:function(i){1==this.DEBUG?this.$router.replace({path:"/room",query:{room_id:i.room_id,from:"groupmessage",isappinstalled:0}}):window.location.replace(location.protocol+"//"+document.domain+"/front/#/room?room_id="+i.room_id)}}},an=function(){var i=this,e=i.$createElement,t=i._self._c||e;return t("div",{staticClass:"live-index-container live-h100"},[t("div",{staticClass:"header",attrs:{id:"top"}},[t("live-head"),i._v(" "),i._m(0),i._v(" "),t("div",{staticClass:"live-header-bg"})],1),i._v(" "),t("div",{staticClass:"live-main swiper-container"},[t("div",{staticClass:"swiper-wrapper"},[t("div",{staticClass:"swiper-slide slidescroll"},[t("div",{staticClass:"live-video-list live-main-container",attrs:{id:"live-video-container"}},[t("div",{staticClass:"live-video-items"},i._l(i.roomList,function(e,s){return t("div",{staticClass:"live-video-item",on:{click:function(t){return i.goRoom(e)}}},[t("div",{staticClass:"live-video-cover"},[t("img",{attrs:{src:e.online_cover}})]),i._v(" "),t("div",{staticClass:"live-room-info"},[t("span",{staticClass:"live-video-user"},[t("img",{attrs:{src:e.logo_img}})]),i._v(" "),t("div",{staticClass:"live-video-names"},[t("div",{staticClass:"live-video-name-info"},[t("span",{staticClass:"live-video-name"},[i._v(i._s(e.title))])])]),i._v(" "),t("span",{staticClass:"live-room-start"},[i._v(i._s(e.click_num))])])])}),0)])])])]),i._v(" "),t("live-footer",{attrs:{findex:i.findex}})],1)},on=[function(){var i=this,e=i.$createElement,t=i._self._c||e;return t("div",{staticClass:"live-menu-bar",attrs:{id:"nav"}},[t("span",{staticClass:"active"},[i._v("我的关注")])])}],nn={render:an,staticRenderFns:on},rn=nn,ln=t("C7Lr"),cn=R,dn=ln(sn,rn,!1,cn,"data-v-05a2f73e",null),un=dn.exports,mn={name:"Article",data:function(){return{articleInfo:{title:"",name:"",content:"",view_num:0,room_name:"",cover:""},article_id:0,room_id:0}},created:function(){this.room_id=this.$route.query.room_id>0?this.$route.query.room_id:0,this.article_id=this.$route.query.aid>0?this.$route.query.aid:0,this.getData()},methods:{getData:function(){var i=this,e=this,t=new URLSearchParams;t.append("room_id",this.room_id),t.append("article_id",this.article_id),e.axiosPost("/room/article-detail",t).then(function(t){e.$vux.loading.hide(),200==t.status?(e.articleInfo.content=t.data.content,e.articleInfo.title=t.data.title,e.articleInfo.name=t.data.room_name,e.articleInfo.view_num=t.data.click_num,e.articleInfo.cover=t.data.cover,e.WxShare()):i.$vux.alert.show({title:"温馨提示",content:t.message})},function(i){e.$vux.loading.hide()})},WxShare:function(){var i=this,e=window.location.href,t=this,s=new URLSearchParams;s.append("open_id",this.openid),s.append("url",e),s.append("apis","chooseWXPay,onMenuShareTimeline,onMenuShareAppMessage"),t.axiosPost("/wechat/jssdk",s).then(function(e){t.$vux.loading.hide(),200==e.status?(t.$wechat.config(JSON.parse(e.data)),t.$wechat.ready(function(){var i=location.protocol+"//"+document.domain+"/front/#/article?room_id="+t.room_id+"&aid="+t.article_id;t.$wechat.onMenuShareAppMessage({title:t.articleInfo.title,desc:t.articleInfo.name,link:i,imgUrl:t.articleInfo.cover,success:function(){},cancel:function(){}}),t.$wechat.onMenuShareTimeline({title:t.articleInfo.title,link:i,imgUrl:t.articleInfo.cover,success:function(){},cancel:function(){}})})):i.$vux.alert.show({title:"温馨提示",content:"微信参数错误"})},function(i){t.$vux.loading.hide()})}}},vn=function(){var i=this,e=i.$createElement,t=i._self._c||e;return t("div",{staticClass:"article-detail"},[t("div",{staticClass:"title"},[i._v(i._s(i.articleInfo.title))]),i._v(" "),t("div",{staticClass:"room-name"},[i._v(i._s(i.articleInfo.name))]),i._v(" "),t("div",{staticClass:"content",domProps:{innerHTML:i._s(i.articleInfo.content)}}),i._v(" "),i.articleInfo.view_num>0?t("div",{staticClass:"view-num"},[i._v("阅读 "+i._s(i.articleInfo.view_num))]):i._e()])},pn=[],hn={render:vn,staticRenderFns:pn},_n=hn,gn=t("C7Lr"),fn=D,yn=gn(mn,_n,!1,fn,"data-v-64605304",null),Cn=yn.exports,wn=t("84iU"),bn=t.n(wn),xn=t("/Xo2"),Bn=t.n(xn),$n=t("6s2J"),Sn=t.n($n),kn=t("r6k1"),Mn=t.n(kn),Pn=t("KPSb"),Ln=t.n(Pn),In=(t("ongR"),t("8ybk")),On=t.n(In),Vn=(t("MbtE"),{checkAndroid:function(){var i=navigator.userAgent;if(!(i.indexOf("Android")>-1||i.indexOf("Adr")>-1))return!1;var e=window.navigator.userAgent.toLowerCase(),t=!0;return"micromessenger"==e.match(/MicroMessenger/i)&&Ht.a.miniProgram.getEnv(function(i){i.miniprogram||(t=!1)}),!!t}}),An=t("bpDH"),Fn=t("CV5F"),jn=t("TdyD"),Tn=t("Tbld"),En={name:"Campus",data:function(){return{key:"",roomList:[],info:{}}},created:function(){this.key=this.$route.query.key,this.getData()},methods:{getData:function(){var i=this,e=new URLSearchParams;e.append("key",this.key),i.axiosPost("/live/campus",e).then(function(e){i.info=e.data,i.$route.meta.title=e.data.title,i.roomList=e.data.room_list})},goRoom:function(i){this.$router.push({path:"/room",query:{room_id:i.id,from:"groupmessage",isappinstalled:0}})}}},Rn=function(){var i=this,e=i.$createElement,t=i._self._c||e;return t("div",{directives:[{name:"wechat-title",rawName:"v-wechat-title",value:i.$route.meta.title,expression:"$route.meta.title"}],staticClass:"campus-container",style:{backgroundImage:"url("+i.info.bg_cover+")"}},[i.info.cover?t("div",{staticClass:"campus-logo"},[t("img",{attrs:{src:i.info.cover}})]):i._e(),i._v(" "),t("div",{staticClass:"campus-list"},[t("div",{staticClass:"tip-info"},[i._v("点击进入观看")]),i._v(" "),i._l(i.roomList,function(e,s){return t("div",{key:s,staticClass:"campus-item",on:{click:function(t){return i.goRoom(e)}}},[i._v("\n      "+i._s(e.room_name)+"\n    ")])})],2)])},Dn=[],Un={render:Rn,staticRenderFns:Dn},Hn=Un,Jn=t("C7Lr"),Nn=U,qn=Jn(En,Hn,!1,Nn,"data-v-7e79fecf",null),Wn=qn.exports;t("r6k1").polyfill(),Mn.a.polyfill(),N.a.use(Z.a),N.a.use(An.a),N.a.use(Fn.a),N.a.use(jn.a,{position:"middle"}),N.a.use(Tn.a),N.a.use(Bn.a),N.a.use(Sn.a),N.a.use(On.a),N.a.prototype.liveCommon=Vn,bn.a.defaults.baseURL="localhost"===document.domain?"http://www.yc.com/rest/v1/":location.protocol+"//"+document.domain+"/rest/v1/",N.a.prototype.DEBUG=0,N.a.debug_openid="omIqUv9pP6EaM3tqd4UoAs4J4Ncw",N.a.prototype.$axios=bn.a,1!==N.a.prototype.DEBUG&&bn.a.interceptors.response.use(function(i){return 4007!==i.code&&4008!==i.code||Gn.replace({path:"/auth",query:{redirect:Gn.currentRoute.fullPath}}),i},function(i){return J.a.reject(i)}),N.a.prototype.axiosPost=function(i){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};0===e.length&&(e=new URLSearchParams),e.append("timestamp",(new Date).getTime().toString().substr(0,10)),Di.a.get("uid")&&e.append("openid",Di.a.get("uid"));var t=[],s="";e.forEach(function(i,e){t.push(e)}),t.sort();for(var a=0;a<t.length;a++)s+=e.get(t[a]).toString();var o=Ln()("YCLIVE"+s);return e.append("signature",o),new J.a(function(t,s){bn.a.post(i,e).then(function(i){t(i.data)},function(i){s(i)})})},N.a.prototype.axiosGet=function(i){return new J.a(function(e,t){bn.a.get(i).then(function(i){e(i.data)}).catch(function(i){t(i)})})};var Zn=[{path:"/roomStart",component:un,meta:{title:"我的关注"}},{path:"/detail",component:ka,meta:{title:"实时视频新版"}},{path:"/video",component:co,meta:{title:"溯源直播"}},{path:"/user",component:Mo,meta:{title:"个人中心"}},{path:"/orders",component:To,meta:{title:"我的订单"}},{path:"/orderDetail",component:Wo,meta:{title:"订单详情"}},{path:"/room",component:fa,meta:{title:"实时视频"}},{path:"/order",component:vi,meta:{title:"订单"}},{path:"/order/success",component:Ri,meta:{title:"下单成功"}},{path:"/addr",component:tn,meta:{title:"地址管理"}},{path:"/addr/edit",component:Ii,meta:{title:"地址管理"}},{path:"/auth",component:Ki,meta:{title:"微信授权"}},{path:"/",component:io,meta:{title:"云窗-农业可视溯源平台"}},{path:"/article",component:Cn,meta:{title:"文章详情"}},{path:"/campus",component:Wn,meta:{title:"校园主页"}}],Gn=new Z.a({mode:"hash",routes:Zn});Gn.beforeEach(function(i,e,t){i.meta.title&&(document.title=i.meta.title);var s=Di.a.get("uid");N.a.prototype.DEBUG&&(Di.a.set("uid",N.a.debug_openid),Di.a.set("uname","云窗直播"),Di.a.set("uimg","./static/images/defaultUser.png")),s?(localStorage.getItem("uid")||(localStorage.setItem("uid",s),localStorage.setItem("uname",Di.a.get("uname")),localStorage.setItem("uimg",Di.a.get("uimg"))),t()):i.path.indexOf("/order")>-1||i.path.indexOf("/addr")>-1||i.path.indexOf("/user")>-1||i.path.indexOf("/addr")>-1||i.path.indexOf("/addr")>-1?(-1==i.path.indexOf("/auth")&&Di.a.set("refer",i.fullPath,{path:"/",expires:7200}),i.path.indexOf("auth")>-1?t():t("/auth")):t()}),W.a.attach(document.body),N.a.config.productionTip=!1,new N.a({router:Gn,render:function(i){return i(ti)}}).$mount("#app-box")},NqD4:function(i,e){},PDJB:function(i,e){},Q0rm:function(i,e){},QP3d:function(i,e){},QkAU:function(i,e){},TPZN:function(i,e){i.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAQwAAABGCAMAAAAO5lofAAAAflBMVEUAAABFRUVERUVERUVIRkVGRUVIRkVFRUVFRUVFRUVGRUVERUVFRUVIRkVFRUVERUVERUVIRkVIRkVIRkVIRkVERUVIRkVIRkVIRkVIRkVIRkVIRkVIRkVIRkVIRkVIRkVIRkVIRkVIRkVIRkVIRkVIRkVIRkVIRkVERUVIRkUgwKibAAAAKHRSTlMARHe7dxC7MyLMVe6Z74hm3YBmUKqqoUDesh9v5/UY1Af8STkqxJFfqTvkaAAABqhJREFUeNrsmVuyoyAQQPtRFCiU+OMe2P8KZ5IGLopetBIdk5rzk1cDcuwGysB//g0UgTYGBWigJWzRzMD9CRFowxLJ0MCGB1PWLc0oe1FwHhqbmLfIsBI5tK5HwnwlI71FOA8OTagKbkJbkww9bFFO3kICv0aG58wYhI5X8RDpwgP3hTIoHE0lIx9NXjxjFw4RnUSWi/B3y5AW3GgOJ+GpCS5lwDb4ogypJmzJuAOlDCPVPabMdu+Q4WNifJgMsnl3GOLSiJWMjAtCq9olMXTM1+nWMhKaxiB42QEE9gpWMSmgVbPpKBLVlQtoCdwDhT1NY4jYHp4MIdE5ytdaJ4ZudG6fnSropa9Z3d0PDAWWFAka5xm90WqACAuwYEilJL3Rx8iwzivQP3fcEG/JUDZmjYLIb86GxWEjLc/3Q/NfHBGacrm36VckctUtV12M0vC7DBbJ6bTKZSzDDTFYEpNhwjlq4ULooS2jxF8rg8Ju8EgTXHPh4ZiMcXMsafmBMvSYd9WDMvzXyZDwnTIGfmLjvvoxMjpeZZwHaw4tGTVGZODVMvx8HgKvorOMcrr4QBd2t9OIy+GCUPae6fKRBOlBDHZUAucyNU/M9XTl9Ex7ZVAz7/LBa1R1n9dhqutqyciHqR4TakWG84dk9MsjCeD1MlyVGG0ZXM1pKcM6A3hEhha/vr5NVGw4VsGZKBsE3C1DudCSoRXAIRkquSgpZPTp/akMQRhgrwzsQkuGgPt3E9X9uFDoo5Mutzdp1z0VEwSr9soYJJ7Kb616UcYk3TBzJ02Kb0fRcsHywSt/aih6otZlcPk4Q6fsfVEGh0z9WFiBu6RI+lwk9aW5TRnjQ8fkTVr1JjhHBuYavKJIlC2GqWZhVmVQrygInZUXdZIMEz/JizVwKmkYtfo9b22t/RiE1PqdMkYeSIMwG0fDqQzVs5cIVsMvptu7kPHwugxPD6p/2l0ohzkVv61cbonblAE4hQzjazK26S9zoathqpmbjTIZxlDCZ8kwuRQRTkXbWY1ofEBEf9o51+3EQSiMHmIggCGjMXVi4/3SWd/7v+CEkNIxF23HVh2n+0cqgWMWu3BA2mVizxVqgg4ZWr1N7yAYfrYMzoJYMaci9rYldXHdI41Rhwwf96SruTb6BBkssMRuy1XCnIrGHJFBidNyTRke3SNjFGvuK4YXywhan1j0U2vBIuafcBsZcVvGjzho5HyuieJTMs6dpLVljBo3FLetbixj2GofsA783KFPkTGIfFKSddUwCZJ6b275ehmDkrha7iO/B2Efkje4UMZw8BToqJ5NoyTyew3PE30JknlOLPHBh2Swv5QhGyeq9GqiZYPRDfCfCz4gY6ipW0ZwCkkdHO99h38sK/fBj8Fp7J+je2RcCg8Gbgn7F/5buAcZVNzLb/Obb755LJb73VanRTEej1+S8lIUqWa7/ZL+J3ZFMhVqvkEPm7maxeNU0nWJGON+R3b24dwfTAEh/TUveB8bTVdFAwlVKBh+RpyAJeEXytjDsTALnGZO1yUDIioJAU0nYQYqZWF5vVDGBI4x/QTmhwP64XRVuOucBLJzDV2LqPTwiTKm9Hw/MkhX/RLIORF3KSFiEVHo4FQTApIsMXIrQ9ha6ZINlbiUE7mYRrhMq0LaIUNM0juSQRmMDAFmO+R+CAgiOExEDgFFb6BGV5Z8So1djDwOT+EQbRmWe5Jhx79BQi0ZIZE2XsHRPPK1+ZGMFEraG/FRuAaU5vZde0bGRk9mZVlNJgaYF/vlvpjfSAZpADnvlEGJ62krZfraIxk6jKikEZ7BcPeufTlD07Ysp7a84rRLd/RsbiSDMuugW0boZZj2yKCwIYO0Qkkj3JTl0zIErQ02S5ra5/+qvBQ3keF7fEaGQE41vE8Gg4nLRNkIx1kZeC49COILGCJhjJmRvGsZVY51JH0yMtekEa6gzskYk3ajYUWv3IOMtE8GN3Vi4ZloypC1DAHelmEv4RkZOa0XS1L2Bb3MKja3lsENTMqY6pJBUVmZMBbmSI9qGaA0Y/ZOAlG+Yo1wLgAjhDkhAz+poAglksawTG8+MkgbWDplkIxhySI6rg3hCImL7nCdiDMyplRvUrIy6LDK2NLLuCERs0TUTc8XF7x9pwDvCK9LObJjGQnfehmLZ75cwDKzzdfb1T3I+AJEyN02NHXlLU5j1GoBx5oejdBmDAUo7srrOd7JjB4PFudAHnKq2c/epWM+fbxZ0sl6GW3T4GU6O6xyYxavpz1mvjqILB4Xeicfb4pcld+mXLYhkNjPdgAAAABJRU5ErkJggg=="},"W+75":function(i,e){},WO4B:function(i,e){},YpEb:function(i,e){},Z2Ou:function(i,e){i.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAASwAAABLCAMAAAD9JUoRAAABHVBMVEUAAAD///8CAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLj4+Pm5uYCAgLc3NwCAgLq6uoCAgLt7e37+/vy8vKYmJiPj4/T09Pm5uafn5/Dw8OJiYm8vLzJycn39/epqakCAgL39/fNzc3t7e3AwMCDg4O4uLjJycnz8/PFxcXd3d39/f19fX3MzMyzs7O2trb09PR5eXlmZmZ3d3fh4eGHh4dDQ0P7+/vQ0NCsrKzq6ura2trh4eHU1NTCwsLb29uoqKgvLy/n5+fb29vr6+ucnJy/v7+ysrK4uLixsbFPT0+ampqpqalra2s3Nzc1NTXMzMw8PDxqamoyMjI1NTXw8PBYWFiQkJDKysrW1tbn5+f19fWOjo5DizRGAAAAX3RSTlMAgAUICw4UGBEcICMmaWgpRSxmLmV6Yzk9SEI3TkBRS2E0MXJKbk9DUyt0TTt4RkBVMGs2KyRXMCFxVD9UZGFdWllOMF5PSkZESTslGysaPSg4NSUULCpbMh5hKHFZTQdyfzkAABI+SURBVHja1JoJd9JAEMddCzmBlKZAacUD1GqFVnuKVsWr2nrUarXW6/t/DP+zO7ub0ID4fBH9P59vE/fI/DIzO1k89y/pvNIfDYYm7Zls/m+y1rId2Ro9eEbqV7ZPPu1f5Hh+cg2bqzWT1GgU3LeghD7jbExMm26Oe3W5ik2fTJbN3mVoEeYa64spaRSWrqVaKO4KqT53MjrDqrsoVaBR3D5Dy7ys/GlZY8eL7dcWdwXpFLcgmDF7RrDrrcJlXU8t5Hk9IfXco1npdpatGFO4LKSKNIzbBUPLMj1evNzvr+9hvRxp8VqwK8Pa0faTc0h79yRCmJStm2RY+m2AlOO8EUo7ruN4Q68ixapYF1IeidtFmnTo+fvfu69edb/39vKkxc8kJtdNWESsPBlJvdce2V8fDUvSSrpes9m8OieUbl26ikv7Krpsq2GlZ3ZI89w2tCyrV++73e5x8e3691xpYa3fg1WQseQ5B4K0BtcgM7J1B3aBLUXTRLoMDEaA5emZXddxXW7DF2dS3br902KnvtvpzRaL6zn6Fr/A34EF+yntuJuCtO46xoxrFWhurkKqCdIVj2hxNE2guoSrRMMcDch3XdefY3CO7SXzVe990eusIbjROO29nfl3YMFZiJXjBorHpjWjFUUlpSgqK1gOelM0TQqL4GrJVRhQ4Pt+wG3f8WhWo8V1dCRY+Msrfs/PtRiWA4ODIMyStVyUS4GP11qUVvjhRqvVWlh4F2BkRZCWqwZWVQ1ZcjzJFtE0keYVh69fb0KntEoSVkV7GXrdlHpLXr676BEs193qvfeK3X6+sJTxfhBmii23sKB6fR7RVi6XZdxthAlYNMLCcsn4okk9y6TVB4zmx+oycJNaLYaF/higLmYR4BpQGODxuB3QFqqaiwWo3/XgVPPb252m43mv+oX8aHEilbSGcQUQ0bKwXEfufiKlhVJZwxJSBlZjCFYVits1dfGlHRu4EcNS89dVEQZ3t7ACCwtvbEvnBEjBet7sPEckMqy8XYsDMc0K95Kw/ExYrWg0LCcFK4qiavyEh62CFa1BS/DAOcwP1Zmc74cZsELfd68wLA+Ps7tHsNYQhVcAq5svLKa1Nj8HVYzmSPcoOksaVujLMEnAYkhnYEXZsMiH4hWeLa6ClQ/REhYWLG+qC/xDJiwMWtIbI2jNritY7nYdsE728oNlXauZmXHJFAOLolAazylrhWHF42HRBuIHOgMmHAtmuyQsEUGl0Jew3KuCVEsBsu0S2rcSsI57XUfuhlu9O96r3ts8YTGtUbDITIZVCch2Nj4sVdt8/2g8LAgAQF1FHBNeQXZvLN11INDaWKCttcGw2G+IbTkDFi4usO/JtNDtnTr1A0y0u3vaxzf3FGHZxFHxKV+rAoic4Ygdrm1gVTk1GVh2ADGhTeS6SOoAcIhkR5A6rrrcEVKfR8EKufmQc+hi/70jdad/QuuBVX6SsK6y6eUKqVzjd0cGGliOJ4tB5Vo6oG4bWHGcDUvi8qQLbdZEUs9TdK66zE7vsqVMWKWwpJoX6O1B8K367NrabB0fPAVEYd6wPA2rGnEJrpNsChZMpw8R5VoPdBRaWKZCsLD4lAK4CMM1IVW7LbQvQe62utokP7G99vEcGbDoAVXrvirmMffx7EmnczJ7jKtcHYthuZcsLEjDou0qTMPimj/4zOVSrGGtjoIFSVqOXkT8OOLGlgtWd1X7MRcmrv9QkC6OhPVRtTYAC3RAC6OgIrPKGRae8JZ+lBDST1nJgAVJWI8EIyI042FxeeIeMKJBu/1NtS75iM3HfLqlCw1f5e8HUTQCVsvU8hzloAXlzophOQZWqDYtCytIwVKW06mDKZcMrHY7GxbXcs5OTW8J7baOQyy2w47lu/wl6TfUKUY2LNx9ondndVpDuKRmcmfFsC7oKkamKQ0rDLJhmfOAw7gaDcOKE7DIFbmUe8OsaujY1nG4EH5aUXc/KD8hr93UWKrZsC7Kxj1fTZ/6MeOvwkJhCCH0xsCi/UBH1G3AioZhxfHZnOW9XheschxX4y/cfnpNJyDqDMFrA8XvsJoFy6y3z2nBKHdUFpb9TOXP/UxYM8qxtkwJ8CQRhquq3kzDYlZbYKVhwd5omS94ov1AFibU1WT4F9U4AxbWqym8cEW19Y1BlS8ssKLdewws9hJDy8L6oVikYKlzZe9NT1hYkd1vhWHFYNFXZ/gbcRasuPqUP4c0LPwxqP6uZ2H/HgtLZpVnIqEnBtZAWVEexInzrBnNysKSBzOHwmhlA9Gf3Gp3mHo2rBe6focrTgBnWrA8Zfq2SOlQw/qmaSRhQd6aSKosbS8NBGvwlE7KzF5AlZYKtBGwbgjSLZlCpw1rTM7y5Hb1XKS1zLCORCYs8wN07YfgWX0o+Mjp6kEchRyE+nOCS6/DbFjq5iZHYe4avxvCsTSsYBgWVKzbxPxtkIA1GIZ1RR3pnDCUo7bQ1ZvccVs6jkuc3clyFYcvVQ2fmeCjGn8pTSMKh+ssF6w+1TIqeIbl1YHqxW2uL5evidagTFqtWViDMo4P598AFqTgvojbBpZLCkoXuf8G5Wq2XKX4u0uNxsLC5+zSAaf2jaUddxpRmK7gW3iOpcY+P9jDYVhFBevhx5hhocza38DehrP1QbI2KIWgrlgRXPH4E3WxsBx5cPGA41NazjGV+AVlxLchrjA3jZgyrLQuBOlTB05BV4JS9bbFAoHWobCwmJWBtb4UhCAa2zAkWEFJV6S1A0cVDvbklv591OEfpQpvGqzsqUOGNv0hWOagNLqRwEJmPV1JwjKs0N07abrsKCbBw1rce8e0oCbmVrT4q9sjWpmweOrCPwZr34dVQ7CodHBgBsMiVpA53dJ31cuXjsjnpERL/zP5xsF2rRFaWs9ec51lD3QsrFKIwQlYitWUYPFJaVor98mmIVjmoPQil0zch49ZvhkaBItpAZcKKwPr3f3tHhoUnNEjodS549n/G6cC0cLi8/hhWFOgJQvBraXGgvzZQOszcYD8jM8d2HFdR5SExay+/KzmXLuTBoIw7KglJAjamAQQCsUCoqjQChRBWy9o8V6t98v//xu+szubTTzRo58a3+NBWXYD82R2M7uz620LK5BdaErgxYTlLhgvbKi85LOQtO69BwGWqR/DMvMjC+vUaIn9rpdOsQKDhlVOwZIY28DiSvPAJJkNLIDWsGCTmM+ESRTDchnXHdMVb71DbdQ1rghvMuGC3XJxsWS8FnVPy7V4WLFiUhzM25iLDpJLNG7TelZnR4LLq2bdgYf9PYLU3NAuRVNa+w7EuPryFZcY7hX6W22flmtJvkpU0Jpim97QPOaGMr9QMbY7FFje/Il0Liw/XX4rwXqttiADi/nK0gslNcMCvBn6jxcaFsca/wDr/Cm51jl2/l+1m4ojZJavV0pjWPIYXXxUe41CSioykaO4Y+Lp0TzhoQeSfRaTBZrW0buKl+hvFZ1KR5RnUEqAl4J1oOdvJsHRTsHaqcqWmxYlVTewxB1JdP/IBPhmLIfm671LYPcvsE4rMFW8UoIdCViVE5mMSVzWTcAK267IKx2S1cwpypRP3FGTevRYB/g2A1so6L7/Urkz+n67PWz2+/1Wa8Bqacm/Ud5sqr27o9OBJbhEQs7CunE/Xva1SVlJLHZpNpHHgepQtUVFa7FkHrqJ9EPaWRxdgCwr+SJ0Rqio8ob6UcOOCk/NkHlU6yvk4jCPZJ559BXritqxpEt1uu3hcLh23c5UgypCyS2EsEemxzbynTIDZSnqpyN2rThscLSjZsllOXliZfaLMC3IzvJtXObYAMMG68Yt1EfGF20jedyivrhVxoAp86M/q6Bo5wmWNc84gsWIT2JQ9lRJIgCx1qTDE2WmoMocME02vvB7xcn6vBypSw4m1hPENgk05FcrVNKhUk2sNTI2iUz1jPFSzvf81UmifLCyQ3x6y4W1KGGPuNUvbQwSK6Fgz85lSvnWH3QuVi6OambcYv0j0wZZXPZTy1HwZjIQS7NRQZZJmptFlJtTrekfbWlYWSMyaKWgZDvLbw4ypuFkw8oJIyNrr/Uc1r1tLAm8vm70Oq5wk2hPcEnb7W0crcOLxnAO5+5Q9GLj3vaLF6otroPzlqINi0Zd8YVqrUpRcnN7296S999u5mOUSrD6ljFh5bWAu8k5LhurTylGRBHOv0HfxGQ02NjQrfj9D7qycZfeFYimEel1m/dEN+WwpbkeuEBRtEd0K4oifgNM+MLU9CdvsM5lwMJ9vU70qoDfXYfw1yUUkZEFCHE5dqTjRTsIXC8a3aIdUHgS0OyeOmq5R5+KEajEupmx2AA3Q+3dURQFAdFOFD29kp9gIRVDiTrK8uLL3d3dTudVnUjFoYAFi2FAvQ4Ge13M0+4RHGjj6XZUZE5cJSq+iLZvYl8WCJOS71OjoY5aosAJeJv9BAh1uDbFF3QajTau12g08O/dQiEiyF3RyiPqzone5Sdmj0OoL/yzWScubAtgyy6xAlji+bAR5sM8Ymt3iJYc4XcUQCCTcrxwqxHAdzrqAFyNt2RXq0SgPUdZQP7a74F4EAQjDmWDwPe5IMRfQbBGtVFA1PaqfuUjUbMarArFPME6wzNCO0pUPQXL4VXAJ0R+k6jkk+8BlqMncGvYVquB1qTTeak8ZuqgooLl4B3O06yoXaV+hVrUqtDDh0SuMwVh16dKn0RdByIjW9QlAmGrS3CtPMFCL4SRs/bQZ1hVBQtyl0R9GIeMVKUkprjuSQhYnH930R0B6zkvrBNwekwMps4dZ009wCozrDKxXBc968DDhVpEOIbCl+Ocmz6csbmJoj7vzYXaKFrg3Iv+Gj8Y5QnWWYEFTKUmoecwLFdxAbvPbFw5Acs7IHpwCIpcb4aSfaK1R6hRYmIrClE2gRsxpwENQAyX8BSE4wqVB0R8alHIEBqWlYCHhijxhrgRF5G/fUD4g6J89UNzNKVaKvUZVo09hFmBxiHvfN0ErAuwThUuODmxhZfjHoVzB+IxhlADVSrenj7PElKfOY1pXKZrqM07lP3KHQtLyBDeWVhNMK36KHt8n8K3ROMBhUvnP4CF/tYj6j2GcZd7VDaw2nr3MCwLKdxXDhiQXzKwSqqai2NMRylYnIyv1T6UqTwmunp584OFhd0j0CbflSZqEfMLkQu5Oh7f3kQhTkHnDFYxAasqsB4S1ENXeAwydzSsGWlYW/zRvk4zLiiMYaHaktv68KzDHn1lWCwPwrUVLNHSU7CsNKxwB9fv2bIwp7BSYxaG6hBACMY+IhQrWBiRhj7D4gz8Q82KD1F85p0hFwELFziRbhjvp+z1krAelcvfcd1K0xPParX0OnuFYUFoyPuax+MbVIZz+k4uYT1sD3v8lDOwFkuiraM3lzHYMkMPbILVxAMsLDp/6EloqVeVDSxZKp/jOv0W0eAauvCWHrNwWe6Gl8djwD/qG1j4+Bq0tXUosJoa1tWr6MWbrdzBAq04zup5JnSYu1VYgsf6IQksx5mCjIJ1VDsGrdlLyVjE3VCz4rOWpQtbDPAiENUUrCHa3aD7j0FKOeqJwLJKwRLlEdYGJ6OQjVofCyyIQ/ma2vKCPzVv3Z1yKcM6CGHXyYy3wQgtgeUzK6hLPmfInoEq9UoMi4dADsofDeg+UNQOqC2walss8SwdOoAzDQbohuibQc5CBzs3dFldgcX+UT0+oPAZrB02dqijyAQ6w6o3PETFIs95ATCsVPASQE8KhYAW7hKYSqUeBvKlCkpDWjTpxjMKPx/hupMwbLhrfrZyrpAzgxWwbk9UbMJ4+VxC68JB/mAJLcWrTlBdvenAqCH17pSOQ/3/G3Epw1qt2YHwZoS5If2qqPCS6LkT7sDyBh4DIBK4/BhY+uGd/uFHUKF9dz6rK+5pNbgs9GrJY8J5iuBT2QjYH0URWLEAq9Fde9CEk8GvdP6lPpo7cdrQpvw8SBDytPKls+Jq+104YL0+d/Danc/2PWjh+0uVT3NeYe5ejcULD3PnSbDadyfNZlMnoTuFXA1ZhtZ5w8tkT9OpPJs81sI7ka7nQonMa4Yc6edSUcrSO57iajYzm6slGhwUSiYrgEM4WHZxThWKKyQypLaaaVvMUIqcLXNEplhDFMGv8rX4x0omHhIcxG6Bk5FesIhttbRQIOhNLQEqmK3SN8nmLvPkWIzK5g1Fv0+02OzM3+ZxspOCUm5JJjnbotyxEhlg6WyhhZOhLMIZn2cqLs+CnLpBf3mk8CduBAHuz2ebpAAAAABJRU5ErkJggg=="},Zt8N:function(i,e){},"aBL+":function(i,e){},bT6r:function(i,e,t){"use strict";function s(i){t("w+fm")}var a=t("x6d+"),o=(a.a,Boolean,Number,String,String,String,Boolean,String,String,{name:"toast",mixins:[a.a],props:{value:Boolean,time:{type:Number,default:2e3},type:{type:String,default:"success"},transition:String,width:{type:String,default:"7.6em"},isShowMask:{type:Boolean,default:!1},text:String,position:String},data:function(){return{show:!1}},created:function(){this.value&&(this.show=!0)},computed:{currentTransition:function(){return this.transition?this.transition:"top"===this.position?"vux-slide-from-top":"bottom"===this.position?"vux-slide-from-bottom":"vux-fade"},toastClass:function(){return{"weui-toast_forbidden":"warn"===this.type,"weui-toast_cancel":"cancel"===this.type,"weui-toast_success":"success"===this.type,"weui-toast_text":"text"===this.type,"vux-toast-top":"top"===this.position,"vux-toast-bottom":"bottom"===this.position,"vux-toast-middle":"middle"===this.position}},style:function(){if("text"===this.type&&"auto"===this.width)return{padding:"10px"}}},watch:{show:function(i){var e=this;i&&(this.$emit("input",!0),this.$emit("on-show"),this.fixSafariOverflowScrolling("auto"),clearTimeout(this.timeout),this.timeout=setTimeout(function(){e.show=!1,e.$emit("input",!1),e.$emit("on-hide"),e.fixSafariOverflowScrolling("touch")},this.time))},value:function(i){this.show=i}}}),n=function(){var i=this,e=i.$createElement,t=i._self._c||e;return t("div",{staticClass:"vux-toast"},[t("div",{directives:[{name:"show",rawName:"v-show",value:i.isShowMask&&i.show,expression:"isShowMask && show"}],staticClass:"weui-mask_transparent"}),i._v(" "),t("transition",{attrs:{name:i.currentTransition}},[t("div",{directives:[{name:"show",rawName:"v-show",value:i.show,expression:"show"}],staticClass:"weui-toast",class:i.toastClass,style:{width:i.width}},[t("i",{directives:[{name:"show",rawName:"v-show",value:"text"!==i.type,expression:"type !== 'text'"}],staticClass:"weui-icon-success-no-circle weui-icon_toast"}),i._v(" "),i.text?t("p",{staticClass:"weui-toast__content",style:i.style,domProps:{innerHTML:i._s(i.text)}}):t("p",{staticClass:"weui-toast__content",style:i.style},[i._t("default")],2)])])],1)},r=[],l={render:n,staticRenderFns:r},c=l,d=t("C7Lr"),u=s,m=d(o,c,!1,u,null,null);e.a=m.exports},f9nr:function(i,e,t){"use strict";function s(i){t("1Uz0")}var a=t("fRcE"),o=(a.a,Boolean,String,String,String,Boolean,String,String,Number,String,{name:"alert",components:{XDialog:a.a},created:function(){void 0!==this.value&&(this.showValue=this.value)},props:{value:Boolean,title:String,content:String,buttonText:String,hideOnBlur:{type:Boolean,default:!1},maskTransition:{type:String,default:"vux-mask"},dialogTransition:{type:String,default:"vux-dialog"},maskZIndex:[Number,String]},data:function(){return{showValue:!1}},methods:{_onHide:function(){this.showValue=!1}},watch:{value:function(i){this.showValue=i},showValue:function(i){this.$emit("input",i)}}}),n=function(){var i=this,e=i.$createElement,t=i._self._c||e;return t("div",{staticClass:"vux-alert"},[t("x-dialog",{attrs:{"mask-transition":i.maskTransition,"dialog-transition":i.dialogTransition,"hide-on-blur":i.hideOnBlur,"mask-z-index":i.maskZIndex},on:{"on-hide":function(e){return i.$emit("on-hide")},"on-show":function(e){return i.$emit("on-show")}},model:{value:i.showValue,callback:function(e){i.showValue=e},expression:"showValue"}},[t("div",{staticClass:"weui-dialog__hd"},[t("strong",{staticClass:"weui-dialog__title"},[i._v(i._s(i.title))])]),i._v(" "),t("div",{staticClass:"weui-dialog__bd"},[i._t("default",[t("div",{domProps:{innerHTML:i._s(i.content)}})])],2),i._v(" "),t("div",{staticClass:"weui-dialog__ft"},[t("a",{staticClass:"weui-dialog__btn weui-dialog__btn_primary",attrs:{href:"javascript:;"},on:{click:i._onHide}},[i._v(i._s(i.buttonText||"确定"))])])])],1)},r=[],l={render:n,staticRenderFns:r},c=l,d=t("C7Lr"),u=s,m=d(o,c,!1,u,null,null);e.a=m.exports},fRcE:function(i,e,t){"use strict";function s(i){t("IhRb")}var a=t("v4/V"),o=(a.a,Boolean,String,String,Number,String,String,Boolean,Object,Boolean,{mixins:[a.a],name:"x-dialog",model:{prop:"show",event:"change"},props:{show:{type:Boolean,default:!1},maskTransition:{type:String,default:"vux-mask"},maskZIndex:[String,Number],dialogTransition:{type:String,default:"vux-dialog"},dialogClass:{type:String,default:"weui-dialog"},hideOnBlur:Boolean,dialogStyle:Object,scroll:{type:Boolean,default:!0,validator:function(i){return!0}}},computed:{maskStyle:function(){if(void 0!==this.maskZIndex)return{zIndex:this.maskZIndex}}},mounted:function(){"undefined"!=typeof window&&window.VUX_CONFIG&&"VIEW_BOX"===window.VUX_CONFIG.$layout&&(this.layout="VIEW_BOX")},watch:{show:function(i){this.$emit("update:show",i),this.$emit(i?"on-show":"on-hide"),i?this.addModalClassName():this.removeModalClassName()}},methods:{shouldPreventScroll:function(){var i=/iPad|iPhone|iPod/i.test(window.navigator.userAgent),e=this.$el.querySelector("input")||this.$el.querySelector("textarea");if(i&&e)return!0},hide:function(){this.hideOnBlur&&(this.$emit("update:show",!1),this.$emit("change",!1),this.$emit("on-click-mask"))}},data:function(){return{layout:""}}}),n=function(){var i=this,e=i.$createElement,t=i._self._c||e;return t("div",{staticClass:"vux-x-dialog",class:{"vux-x-dialog-absolute":"VIEW_BOX"===i.layout}},[t("transition",{attrs:{name:i.maskTransition}},[t("div",{directives:[{name:"show",rawName:"v-show",value:i.show,expression:"show"}],staticClass:"weui-mask",style:i.maskStyle,on:{click:i.hide}})]),i._v(" "),t("transition",{attrs:{name:i.dialogTransition}},[t("div",{directives:[{name:"show",rawName:"v-show",value:i.show,expression:"show"}],class:i.dialogClass,style:i.dialogStyle},[i._t("default")],2)])],1)},r=[],l={render:n,staticRenderFns:r},c=l,d=t("C7Lr"),u=s,m=d(o,c,!1,u,null,null);e.a=m.exports},gjNJ:function(i,e){},h8Gu:function(i,e){},hrQI:function(i,e){},i1WR:function(i,e){},jOLW:function(i,e){},jzSm:function(i,e){},kC67:function(i,e){},ncIx:function(i,e){},ofdG:function(i,e){},raYE:function(i,e){},sOKc:function(i,e){},sooj:function(i,e){},"w+fm":function(i,e){},yAHh:function(i,e){}},["NHnr"]);
//# sourceMappingURL=app.2df852f484efbea3432c.js.map